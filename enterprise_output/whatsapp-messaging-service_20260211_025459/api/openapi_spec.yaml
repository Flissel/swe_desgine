openapi: 3.0.3
info:
  title: whatsapp-messaging-service API
  version: 1.0.0
  description: 'API specification generated from requirements.


    Generated: 2026-02-11T03:53:49.405045'
servers:
- url: https://api.example.com
  description: Production server
paths:
  /api/v1/phone-registrations:
    post:
      summary: Start phone registration
      description: Creates a phone registration session and sends an OTP to the provided
        phone number for verification.
      operationId: createPhoneRegistration
      tags:
      - Auth
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePhoneRegistrationRequest'
      responses:
        '201':
          description: Created - Registration session created and OTP sent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreatePhoneRegistrationResponse'
        '400':
          description: Bad Request - Invalid phone number or missing required fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Phone number already registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/phone-registrations/{registrationId}/verify:
    post:
      summary: Verify phone registration
      description: Verifies the OTP for a phone registration session and creates/activates
        the user account.
      operationId: verifyPhoneRegistration
      tags:
      - Auth
      security: []
      parameters:
      - name: registrationId
        in: path
        required: true
        description: Registration session identifier
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyPhoneRegistrationRequest'
      responses:
        '201':
          description: Created - Phone number verified and user account created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VerifyPhoneRegistrationResponse'
        '400':
          description: Bad Request - Invalid or expired OTP
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Registration session does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Phone number already verified
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/phone-registrations/{registrationId}/resend-otp:
    post:
      summary: Resend OTP
      description: Resends the OTP for an existing phone registration session.
      operationId: resendPhoneRegistrationOtp
      tags:
      - Auth
      security: []
      parameters:
      - name: registrationId
        in: path
        required: true
        description: Registration session identifier
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResendPhoneRegistrationOtpRequest'
      responses:
        '201':
          description: Created - OTP resent successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResendPhoneRegistrationOtpResponse'
        '400':
          description: Bad Request - Invalid delivery channel
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Registration session does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - OTP resend rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/2fa:
    post:
      summary: Enable 2FA with 6-digit PIN
      description: Enables optional two-factor authentication for the user by setting
        a 6-digit PIN.
      operationId: enableTwoFactor
      tags:
      - TwoFactorAuth
      - Users
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnableTwoFactorRequest'
      responses:
        '201':
          description: Created - 2FA enabled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnableTwoFactorResponse'
        '400':
          description: Bad Request - PIN must be exactly 6 digits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - 2FA already enabled for user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Disable 2FA
      description: Disables optional two-factor authentication for the user.
      operationId: disableTwoFactor
      tags:
      - TwoFactorAuth
      - Users
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DisableTwoFactorRequest'
      responses:
        '200':
          description: OK - 2FA disabled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DisableTwoFactorResponse'
        '400':
          description: Bad Request - PIN must be exactly 6 digits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - PIN verification failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or 2FA configuration not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: Get 2FA status
      description: Returns whether two-factor authentication is enabled for the user.
      operationId: getTwoFactorStatus
      tags:
      - TwoFactorAuth
      - Users
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetTwoFactorStatusRequest'
      responses:
        '200':
          description: OK - 2FA status returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetTwoFactorStatusResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/2fa/verify:
    post:
      summary: Verify 2FA PIN during authentication
      description: Verifies the 6-digit PIN for users with 2FA enabled during login.
      operationId: verifyTwoFactor
      tags:
      - TwoFactorAuth
      - Auth
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyTwoFactorRequest'
      responses:
        '200':
          description: OK - 2FA verified
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VerifyTwoFactorResponse'
        '400':
          description: Bad Request - PIN must be exactly 6 digits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Invalid login session
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - PIN verification failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or 2FA configuration not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/biometric/registration-options:
    post:
      summary: Create biometric registration challenge
      description: Generates a WebAuthn/FIDO2 registration challenge for enrolling
        a biometric credential on a trusted device.
      operationId: createBiometricRegistrationOptions
      tags:
      - BiometricAuth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BiometricRegistrationOptionsRequest'
      responses:
        '201':
          description: Created - Registration options generated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BiometricRegistrationOptionsResponse'
        '400':
          description: Bad Request - Missing or invalid device information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Biometric registration already initiated for device
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/biometric/credentials:
    post:
      summary: Enroll biometric credential
      description: Completes biometric enrollment by submitting the attestation response
        from the device.
      operationId: createBiometricCredential
      tags:
      - BiometricAuth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBiometricCredentialRequest'
      responses:
        '201':
          description: Created - Biometric credential enrolled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateBiometricCredentialResponse'
        '400':
          description: Bad Request - Invalid attestation data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Credential already enrolled for device
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List biometric credentials
      description: Returns a paginated list of enrolled biometric credentials for
        the authenticated user.
      operationId: listBiometricCredentials
      tags:
      - BiometricAuth
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListBiometricCredentialsRequest'
      responses:
        '200':
          description: OK - Credentials retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedListBiometricCredentialsResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/biometric/credentials/{credentialId}:
    delete:
      summary: Revoke biometric credential
      description: Revokes an enrolled biometric credential for the authenticated
        user.
      operationId: deleteBiometricCredential
      tags:
      - BiometricAuth
      parameters:
      - name: credentialId
        in: path
        required: true
        description: Biometric credential ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteBiometricCredentialRequest'
      responses:
        '200':
          description: OK - Credential revoked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteBiometricCredentialResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Credential does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/biometric/authentication-options:
    post:
      summary: Create biometric authentication challenge
      description: Generates a WebAuthn/FIDO2 authentication challenge for biometric
        login.
      operationId: createBiometricAuthenticationOptions
      tags:
      - BiometricAuth
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BiometricAuthenticationOptionsRequest'
      responses:
        '201':
          description: Created - Authentication options generated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BiometricAuthenticationOptionsResponse'
        '400':
          description: Bad Request - Missing or invalid user/device information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or credential not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Authentication already in progress for device
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/biometric/authenticate:
    post:
      summary: Authenticate with biometrics
      description: Validates the biometric assertion response and issues authentication
        tokens.
      operationId: authenticateWithBiometrics
      tags:
      - BiometricAuth
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BiometricAuthenticateRequest'
      responses:
        '200':
          description: OK - Authentication successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BiometricAuthenticateResponse'
        '400':
          description: Bad Request - Invalid assertion payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Biometric verification failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Credential not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Too many failed biometric attempts
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/devices:
    post:
      summary: Register a device
      description: Registers a new device for the authenticated user to enable multi-device
        usage with end-to-end encryption metadata and push/WebSocket capabilities.
      operationId: registerDevice
      tags:
      - Devices
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterDeviceRequest'
      responses:
        '201':
          description: Created - Device registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeviceResponse'
        '400':
          description: Bad Request - Missing or invalid device registration data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Device already registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List registered devices
      description: Returns a paginated list of devices registered for the authenticated
        user to manage multi-device usage.
      operationId: listDevices
      tags:
      - Devices
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListDevicesRequest'
      responses:
        '200':
          description: OK - Devices retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedDeviceListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/devices/{deviceId}:
    get:
      summary: Get device details
      description: Returns details for a specific registered device of the authenticated
        user.
      operationId: getDevice
      tags:
      - Devices
      parameters:
      - name: deviceId
        in: path
        required: true
        description: Device ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetDeviceRequest'
      responses:
        '200':
          description: OK - Device details retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeviceResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Device does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update device metadata
      description: Updates device metadata such as name, push token, and websocket
        capability to support multi-device sync.
      operationId: updateDevice
      tags:
      - Devices
      parameters:
      - name: deviceId
        in: path
        required: true
        description: Device ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDeviceRequest'
      responses:
        '200':
          description: OK - Device updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeviceResponse'
        '400':
          description: Bad Request - Invalid update payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Device does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Revoke a device
      description: Revokes a device session and removes it from the user's multi-device
        list.
      operationId: revokeDevice
      tags:
      - Devices
      parameters:
      - name: deviceId
        in: path
        required: true
        description: Device ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RevokeDeviceRequest'
      responses:
        '200':
          description: OK - Device revoked successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RevokeDeviceResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Device does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/devices/{deviceId}/prekeys:
    post:
      summary: Upload Signal pre-keys for device
      description: Uploads a batch of Signal Protocol pre-keys for a specific device
        to enable encrypted multi-device messaging.
      operationId: uploadDevicePrekeys
      tags:
      - Devices
      - Encryption
      parameters:
      - name: deviceId
        in: path
        required: true
        description: Device ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UploadPrekeysRequest'
      responses:
        '201':
          description: Created - Pre-keys uploaded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadPrekeysResponse'
        '400':
          description: Bad Request - Invalid pre-key payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Device does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/passkeys/registration/options:
    post:
      summary: Get passkey registration options
      description: Generates WebAuthn registration options (challenge, rp, user, params)
        for creating a passkey on the client.
      operationId: createPasskeyRegistrationOptions
      tags:
      - Auth
      - Passkeys
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PasskeyRegistrationOptionsRequest'
      responses:
        '201':
          description: Created - Registration options generated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PasskeyRegistrationOptionsResponse'
        '400':
          description: Bad Request - Missing or invalid registration input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to create registration options
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/passkeys/registration/verify:
    post:
      summary: Verify passkey registration
      description: Verifies the WebAuthn registration response and stores the passkey
        credential for the user.
      operationId: verifyPasskeyRegistration
      tags:
      - Auth
      - Passkeys
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PasskeyRegistrationVerifyRequest'
      responses:
        '201':
          description: Created - Passkey registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PasskeyRegistrationVerifyResponse'
        '400':
          description: Bad Request - Invalid attestation or malformed credential
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Passkey already registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Challenge mismatch or verification failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to store passkey
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/passkeys/authentication/options:
    post:
      summary: Get passkey authentication options
      description: Generates WebAuthn authentication options (challenge, allowCredentials)
        for passkey login.
      operationId: createPasskeyAuthenticationOptions
      tags:
      - Auth
      - Passkeys
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PasskeyAuthenticationOptionsRequest'
      responses:
        '201':
          description: Created - Authentication options generated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PasskeyAuthenticationOptionsResponse'
        '400':
          description: Bad Request - Missing or invalid authentication input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User not found or no passkeys available
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to create authentication options
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/passkeys/authentication/verify:
    post:
      summary: Verify passkey authentication
      description: Verifies the WebAuthn authentication response and issues access
        tokens upon success.
      operationId: verifyPasskeyAuthentication
      tags:
      - Auth
      - Passkeys
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PasskeyAuthenticationVerifyRequest'
      responses:
        '201':
          description: Created - Authentication verified and tokens issued
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PasskeyAuthenticationVerifyResponse'
        '400':
          description: Bad Request - Invalid assertion or malformed credential
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Verification failed or credential not recognized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Challenge mismatch or signature invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to verify authentication
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/passkeys:
    get:
      summary: List user's passkeys
      description: Returns the list of registered passkeys for a user.
      operationId: listUserPasskeys
      tags:
      - Users
      - Passkeys
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListUserPasskeysRequest'
      responses:
        '200':
          description: OK - Passkeys retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedUserPasskeysResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve passkeys
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/passkeys/{credentialId}:
    delete:
      summary: Delete a passkey
      description: Removes a registered passkey credential for the user.
      operationId: deleteUserPasskey
      tags:
      - Users
      - Passkeys
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      - name: credentialId
        in: path
        required: true
        description: Credential ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteUserPasskeyRequest'
      responses:
        '200':
          description: OK - Passkey deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteUserPasskeyResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to delete this passkey
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Passkey not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to delete passkey
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/profile-images:
    post:
      summary: Upload profile image
      description: Uploads a new profile image for the specified user. Enforces max
        image size of 16MB. Overwrites existing profile image metadata with the latest
        version.
      operationId: uploadUserProfileImage
      tags:
      - ProfileImages
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UploadProfileImageRequest'
      responses:
        '201':
          description: Created - Profile image uploaded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileImageResponse'
        '400':
          description: Bad Request - Invalid file or exceeded size limit (max 16MB)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to modify this user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '415':
          description: Unsupported Media Type - Only image files are allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to store profile image
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/profile-images/current:
    get:
      summary: Get current profile image
      description: Retrieves metadata for the user's current profile image.
      operationId: getCurrentUserProfileImage
      tags:
      - ProfileImages
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetProfileImageRequest'
      responses:
        '200':
          description: OK - Profile image retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileImageResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to access this user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - No profile image set for user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve profile image
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Replace current profile image
      description: Replaces the user's current profile image with a new one. Enforces
        max image size of 16MB.
      operationId: replaceCurrentUserProfileImage
      tags:
      - ProfileImages
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ReplaceProfileImageRequest'
      responses:
        '200':
          description: OK - Profile image replaced
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileImageResponse'
        '400':
          description: Bad Request - Invalid file or exceeded size limit (max 16MB)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to modify this user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '415':
          description: Unsupported Media Type - Only image files are allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to replace profile image
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete current profile image
      description: Deletes the user's current profile image.
      operationId: deleteCurrentUserProfileImage
      tags:
      - ProfileImages
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteProfileImageRequest'
      responses:
        '200':
          description: OK - Profile image deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteProfileImageResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to modify this user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - No profile image set for user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to delete profile image
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/profile:
    get:
      summary: Get user profile
      description: Retrieves the user's profile details including the phone number
        for display in the profile.
      operationId: getUserProfile
      tags:
      - Users
      parameters:
      - name: userId
        in: path
        required: true
        description: Unique identifier of the user whose profile is requested
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetUserProfileRequest'
      responses:
        '200':
          description: OK - Profile retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfileResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Access to the requested profile is not permitted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User profile does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected error while retrieving the
            profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/profile/display-name:
    put:
      summary: Update display name
      description: Updates the configurable display name for a user profile.
      operationId: updateUserDisplayName
      tags:
      - Users
      parameters:
      - name: userId
        in: path
        required: true
        description: Unique identifier of the user
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDisplayNameRequest'
      responses:
        '200':
          description: OK - Display name updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateDisplayNameResponse'
        '400':
          description: Bad Request - Display name is invalid or missing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to update this profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Display name update conflicts with current state
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected error while updating display
            name
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/profile/info-text:
    get:
      summary: Get profile info text
      description: Retrieves the short info/status text displayed in a user's profile.
      operationId: getUserProfileInfoText
      tags:
      - Profiles
      parameters:
      - name: userId
        in: path
        required: true
        description: Unique identifier of the user
        schema:
          type: string
      responses:
        '200':
          description: OK - Info text retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfileInfoTextResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to access this user's profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or profile info text does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update profile info text
      description: Creates or updates the short info/status text displayed in a user's
        profile.
      operationId: updateUserProfileInfoText
      tags:
      - Profiles
      parameters:
      - name: userId
        in: path
        required: true
        description: Unique identifier of the user
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserProfileInfoTextRequest'
      responses:
        '200':
          description: OK - Info text updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfileInfoTextResponse'
        '400':
          description: Bad Request - Info text is missing, empty, or exceeds allowed
            length
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to update this user's profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Concurrent update conflict detected
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/qr-codes:
    post:
      summary: Generate a new profile QR code
      description: Generates a new scannable QR code that encodes a secure, time-bound
        invite/deeplink for adding the user profile.
      operationId: createUserQrCode
      tags:
      - Users
      - QrCodes
      parameters:
      - name: userId
        in: path
        required: true
        description: Unique user identifier
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserQrCodeRequest'
      responses:
        '201':
          description: Created - QR code generated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserQrCodeResponse'
        '400':
          description: Bad Request - Invalid format, size, or validitySeconds
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - QR code generation rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to generate QR code
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/qr-codes/{qrCodeId}:
    get:
      summary: Retrieve a profile QR code
      description: Retrieves a previously generated QR code for the user profile.
      operationId: getUserQrCode
      tags:
      - Users
      - QrCodes
      parameters:
      - name: userId
        in: path
        required: true
        description: Unique user identifier
        schema:
          type: string
      - name: qrCodeId
        in: path
        required: true
        description: Unique QR code identifier
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetUserQrCodeRequest'
      responses:
        '200':
          description: OK - QR code retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserQrCodeResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - QR code or user does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '410':
          description: Gone - QR code has expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to retrieve QR code
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/conversations/{conversationId}/messages:
    post:
      summary: Send an image message
      description: Creates a new message with an image attachment in a conversation.
        Supports offline queueing by accepting client-generated messageId and idempotency
        key.
      operationId: sendImageMessage
      tags:
      - Messages
      parameters:
      - name: conversationId
        in: path
        required: true
        description: Conversation ID (1:1, group, or broadcast)
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendImageMessageRequest'
      responses:
        '201':
          description: Created - Image message sent or queued
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SendImageMessageResponse'
        '400':
          description: Bad Request - Missing or invalid fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not a member of the conversation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Conversation or media not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate messageId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to create message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: Nachrichten ab bestimmtem Datum abrufen
      description: Ermoeglicht den Sprung zu einem bestimmten Datum in einer Konversation
        und liefert Nachrichten ab dem angegebenen Zeitpunkt. Unterstuetzt Offline-Nachrichten-Queue
        durch serverseitige Synchronisation der Historie.
      operationId: getMessagesByDate
      tags:
      - Messages
      - Conversations
      parameters:
      - name: conversationId
        in: path
        required: true
        description: Eindeutige ID der Konversation
        schema:
          type: string
      - name: date
        in: query
        required: true
        description: ISO-8601 Datum/Zeit (UTC) als Sprungziel, z. B. 2024-05-01T00:00:00Z
        schema:
          type: string
      - name: direction
        in: query
        required: false
        description: 'Richtung der Suche relativ zum Datum: ''forward'' oder ''backward''
          (Standard: forward)'
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Seitennummer fuer die Paginierung
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Anzahl der Eintraege pro Seite
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetMessagesByDateRequest'
      responses:
        '200':
          description: OK - Nachrichten erfolgreich abgerufen
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedMessagesByDateResponse'
        '400':
          description: Bad Request - Ungueltiges Datumsformat oder Parameter
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Fehlendes oder ungueltiges Token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Kein Zugriff auf die Konversation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Konversation nicht gefunden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unerwarteter Serverfehler
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages/voice:
    post:
      summary: Send a voice message
      description: Creates and sends a new end-to-end encrypted voice message to a
        user, group, or broadcast list. The voice payload is uploaded as a binary
        file and is expected to be encrypted client-side using the Signal Protocol.
      operationId: createVoiceMessage
      tags:
      - Messages
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateVoiceMessageRequest'
      responses:
        '201':
          description: Created - Voice message accepted for delivery
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoiceMessageResponse'
        '400':
          description: Bad Request - Missing or invalid fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Recipient not allowed or blocked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Recipient does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Voice message exceeds allowed size
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '415':
          description: Unsupported Media Type - Invalid MIME type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to process voice message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages/{messageId}:
    delete:
      summary: Delete a message immediately
      description: Deletes a message for all recipients before its self-destruct timer.
        This is distinct from automatic self-destruction.
      operationId: deleteMessage
      tags:
      - Messages
      parameters:
      - name: messageId
        in: path
        required: true
        description: Message ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteMessageRequest'
      responses:
        '200':
          description: OK - Message deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteMessageResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User cannot delete this message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Message does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Edit a sent message
      description: Allows a sender to edit an already sent message. The updated content
        must be provided as end-to-end encrypted payload compatible with Signal Protocol.
        The server stores the updated ciphertext and broadcasts the edit event via
        WebSocket to recipients, supporting offline queues.
      operationId: editMessage
      tags:
      - Messages
      parameters:
      - name: messageId
        in: path
        required: true
        description: Unique identifier of the message to edit
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EditMessageRequest'
      responses:
        '200':
          description: OK - Message edited successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EditMessageResponse'
        '400':
          description: Bad Request - Missing or invalid encrypted payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User is not the sender of the message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Message does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Edit version conflict or duplicate clientEditId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Encrypted content exceeds allowed size
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to process message edit
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages/{messageId}/forward:
    post:
      summary: Forward a message
      description: Forwards an existing message to one or more recipients (users,
        groups, or broadcast lists) with end-to-end encryption payloads and optional
        client-side offline queue metadata.
      operationId: forwardMessage
      tags:
      - Messages
      parameters:
      - name: messageId
        in: path
        required: true
        description: ID of the original message to forward
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForwardMessageRequest'
      responses:
        '201':
          description: Created - Message forwarded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ForwardMessageResponse'
        '400':
          description: Bad Request - Invalid recipients or malformed encryption envelope
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Sender not allowed to forward to target
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Original message or recipient not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Forwarded media exceeds size limits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Recipient limits exceeded (group or
            broadcast)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to forward message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages:
    post:
      summary: Send encrypted message
      description: Sends an end-to-end encrypted message payload. Server stores ciphertext
        for offline delivery and forwards over WebSocket when available.
      operationId: sendEncryptedMessage
      tags:
      - Messages
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendEncryptedMessageRequest'
      responses:
        '201':
          description: Created - Encrypted message accepted and queued
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SendEncryptedMessageResponse'
        '400':
          description: Bad Request - Missing ciphertext or invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Encrypted payload exceeds limits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate clientMessageId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: Fetch encrypted message queue
      description: Retrieves queued encrypted messages for the authenticated device
        for offline delivery.
      operationId: listQueuedMessages
      tags:
      - Messages
      parameters:
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListQueuedMessagesRequest'
      responses:
        '200':
          description: OK - Queued messages returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedQueuedMessagesResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - No queued messages for device
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages/{messageId}/reactions:
    post:
      summary: Add an emoji reaction to a message
      description: Creates an emoji reaction for the specified message. Reaction payload
        should be end-to-end encrypted as per Signal Protocol client-side before submission.
      operationId: addMessageReaction
      tags:
      - Reactions
      - Messages
      parameters:
      - name: messageId
        in: path
        required: true
        description: Message ID to react to
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReactionRequest'
      responses:
        '201':
          description: Created - Reaction added
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReactionResponse'
        '400':
          description: Bad Request - Invalid emoji or missing required fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Message does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Reaction already exists for this user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List emoji reactions for a message
      description: Returns a paginated list of emoji reactions for the specified message.
      operationId: listMessageReactions
      tags:
      - Reactions
      - Messages
      parameters:
      - name: messageId
        in: path
        required: true
        description: Message ID to fetch reactions for
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListReactionsRequest'
      responses:
        '200':
          description: OK - Reactions retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedReactionListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Message does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages/{messageId}/reactions/{reactionId}:
    delete:
      summary: Remove an emoji reaction from a message
      description: Deletes a previously added reaction. The caller must be the owner
        of the reaction.
      operationId: removeMessageReaction
      tags:
      - Reactions
      - Messages
      parameters:
      - name: messageId
        in: path
        required: true
        description: Message ID
        schema:
          type: string
      - name: reactionId
        in: path
        required: true
        description: Reaction ID to remove
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteReactionRequest'
      responses:
        '200':
          description: OK - Reaction removed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteReactionResponse'
        '400':
          description: Bad Request - Invalid identifiers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to delete this reaction
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Reaction or message does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages/{messageId}/self-destruct:
    patch:
      summary: Update self-destruct policy for a message
      description: Updates the self-destruction policy for a pending message where
        allowed. Used to adjust TTL or expiration before delivery.
      operationId: updateMessageSelfDestruct
      tags:
      - Messages
      parameters:
      - name: messageId
        in: path
        required: true
        description: Message ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSelfDestructRequest'
      responses:
        '200':
          description: OK - Self-destruct policy updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateSelfDestructResponse'
        '400':
          description: Bad Request - Invalid TTL or expiration timestamp
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Policy cannot be changed after delivery
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Message does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/media:
    post:
      summary: Upload media attachment
      description: Uploads media for AI chat messages with size limits (2GB documents,
        16MB images).
      operationId: uploadMedia
      tags:
      - Media
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UploadMediaRequest'
      responses:
        '201':
          description: Created - Media uploaded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MediaResponse'
        '400':
          description: Bad Request - Missing file or unsupported mediaType
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Media exceeds allowed size limits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: Search media with type filters
      description: Retrieve media items with optional filtering by media types. Supports
        pagination for mobile-first clients.
      operationId: listMediaByType
      tags:
      - Media
      parameters:
      - name: mediaTypes
        in: query
        required: false
        description: Comma-separated list of media types to filter by (e.g., image,
          video, audio, document)
        schema:
          type: string
      - name: conversationId
        in: query
        required: false
        description: Filter media within a specific conversation or group
        schema:
          type: string
      - name: senderId
        in: query
        required: false
        description: Filter media by sender user ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListMediaByTypeRequest'
      responses:
        '200':
          description: OK - Media list retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedMediaListResponse'
        '400':
          description: Bad Request - Invalid filter or pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Access to the requested media is not allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve media list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/media/{mediaId}/view-once:
    get:
      summary: Retrieve and consume view-once media
      description: Returns the encrypted media content and marks it as consumed. Subsequent
        requests return 410 Gone.
      operationId: getViewOnceMedia
      tags:
      - Media
      parameters:
      - name: mediaId
        in: path
        required: true
        description: Media ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/octet-stream:
            schema:
              $ref: '#/components/schemas/GetViewOnceMediaRequest'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ViewOnceMediaResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not a recipient of the media
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Media not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '410':
          description: Gone - Media already consumed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Media retrieval failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/{chatId}/lock:
    put:
      summary: Lock a chat with additional authentication
      description: Locks a specific chat for the authenticated user after validating
        an additional authentication factor (e.g., biometric, OTP, or device PIN).
      operationId: lockChat
      tags:
      - Chats
      parameters:
      - name: chatId
        in: path
        required: true
        description: Chat ID to be locked
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LockChatRequest'
      responses:
        '200':
          description: OK - Chat locked successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatLockResponse'
        '400':
          description: Bad Request - Missing or invalid authentication data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Additional authentication failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Chat does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Chat is already locked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '423':
          description: Locked - Chat cannot be locked due to policy restrictions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/{chatId}/unlock:
    put:
      summary: Unlock a chat with additional authentication
      description: Unlocks a specific chat for the authenticated user after validating
        an additional authentication factor.
      operationId: unlockChat
      tags:
      - Chats
      parameters:
      - name: chatId
        in: path
        required: true
        description: Chat ID to be unlocked
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UnlockChatRequest'
      responses:
        '200':
          description: OK - Chat unlocked successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatUnlockResponse'
        '400':
          description: Bad Request - Missing or invalid authentication data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Additional authentication failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Chat does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Chat is already unlocked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/broadcast-lists:
    post:
      summary: Create a broadcast list
      description: Creates a new broadcast list for mass messaging to multiple recipients
        (max 256).
      operationId: createBroadcastList
      tags:
      - BroadcastLists
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBroadcastListRequest'
      responses:
        '201':
          description: Created - Broadcast list created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BroadcastListResponse'
        '400':
          description: Bad Request - Recipient list exceeds limit or invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Broadcast list name already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List broadcast lists
      description: Returns a paginated list of broadcast lists for the authenticated
        user.
      operationId: listBroadcastLists
      tags:
      - BroadcastLists
      parameters:
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListBroadcastListsRequest'
      responses:
        '200':
          description: OK - Broadcast lists returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBroadcastListCollectionResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/broadcast-lists/{broadcastListId}:
    get:
      summary: Get broadcast list details
      description: Returns details of a single broadcast list including recipients.
      operationId: getBroadcastList
      tags:
      - BroadcastLists
      parameters:
      - name: broadcastListId
        in: path
        required: true
        description: Broadcast list ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetBroadcastListRequest'
      responses:
        '200':
          description: OK - Broadcast list returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BroadcastListDetailResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Broadcast list does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update broadcast list
      description: Updates broadcast list name and recipients (max 256).
      operationId: updateBroadcastList
      tags:
      - BroadcastLists
      parameters:
      - name: broadcastListId
        in: path
        required: true
        description: Broadcast list ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateBroadcastListRequest'
      responses:
        '200':
          description: OK - Broadcast list updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BroadcastListResponse'
        '400':
          description: Bad Request - Recipient list exceeds limit or invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Broadcast list does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete broadcast list
      description: Deletes an existing broadcast list.
      operationId: deleteBroadcastList
      tags:
      - BroadcastLists
      parameters:
      - name: broadcastListId
        in: path
        required: true
        description: Broadcast list ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteBroadcastListRequest'
      responses:
        '200':
          description: OK - Broadcast list deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteBroadcastListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Broadcast list does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/broadcast-lists/{broadcastListId}/messages:
    post:
      summary: Send broadcast message
      description: Sends an end-to-end encrypted message to all recipients in the
        broadcast list. Supports offline queuing and real-time delivery via WebSocket.
      operationId: sendBroadcastMessage
      tags:
      - BroadcastMessages
      parameters:
      - name: broadcastListId
        in: path
        required: true
        description: Broadcast list ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendBroadcastMessageRequest'
      responses:
        '201':
          description: Created - Broadcast message accepted for delivery
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BroadcastMessageResponse'
        '400':
          description: Bad Request - Invalid encrypted payload or message type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Broadcast list does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Media exceeds size limits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/group-chats/{groupId}/messages:
    post:
      summary: Send a group message with @mentions
      description: Creates a new end-to-end encrypted group message and supports @mentions
        by specifying mentioned user IDs. Mentions are delivered via WebSocket when
        online and via offline queue when recipients are offline.
      operationId: createGroupMessage
      tags:
      - GroupMessages
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group chat ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGroupMessageRequest'
      responses:
        '201':
          description: Created - Message accepted and queued for delivery
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupMessageResponse'
        '400':
          description: Bad Request - Missing ciphertext or invalid mentions format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Sender is not a member of the group
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group chat does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate clientMessageId detected
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Encrypted payload exceeds allowed size
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/conversations/{conversationId}/messages/location:
    post:
      summary: Share location in a conversation
      description: Creates a new end-to-end encrypted location message within a conversation
        (1:1, group, or broadcast). The server stores only encrypted payload and metadata
        required for routing; supports offline queueing and real-time delivery via
        WebSocket.
      operationId: createLocationMessage
      tags:
      - Messages
      - Locations
      parameters:
      - name: conversationId
        in: path
        required: true
        description: Conversation ID (direct, group, or broadcast)
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLocationMessageRequest'
      responses:
        '201':
          description: Created - Location message accepted for delivery
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationMessageResponse'
        '400':
          description: Bad Request - Missing or invalid fields in location message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Sender is not a participant of the conversation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Conversation does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate clientMessageId for this conversation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Encrypted payload exceeds allowed size
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to enqueue location message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/{chatId}/messages:
    post:
      summary: Send a media message in a chat
      description: Creates a chat message that references previously uploaded camera
        media and includes encrypted payloads for end-to-end encryption.
      operationId: createChatMediaMessage
      tags:
      - ChatMessages
      parameters:
      - name: chatId
        in: path
        required: true
        description: Chat ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateChatMediaMessageRequest'
      responses:
        '201':
          description: Created - Media message created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatMessageResponse'
        '400':
          description: Bad Request - Invalid message payload or missing fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Chat or media not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate clientMessageId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Message creation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups:
    post:
      summary: Create a new group
      description: Creates a new group with initial metadata. Enforces max group size
        (1024) and encryption metadata for Signal Protocol key distribution.
      operationId: createGroup
      tags:
      - Groups
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGroupRequest'
      responses:
        '201':
          description: Created - Group created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupResponse'
        '400':
          description: Bad Request - Invalid payload or member limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate group name for owner
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List groups
      description: Returns groups the user belongs to, with pagination.
      operationId: listGroups
      tags:
      - Groups
      parameters:
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListGroupsRequest'
      responses:
        '200':
          description: OK - Groups retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedGroupListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups/{groupId}:
    get:
      summary: Get group details
      description: Returns group metadata including settings and member count.
      operationId: getGroup
      tags:
      - Groups
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetGroupRequest'
      responses:
        '200':
          description: OK - Group retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update group metadata
      description: Updates group name/description and settings.
      operationId: updateGroup
      tags:
      - Groups
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateGroupRequest'
      responses:
        '200':
          description: OK - Group updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupResponse'
        '400':
          description: Bad Request - Invalid update payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete a group
      description: Deletes a group and all associated metadata.
      operationId: deleteGroup
      tags:
      - Groups
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteGroupRequest'
      responses:
        '200':
          description: OK - Group deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteGroupResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups/{groupId}/members:
    get:
      summary: List group members
      description: Returns paginated list of group members.
      operationId: listGroupMembers
      tags:
      - GroupMembers
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListGroupMembersRequest'
      responses:
        '200':
          description: OK - Members retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedGroupMemberListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    post:
      summary: Add members to group
      description: Adds members to the group. Enforces max group size (1024).
      operationId: addGroupMembers
      tags:
      - GroupMembers
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddGroupMembersRequest'
      responses:
        '201':
          description: Created - Members added
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddGroupMembersResponse'
        '400':
          description: Bad Request - Invalid member list or member limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups/{groupId}/members/{memberId}:
    delete:
      summary: Remove member from group
      description: Removes a member from the group.
      operationId: removeGroupMember
      tags:
      - GroupMembers
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      - name: memberId
        in: path
        required: true
        description: Member user ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveGroupMemberRequest'
      responses:
        '200':
          description: OK - Member removed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RemoveGroupMemberResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group or member does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups/{groupId}/roles:
    put:
      summary: Update member roles
      description: Updates roles for group members (e.g., admin, member).
      operationId: updateGroupRoles
      tags:
      - GroupMembers
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateGroupRolesRequest'
      responses:
        '200':
          description: OK - Roles updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateGroupRolesResponse'
        '400':
          description: Bad Request - Invalid role payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups/{groupId}/owner:
    put:
      summary: Transfer group ownership
      description: Transfers group ownership to another member.
      operationId: transferGroupOwnership
      tags:
      - Groups
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferGroupOwnershipRequest'
      responses:
        '200':
          description: OK - Ownership transferred
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransferGroupOwnershipResponse'
        '400':
          description: Bad Request - New owner is not a member
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups/{groupId}/avatar:
    post:
      summary: Upload group avatar
      description: Uploads a group avatar image (max 16MB).
      operationId: uploadGroupAvatar
      tags:
      - Groups
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UploadGroupAvatarRequest'
      responses:
        '201':
          description: Created - Avatar uploaded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadGroupAvatarResponse'
        '400':
          description: Bad Request - Invalid file type or size exceeds 16MB
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups/{groupId}/settings:
    get:
      summary: Get group settings
      description: Retrieves the configurable settings for a specific group.
      operationId: getGroupSettings
      tags:
      - Groups
      parameters:
      - name: groupId
        in: path
        required: true
        description: Unique group ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Group settings retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupSettingsResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to view settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update group settings
      description: Updates configurable settings for a specific group. Validates constraints
        such as max members and encryption compatibility.
      operationId: updateGroupSettings
      tags:
      - Groups
      parameters:
      - name: groupId
        in: path
        required: true
        description: Unique group ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateGroupSettingsRequest'
      responses:
        '200':
          description: OK - Group settings updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupSettingsResponse'
        '400':
          description: Bad Request - Invalid settings or constraint violation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to update settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Update violates group state or constraints
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups/{groupId}/invite-links:
    post:
      summary: Create a group invite link
      description: Creates a new invitation link for a group. The link can be shared
        to allow users to join the group. Enforces maximum group size of 1024 members.
      operationId: createGroupInviteLink
      tags:
      - Groups
      - Invites
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGroupInviteLinkRequest'
      responses:
        '201':
          description: Created - Invite link created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupInviteLinkResponse'
        '400':
          description: Bad Request - Invalid expiration or maxUses
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to create invite links for this group
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Active invite link already exists with same constraints
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/invite-links/{inviteToken}:
    get:
      summary: Get invite link details
      description: Returns basic information about an invite link to display to the
        user before joining. This endpoint is public so the link can be previewed
        without authentication.
      operationId: getInviteLinkDetails
      tags:
      - Invites
      - Groups
      security: []
      parameters:
      - name: inviteToken
        in: path
        required: true
        description: Invite link token
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetInviteLinkDetailsRequest'
      responses:
        '200':
          description: OK - Invite link details retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InviteLinkDetailsResponse'
        '404':
          description: Not Found - Invite link does not exist or is revoked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '410':
          description: Gone - Invite link has expired or max uses reached
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/invite-links/{inviteToken}/accept:
    post:
      summary: Accept a group invite link
      description: Joins the group using the invite link token. Enforces group size
        limit of 1024 members and invite constraints.
      operationId: acceptInviteLink
      tags:
      - Invites
      - Groups
      parameters:
      - name: inviteToken
        in: path
        required: true
        description: Invite link token
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AcceptInviteLinkRequest'
      responses:
        '201':
          description: Created - User joined the group or request created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AcceptInviteLinkResponse'
        '400':
          description: Bad Request - Invalid invite token or request payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User is blocked or cannot join this group
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - User is already a member or invite constraints violated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '410':
          description: Gone - Invite link has expired or max uses reached
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups/{groupId}/invite-links/{inviteId}:
    delete:
      summary: Revoke a group invite link
      description: Revokes an existing group invite link so it can no longer be used.
      operationId: revokeGroupInviteLink
      tags:
      - Groups
      - Invites
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      - name: inviteId
        in: path
        required: true
        description: Invite link ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RevokeGroupInviteLinkRequest'
      responses:
        '200':
          description: OK - Invite link revoked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RevokeGroupInviteLinkResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to revoke invite links for this group
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Invite link does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups/{groupId}/members/me:
    delete:
      summary: Leave group silently
      description: Removes the authenticated user from the specified group without
        sending any notification to remaining members.
      operationId: leaveGroupSilently
      tags:
      - Groups
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      - name: silent
        in: query
        required: false
        description: If true, no leave notification is sent to the group
        schema:
          type: boolean
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LeaveGroupRequest'
      responses:
        '200':
          description: OK - Member left the group successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LeaveGroupResponse'
        '400':
          description: Bad Request - Invalid group ID or parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Member is not allowed to leave this group
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group or membership not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Member already left the group
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/communities:
    post:
      summary: Create community
      description: Creates a new community that can contain multiple groups. Supports
        mobile-first clients and encrypted metadata storage references.
      operationId: createCommunity
      tags:
      - Communities
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCommunityRequest'
      responses:
        '201':
          description: Created - Community created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommunityResponse'
        '400':
          description: Bad Request - Missing or invalid community fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Community with same name already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List communities
      description: Returns a paginated list of communities accessible to the user.
      operationId: listCommunities
      tags:
      - Communities
      parameters:
      - name: page
        in: query
        required: true
        description: Page number (1-based)
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListCommunitiesRequest'
      responses:
        '200':
          description: OK - Communities retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedCommunityListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/communities/{communityId}:
    get:
      summary: Get community
      description: Fetches a community by ID, including metadata.
      operationId: getCommunity
      tags:
      - Communities
      parameters:
      - name: communityId
        in: path
        required: true
        description: Community ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetCommunityRequest'
      responses:
        '200':
          description: OK - Community retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommunityResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Community does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update community
      description: Updates community attributes such as name and description.
      operationId: updateCommunity
      tags:
      - Communities
      parameters:
      - name: communityId
        in: path
        required: true
        description: Community ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCommunityRequest'
      responses:
        '200':
          description: OK - Community updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommunityResponse'
        '400':
          description: Bad Request - Invalid fields for update
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Community does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete community
      description: Deletes a community and unlinks its groups. Data retention follows
        compliance rules.
      operationId: deleteCommunity
      tags:
      - Communities
      parameters:
      - name: communityId
        in: path
        required: true
        description: Community ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteCommunityRequest'
      responses:
        '200':
          description: OK - Community deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteCommunityResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Community does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Community cannot be deleted due to active dependencies
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/communities/{communityId}/groups:
    post:
      summary: Add group to community
      description: Adds an existing group to a community. Supports up to 1024 members
        per group.
      operationId: addGroupToCommunity
      tags:
      - Communities
      - Groups
      parameters:
      - name: communityId
        in: path
        required: true
        description: Community ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddGroupToCommunityRequest'
      responses:
        '201':
          description: Created - Group linked to community
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommunityGroupLinkResponse'
        '400':
          description: Bad Request - Missing or invalid groupId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Community or group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Group is already linked to the community
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List community groups
      description: Returns a paginated list of groups within a community.
      operationId: listCommunityGroups
      tags:
      - Communities
      - Groups
      parameters:
      - name: communityId
        in: path
        required: true
        description: Community ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number (1-based)
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListCommunityGroupsRequest'
      responses:
        '200':
          description: OK - Community groups retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedCommunityGroupListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Community does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/communities/{communityId}/groups/{groupId}:
    delete:
      summary: Remove group from community
      description: Unlinks a group from a community without deleting the group.
      operationId: removeGroupFromCommunity
      tags:
      - Communities
      - Groups
      parameters:
      - name: communityId
        in: path
        required: true
        description: Community ID
        schema:
          type: string
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveGroupFromCommunityRequest'
      responses:
        '200':
          description: OK - Group removed from community
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RemoveGroupFromCommunityResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Community or group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Group is not linked to the community
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/broadcast-channels:
    post:
      summary: Create a one-way broadcast channel
      description: Creates a one-way broadcast channel where only the owner can send
        messages. Enforces max recipients of 256.
      operationId: createBroadcastChannel
      tags:
      - BroadcastChannels
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBroadcastChannelRequest'
      responses:
        '201':
          description: Created - Broadcast channel created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BroadcastChannelResponse'
        '400':
          description: Bad Request - Invalid input or recipient limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Channel with same name already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List broadcast channels
      description: Returns a paginated list of broadcast channels the user owns or
        is subscribed to.
      operationId: listBroadcastChannels
      tags:
      - BroadcastChannels
      parameters:
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Page size
        schema:
          type: integer
      responses:
        '200':
          description: OK - Broadcast channels returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBroadcastChannelListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/broadcast-channels/{channelId}:
    get:
      summary: Get a broadcast channel
      description: Returns details for a specific broadcast channel.
      operationId: getBroadcastChannel
      tags:
      - BroadcastChannels
      parameters:
      - name: channelId
        in: path
        required: true
        description: Broadcast channel ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Broadcast channel returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BroadcastChannelResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Broadcast channel does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update a broadcast channel
      description: Updates channel metadata (e.g., name, avatar).
      operationId: updateBroadcastChannel
      tags:
      - BroadcastChannels
      parameters:
      - name: channelId
        in: path
        required: true
        description: Broadcast channel ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateBroadcastChannelRequest'
      responses:
        '200':
          description: OK - Broadcast channel updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BroadcastChannelResponse'
        '400':
          description: Bad Request - Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Broadcast channel does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete a broadcast channel
      description: Deletes a broadcast channel and its configuration. Messages remain
        governed by retention policies.
      operationId: deleteBroadcastChannel
      tags:
      - BroadcastChannels
      parameters:
      - name: channelId
        in: path
        required: true
        description: Broadcast channel ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Broadcast channel deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteBroadcastChannelResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Broadcast channel does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/broadcast-channels/{channelId}/recipients:
    post:
      summary: Add recipients to a broadcast channel
      description: Adds recipients to a broadcast channel. Enforces max recipients
        of 256.
      operationId: addBroadcastRecipients
      tags:
      - BroadcastChannels
      parameters:
      - name: channelId
        in: path
        required: true
        description: Broadcast channel ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddBroadcastRecipientsRequest'
      responses:
        '200':
          description: OK - Recipients added
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BroadcastRecipientsResponse'
        '400':
          description: Bad Request - Recipient limit exceeded or invalid IDs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Broadcast channel does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Remove recipients from a broadcast channel
      description: Removes recipients from a broadcast channel.
      operationId: removeBroadcastRecipients
      tags:
      - BroadcastChannels
      parameters:
      - name: channelId
        in: path
        required: true
        description: Broadcast channel ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveBroadcastRecipientsRequest'
      responses:
        '200':
          description: OK - Recipients removed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BroadcastRecipientsResponse'
        '400':
          description: Bad Request - Invalid IDs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Broadcast channel does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/broadcast-channels/{channelId}/messages:
    post:
      summary: Send a broadcast message
      description: Sends an E2E encrypted one-way message from the owner to all recipients.
        Supports offline queueing and WebSocket delivery.
      operationId: sendBroadcastMessage
      tags:
      - BroadcastMessages
      parameters:
      - name: channelId
        in: path
        required: true
        description: Broadcast channel ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendBroadcastMessageRequest'
      responses:
        '201':
          description: Created - Broadcast message accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BroadcastMessageResponse'
        '400':
          description: Bad Request - Invalid encrypted payload or media metadata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Only owner can send messages
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Broadcast channel does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List broadcast messages
      description: Returns a paginated list of broadcast messages for the channel.
        Only owner and recipients can read.
      operationId: listBroadcastMessages
      tags:
      - BroadcastMessages
      parameters:
      - name: channelId
        in: path
        required: true
        description: Broadcast channel ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Page size
        schema:
          type: integer
      responses:
        '200':
          description: OK - Broadcast messages returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBroadcastMessageListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not a channel participant
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Broadcast channel does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/{chatId}/polls:
    post:
      summary: Create a poll in a chat
      description: Creates a new poll in a group or direct chat. Poll content is expected
        to be encrypted client-side (E2E).
      operationId: createChatPoll
      tags:
      - Polls
      - Chats
      parameters:
      - name: chatId
        in: path
        required: true
        description: Chat ID (group or direct chat)
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePollRequest'
      responses:
        '201':
          description: Created - Poll successfully created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PollResponse'
        '400':
          description: Bad Request - Invalid poll payload or missing fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not a participant of the chat
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Chat does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List polls in a chat
      description: Retrieves a paginated list of polls for a chat. Poll content is
        returned as encrypted payloads.
      operationId: listChatPolls
      tags:
      - Polls
      - Chats
      parameters:
      - name: chatId
        in: path
        required: true
        description: Chat ID (group or direct chat)
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Page size
        schema:
          type: integer
      responses:
        '200':
          description: OK - Poll list retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedPollListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not a participant of the chat
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Chat does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/{chatId}/polls/{pollId}:
    get:
      summary: Get poll details
      description: Retrieves a specific poll with encrypted content and current tally
        metadata.
      operationId: getChatPoll
      tags:
      - Polls
      - Chats
      parameters:
      - name: chatId
        in: path
        required: true
        description: Chat ID (group or direct chat)
        schema:
          type: string
      - name: pollId
        in: path
        required: true
        description: Poll ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Poll details retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PollDetailResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not a participant of the chat
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Poll or chat does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/{chatId}/polls/{pollId}/votes:
    post:
      summary: Cast or update a vote
      description: Submits a user's vote for a poll in a chat. Vote content is encrypted
        client-side.
      operationId: submitPollVote
      tags:
      - Polls
      - Chats
      parameters:
      - name: chatId
        in: path
        required: true
        description: Chat ID (group or direct chat)
        schema:
          type: string
      - name: pollId
        in: path
        required: true
        description: Poll ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubmitVoteRequest'
      responses:
        '201':
          description: Created - Vote successfully submitted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubmitVoteResponse'
        '400':
          description: Bad Request - Invalid vote payload or selection
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not a participant of the chat or poll is closed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Poll or chat does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Vote not allowed due to poll rules
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/{chatId}/polls/{pollId}/close:
    post:
      summary: Close a poll
      description: Closes an active poll in a chat. Only poll creator or authorized
        admins may close.
      operationId: closeChatPoll
      tags:
      - Polls
      - Chats
      parameters:
      - name: chatId
        in: path
        required: true
        description: Chat ID (group or direct chat)
        schema:
          type: string
      - name: pollId
        in: path
        required: true
        description: Poll ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClosePollRequest'
      responses:
        '200':
          description: OK - Poll successfully closed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClosePollResponse'
        '400':
          description: Bad Request - Poll already closed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to close poll
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Poll or chat does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups/{groupId}/events:
    post:
      summary: Create a group event
      description: Create a new event within a group for event planning.
      operationId: createGroupEvent
      tags:
      - GroupEvents
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGroupEventRequest'
      responses:
        '201':
          description: Created - Event created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupEventResponse'
        '400':
          description: Bad Request - Invalid event payload or time range
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User lacks permission to create events in group
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate event detected
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List group events
      description: Retrieve a paginated list of events for a group.
      operationId: listGroupEvents
      tags:
      - GroupEvents
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      - name: from
        in: query
        required: false
        description: Filter events starting from ISO-8601 date-time
        schema:
          type: string
      - name: to
        in: query
        required: false
        description: Filter events up to ISO-8601 date-time
        schema:
          type: string
      responses:
        '200':
          description: OK - Events retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedGroupEventListResponse'
        '400':
          description: Bad Request - Invalid pagination or filter parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User lacks permission to view group events
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups/{groupId}/events/{eventId}:
    get:
      summary: Get group event details
      description: Retrieve details for a specific group event.
      operationId: getGroupEvent
      tags:
      - GroupEvents
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      - name: eventId
        in: path
        required: true
        description: Event ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Event retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupEventResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User lacks permission to view event
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Event or group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update a group event
      description: Update event details within a group.
      operationId: updateGroupEvent
      tags:
      - GroupEvents
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      - name: eventId
        in: path
        required: true
        description: Event ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateGroupEventRequest'
      responses:
        '200':
          description: OK - Event updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupEventResponse'
        '400':
          description: Bad Request - Invalid event payload or time range
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User lacks permission to update event
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Event or group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Event update conflicts with existing schedule
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete a group event
      description: Delete an event from a group.
      operationId: deleteGroupEvent
      tags:
      - GroupEvents
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      - name: eventId
        in: path
        required: true
        description: Event ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Event deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteGroupEventResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User lacks permission to delete event
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Event or group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups/{groupId}/events/{eventId}/rsvps:
    post:
      summary: RSVP to a group event
      description: Create or update the current user's RSVP status for a group event.
      operationId: rsvpGroupEvent
      tags:
      - GroupEvents
      - RSVPs
      parameters:
      - name: groupId
        in: path
        required: true
        description: Group ID
        schema:
          type: string
      - name: eventId
        in: path
        required: true
        description: Event ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RsvpGroupEventRequest'
      responses:
        '201':
          description: Created - RSVP recorded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RsvpGroupEventResponse'
        '400':
          description: Bad Request - Invalid RSVP status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User lacks permission to RSVP
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Event or group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Event is at participant capacity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/calls:
    post:
      summary: Create a new video call session
      description: Creates an end-to-end encrypted WebRTC video call session and returns
        signaling metadata and ICE server configuration for mobile clients.
      operationId: createCall
      tags:
      - Calls
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCallRequest'
      responses:
        '201':
          description: Created - Call session created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CallResponse'
        '400':
          description: Bad Request - Invalid call type or participants exceed limits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Call already exists or duplicate creation request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List video call sessions
      description: Returns a paginated list of video call sessions for the authenticated
        user.
      operationId: listCalls
      tags:
      - Calls
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListCallsRequest'
      responses:
        '200':
          description: OK - Call sessions retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedCallListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/calls/{callId}:
    get:
      summary: Get call details
      description: Retrieves details of a specific call session including participants
        and status.
      operationId: getCall
      tags:
      - Calls
      parameters:
      - name: callId
        in: path
        required: true
        description: Call ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetCallRequest'
      responses:
        '200':
          description: OK - Call details returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CallDetailResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/calls/{callId}/participants:
    post:
      summary: Add participant to call
      description: Adds a participant to an existing group call. Enforces max group
        size of 1024.
      operationId: addCallParticipant
      tags:
      - Calls
      parameters:
      - name: callId
        in: path
        required: true
        description: Call ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddParticipantRequest'
      responses:
        '201':
          description: Created - Participant added
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddParticipantResponse'
        '400':
          description: Bad Request - Group participant limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/calls/{callId}/participants/{participantId}:
    delete:
      summary: Remove participant from call
      description: Removes a participant from an existing call.
      operationId: removeCallParticipant
      tags:
      - Calls
      parameters:
      - name: callId
        in: path
        required: true
        description: Call ID
        schema:
          type: string
      - name: participantId
        in: path
        required: true
        description: Participant ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveParticipantRequest'
      responses:
        '200':
          description: OK - Participant removed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RemoveParticipantResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call or participant does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/calls/{callId}/end:
    post:
      summary: End call session
      description: Ends an active call session and notifies participants via WebSocket.
      operationId: endCall
      tags:
      - Calls
      parameters:
      - name: callId
        in: path
        required: true
        description: Call ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EndCallRequest'
      responses:
        '201':
          description: Created - Call ended and state recorded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EndCallResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Call already ended
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/calls/{callId}/signaling/messages:
    post:
      summary: Post WebRTC signaling message
      description: Posts encrypted WebRTC signaling messages (offer/answer/ICE) to
        support offline queueing and delivery via WebSocket.
      operationId: postSignalingMessage
      tags:
      - Calls
      - Signaling
      parameters:
      - name: callId
        in: path
        required: true
        description: Call ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignalingMessageRequest'
      responses:
        '201':
          description: Created - Signaling message stored
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SignalingMessageResponse'
        '400':
          description: Bad Request - Unsupported signaling type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: Fetch queued signaling messages
      description: Fetches queued encrypted signaling messages for offline clients.
      operationId: listSignalingMessages
      tags:
      - Calls
      - Signaling
      parameters:
      - name: callId
        in: path
        required: true
        description: Call ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListSignalingMessagesRequest'
      responses:
        '200':
          description: OK - Queued signaling messages returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedSignalingMessageListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/calls/{id}/join:
    post:
      summary: Join a video call session
      description: Joins an existing video call session and returns WebRTC signaling
        details for the participant.
      operationId: joinCall
      tags:
      - Calls
      parameters:
      - name: id
        in: path
        required: true
        description: Call ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JoinCallRequest'
      responses:
        '201':
          description: Created - Joined the call successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JoinCallResponse'
        '400':
          description: Bad Request - Invalid call ID or encryption parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Call already ended or participant limit reached
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/calls/{id}:
    get:
      summary: Get video call session details
      description: Retrieves details for a specific video call session.
      operationId: getCall
      tags:
      - Calls
      parameters:
      - name: id
        in: path
        required: true
        description: Call ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetCallRequest'
      responses:
        '200':
          description: OK - Call details retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetCallResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/calls/{id}/end:
    post:
      summary: End a video call session
      description: Ends an active video call session and notifies participants via
        WebSocket signaling.
      operationId: endCall
      tags:
      - Calls
      parameters:
      - name: id
        in: path
        required: true
        description: Call ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EndCallRequest'
      responses:
        '201':
          description: Created - Call ended successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EndCallResponse'
        '400':
          description: Bad Request - Invalid call state or reason
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/group-calls:
    post:
      summary: Create a group call
      description: Creates a new group voice/video call and returns WebRTC negotiation
        data and TURN/STUN servers for real-time media setup.
      operationId: createGroupCall
      tags:
      - GroupCalls
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGroupCallRequest'
      responses:
        '201':
          description: Created - Group call created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateGroupCallResponse'
        '400':
          description: Bad Request - Missing or invalid parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate call creation request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Exceeds maximum request size
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Participant limit exceeded (max 1024)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to create group call
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/group-calls/{callId}:
    get:
      summary: Get group call details
      description: Retrieves metadata and current status of a group call.
      operationId: getGroupCall
      tags:
      - GroupCalls
      parameters:
      - name: callId
        in: path
        required: true
        description: Group call ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetGroupCallRequest'
      responses:
        '200':
          description: OK - Group call details retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetGroupCallResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group call does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve group call
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: End a group call
      description: Terminates the group call and notifies participants through real-time
        channels.
      operationId: endGroupCall
      tags:
      - GroupCalls
      parameters:
      - name: callId
        in: path
        required: true
        description: Group call ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EndGroupCallRequest'
      responses:
        '200':
          description: OK - Group call ended
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EndGroupCallResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group call does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to end group call
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/group-calls/{callId}/participants:
    post:
      summary: Invite participants to a group call
      description: Adds participants to an existing group call and triggers invitations
        via real-time channels.
      operationId: addGroupCallParticipants
      tags:
      - GroupCalls
      - Participants
      parameters:
      - name: callId
        in: path
        required: true
        description: Group call ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddGroupCallParticipantsRequest'
      responses:
        '201':
          description: Created - Participants invited successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddGroupCallParticipantsResponse'
        '400':
          description: Bad Request - Invalid participant list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group call does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Participant limit exceeded (max 1024)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to invite participants
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List group call participants
      description: Retrieves a paginated list of participants in a group call.
      operationId: listGroupCallParticipants
      tags:
      - GroupCalls
      - Participants
      parameters:
      - name: callId
        in: path
        required: true
        description: Group call ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListGroupCallParticipantsRequest'
      responses:
        '200':
          description: OK - Participants retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedListGroupCallParticipantsResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group call does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to list participants
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/group-calls/{callId}/join:
    post:
      summary: Join a group call
      description: Creates a participant session and returns WebRTC negotiation data
        for joining the call.
      operationId: joinGroupCall
      tags:
      - GroupCalls
      parameters:
      - name: callId
        in: path
        required: true
        description: Group call ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JoinGroupCallRequest'
      responses:
        '201':
          description: Created - Participant joined the group call
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JoinGroupCallResponse'
        '400':
          description: Bad Request - Invalid SDP or parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group call does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Participant already joined
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Participant limit exceeded (max 1024)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to join group call
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/group-calls/{callId}/participants/{participantId}:
    delete:
      summary: Leave or remove a participant from a group call
      description: Removes a participant from the group call and releases associated
        resources.
      operationId: removeGroupCallParticipant
      tags:
      - GroupCalls
      - Participants
      parameters:
      - name: callId
        in: path
        required: true
        description: Group call ID
        schema:
          type: string
      - name: participantId
        in: path
        required: true
        description: Participant ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveGroupCallParticipantRequest'
      responses:
        '200':
          description: OK - Participant removed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RemoveGroupCallParticipantResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call or participant does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to remove participant
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/calls/{callId}/screen-shares:
    post:
      summary: Start screen sharing in a call
      description: Creates a screen sharing session for an ongoing WebRTC call and
        returns signaling metadata needed by clients. Screen content is transmitted
        via WebRTC; this endpoint only manages session metadata.
      operationId: createScreenShare
      tags:
      - ScreenShares
      - Calls
      parameters:
      - name: callId
        in: path
        required: true
        description: Call ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateScreenShareRequest'
      responses:
        '201':
          description: Created - Screen share session started
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScreenShareResponse'
        '400':
          description: Bad Request - Missing or invalid SDP offer or encryption context
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User not allowed to share screen in this call
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call does not exist or is not active
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Screen sharing already active for this publisher
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List screen sharing sessions in a call
      description: Returns active and recent screen sharing sessions for an ongoing
        call.
      operationId: listScreenShares
      tags:
      - ScreenShares
      - Calls
      parameters:
      - name: callId
        in: path
        required: true
        description: Call ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Page size for pagination
        schema:
          type: integer
      responses:
        '200':
          description: OK - Screen share sessions retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedScreenShareListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/calls/{callId}/screen-shares/{screenShareId}:
    delete:
      summary: Stop screen sharing in a call
      description: Ends an active screen sharing session in a call.
      operationId: deleteScreenShare
      tags:
      - ScreenShares
      - Calls
      parameters:
      - name: callId
        in: path
        required: true
        description: Call ID
        schema:
          type: string
      - name: screenShareId
        in: path
        required: true
        description: Screen share session ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EndScreenShareRequest'
      responses:
        '200':
          description: OK - Screen share session ended
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EndScreenShareResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User not allowed to end this screen share
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Screen share session does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Screen share session already ended
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/call-links:
    post:
      summary: Create a scheduled call link
      description: Creates a WebRTC call link for a planned call, including schedule,
        access rules, and end-to-end encryption metadata.
      operationId: createCallLink
      tags:
      - CallLinks
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCallLinkRequest'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CallLinkResponse'
        '400':
          description: Bad Request - Invalid schedule, maxParticipants exceeds limit,
            or missing required fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Overlapping scheduled call or duplicate link for
            same time window
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List scheduled call links
      description: Retrieves a paginated list of scheduled call links accessible by
        the user.
      operationId: listCallLinks
      tags:
      - CallLinks
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      - name: status
        in: query
        required: false
        description: Filter by status (scheduled, active, ended, canceled)
        schema:
          type: string
      - name: hostUserId
        in: query
        required: false
        description: Filter by host user ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListCallLinksRequest'
      responses:
        '200':
          description: OK - Call links retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedCallLinksListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/call-links/{callLinkId}:
    get:
      summary: Get scheduled call link details
      description: Returns details for a specific scheduled call link including access
        rules and encryption metadata.
      operationId: getCallLink
      tags:
      - CallLinks
      parameters:
      - name: callLinkId
        in: path
        required: true
        description: Call link ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetCallLinkRequest'
      responses:
        '200':
          description: OK - Call link details retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CallLinkDetailsResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User not allowed to access this call link
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call link does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update a scheduled call link
      description: Updates schedule or access rules for a planned call link prior
        to start time.
      operationId: updateCallLink
      tags:
      - CallLinks
      parameters:
      - name: callLinkId
        in: path
        required: true
        description: Call link ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCallLinkRequest'
      responses:
        '200':
          description: OK - Call link updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CallLinkUpdateResponse'
        '400':
          description: Bad Request - Invalid schedule or maxParticipants exceeds limit
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Only host can update the call link
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Call already started or ended
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete a scheduled call link
      description: Cancels and deletes a scheduled call link before it starts.
      operationId: deleteCallLink
      tags:
      - CallLinks
      parameters:
      - name: callLinkId
        in: path
        required: true
        description: Call link ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteCallLinkRequest'
      responses:
        '200':
          description: OK - Call link deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteCallLinkResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Only host can delete the call link
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call link does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Call already started or ended
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/calls/{callId}/reject:
    post:
      summary: Reject an incoming call with a message
      description: Rejects a WebRTC call and optionally sends an encrypted quick-reply
        message to the caller. Designed for fast response and offline queuing.
      operationId: rejectCallWithMessage
      tags:
      - Calls
      parameters:
      - name: callId
        in: path
        required: true
        description: Unique call identifier
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RejectCallRequest'
      responses:
        '201':
          description: Created - Call rejected and message queued
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RejectCallResponse'
        '400':
          description: Bad Request - Missing or invalid rejection reason or payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid authentication token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call ID does not exist or is no longer active
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Call already ended or rejection already processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to process rejection
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/call-logs:
    get:
      summary: List call history
      description: Retrieves a paginated list of call log entries for the authenticated
        user. Supports offline sync by allowing clients to request pages.
      operationId: listCallLogs
      tags:
      - CallLogs
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      - name: from
        in: query
        required: false
        description: ISO-8601 start timestamp to filter call logs
        schema:
          type: string
      - name: to
        in: query
        required: false
        description: ISO-8601 end timestamp to filter call logs
        schema:
          type: string
      responses:
        '200':
          description: OK - Call logs retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedCallLogListResponse'
        '400':
          description: Bad Request - Invalid pagination or filter parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to retrieve call logs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    post:
      summary: Create call log entry
      description: Creates a call log entry after a WebRTC call. Metadata is encrypted
        end-to-end using the Signal Protocol.
      operationId: createCallLog
      tags:
      - CallLogs
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCallLogRequest'
      responses:
        '201':
          description: Created - Call log entry created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateCallLogResponse'
        '400':
          description: Bad Request - Missing or invalid fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate WebRTC session ID
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to create call log
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/call-logs/{callLogId}:
    get:
      summary: Get call log detail
      description: Retrieves detailed information for a specific call log entry.
      operationId: getCallLog
      tags:
      - CallLogs
      parameters:
      - name: callLogId
        in: path
        required: true
        description: Call log ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Call log retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CallLogResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call log does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to retrieve call log
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete call log entry
      description: Deletes a specific call log entry for the authenticated user.
      operationId: deleteCallLog
      tags:
      - CallLogs
      parameters:
      - name: callLogId
        in: path
        required: true
        description: Call log ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Call log deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteCallLogResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Call log does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to delete call log
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/statuses:
    post:
      summary: Create a 24-hour status update
      description: Creates a new end-to-end encrypted status update that expires after
        24 hours. Supports text and/or media metadata; media is referenced via pre-uploaded
        mediaId. The server enforces maximum media size limits and expiration time.
      operationId: createStatus
      tags:
      - Statuses
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateStatusRequest'
      responses:
        '201':
          description: Created - Status successfully created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusResponse'
        '400':
          description: Bad Request - Invalid payload, missing required fields, or
            expiresInSeconds exceeds 86400
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Media exceeds size limits (16MB images,
            2GB documents)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Invalid encrypted payload format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to create status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/contacts/{contactId}/status:
    get:
      summary: Get contact status
      description: Retrieves the current status of a specific contact, including text
        and media references. Status entries are valid for a maximum of 24 hours.
      operationId: getContactStatus
      tags:
      - Status
      parameters:
      - name: contactId
        in: path
        required: true
        description: Contact ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Contact status retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContactStatusResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Contact or status not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '410':
          description: Gone - Status has expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to retrieve status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/contacts/statuses:
    get:
      summary: List contact statuses
      description: Retrieves a paginated list of statuses for all contacts available
        to the user. Only non-expired statuses (max 24 hours) are returned.
      operationId: listContactStatuses
      tags:
      - Status
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      responses:
        '200':
          description: OK - Contact statuses retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedContactStatusListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to retrieve statuses
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/statuses/{statusId}/replies:
    post:
      summary: Create a reply to a status
      description: Creates an end-to-end encrypted reply to a specific status. The
        reply is queued for offline delivery and can include optional media within
        size limits.
      operationId: createStatusReply
      tags:
      - StatusReplies
      parameters:
      - name: statusId
        in: path
        required: true
        description: ID of the status being replied to
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateStatusReplyRequest'
      responses:
        '201':
          description: Created - Reply accepted for delivery
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusReplyResponse'
        '400':
          description: Bad Request - Missing or invalid ciphertext or media metadata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Status does not exist or expired (24h limit)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Media size exceeds limits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Media type not supported
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List replies to a status
      description: Returns a paginated list of encrypted replies for a specific status.
      operationId: listStatusReplies
      tags:
      - StatusReplies
      parameters:
      - name: statusId
        in: path
        required: true
        description: ID of the status
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      responses:
        '200':
          description: OK - Replies retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedStatusReplyListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Status does not exist or expired (24h limit)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/statuses/{statusId}/replies/{replyId}:
    delete:
      summary: Delete a reply to a status
      description: Deletes a reply authored by the requesting user.
      operationId: deleteStatusReply
      tags:
      - StatusReplies
      parameters:
      - name: statusId
        in: path
        required: true
        description: ID of the status
        schema:
          type: string
      - name: replyId
        in: path
        required: true
        description: ID of the reply
        schema:
          type: string
      responses:
        '200':
          description: OK - Reply deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteStatusReplyResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to delete this reply
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Reply does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/status-visibility-settings:
    get:
      summary: Get status visibility settings
      description: Retrieves the current user's configurable status visibility settings
        used to control who can view status updates.
      operationId: getStatusVisibilitySettings
      tags:
      - StatusVisibility
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetStatusVisibilitySettingsRequest'
      responses:
        '200':
          description: OK - Settings retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusVisibilitySettingsResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Access to settings denied
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or settings not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update status visibility settings
      description: Updates the user's configurable status visibility settings to control
        who can view status updates.
      operationId: updateStatusVisibilitySettings
      tags:
      - StatusVisibility
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateStatusVisibilitySettingsRequest'
      responses:
        '200':
          description: OK - Settings updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusVisibilitySettingsResponse'
        '400':
          description: Bad Request - Invalid visibility mode or contact list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Access to settings denied
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Visibility settings update conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/status-mutes:
    post:
      summary: Mute a contact's status
      description: Creates a mute setting to silence a specific contact's status updates
        for the requesting user.
      operationId: createStatusMute
      tags:
      - StatusMutes
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateStatusMuteRequest'
      responses:
        '201':
          description: Created - Status mute successfully created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusMuteResponse'
        '400':
          description: Bad Request - Missing or invalid contactId or muteUntil
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Contact does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Status mute already exists for this contact
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List muted status contacts
      description: Returns a paginated list of status mutes for the requesting user.
      operationId: listStatusMutes
      tags:
      - StatusMutes
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListStatusMutesRequest'
      responses:
        '200':
          description: OK - Status mutes retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedStatusMuteListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/status-mutes/{contactId}:
    delete:
      summary: Unmute a contact's status
      description: Deletes the mute setting for a specific contact's status.
      operationId: deleteStatusMute
      tags:
      - StatusMutes
      parameters:
      - name: contactId
        in: path
        required: true
        description: ID of the contact to unmute
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteStatusMuteRequest'
      responses:
        '200':
          description: OK - Status mute deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteStatusMuteResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Status mute does not exist for this contact
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/media/images:
    post:
      summary: Upload an image
      description: Uploads an image payload for later use in messages. Enforces 16MB
        max size for images. Supports end-to-end encrypted payloads (Signal Protocol)
        by allowing encrypted binary and metadata.
      operationId: uploadImage
      tags:
      - Media
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UploadImageRequest'
      responses:
        '201':
          description: Created - Image uploaded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadImageResponse'
        '400':
          description: Bad Request - Invalid multipart payload or missing fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Image exceeds 16MB limit
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '415':
          description: Unsupported Media Type - Invalid image MIME type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to store image
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/media/videos:
    post:
      summary: Upload video media
      description: Uploads an encrypted video file for later sending in a message.
        Supports offline queue by returning a mediaId that can be referenced when
        the device is back online. Max video size should be enforced according to
        server policy.
      operationId: uploadVideo
      tags:
      - Media
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UploadVideoRequest'
      responses:
        '201':
          description: Created - Video uploaded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadVideoResponse'
        '400':
          description: Bad Request - Missing file or invalid encryption metadata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Video exceeds allowed size limit
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '415':
          description: Unsupported Media Type - Video MIME type not supported
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to store media
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages/documents:
    post:
      summary: Send a document message
      description: Sends an arbitrary document to a user, group, or broadcast list
        with end-to-end encrypted metadata. Supports offline queuing and real-time
        delivery via WebSocket. Maximum document size is 2GB.
      operationId: sendDocumentMessage
      tags:
      - Messages
      - Documents
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SendDocumentMessageRequest'
      responses:
        '201':
          description: Created - Document message accepted for delivery
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SendDocumentMessageResponse'
        '400':
          description: Bad Request - Missing or invalid fields, or file exceeds 2GB
            limit
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Recipient type or permissions not allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Document exceeds maximum size of 2GB
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Encryption metadata invalid or inconsistent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected failure while processing
            the document
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/media-drafts:
    post:
      summary: Create an image draft for editing
      description: Uploads an image as a draft to enable basic edits (crop, rotate,
        filters) before sending. Max image size is 16MB.
      operationId: createMediaDraft
      tags:
      - MediaDrafts
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateMediaDraftRequest'
      responses:
        '201':
          description: Created - Draft uploaded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MediaDraftResponse'
        '400':
          description: Bad Request - Missing file or invalid multipart form data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Image exceeds 16MB limit
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '415':
          description: Unsupported Media Type - File is not a supported image format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/media-drafts/{draftId}/edits:
    put:
      summary: Apply edits to an image draft
      description: Applies basic image edits such as crop, rotate, and filters to
        a draft. Edits are stored as a transformation pipeline before finalization.
      operationId: updateMediaDraftEdits
      tags:
      - MediaDrafts
      parameters:
      - name: draftId
        in: path
        required: true
        description: Draft ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMediaDraftEditsRequest'
      responses:
        '200':
          description: OK - Edits applied successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MediaDraftEditsResponse'
        '400':
          description: Bad Request - Invalid edit parameters or ranges
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Draft ID does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Edit operations are incompatible
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/media-drafts/{draftId}/finalize:
    post:
      summary: Finalize an edited image draft
      description: Renders the edited draft into a finalized media asset ready for
        sending with end-to-end encryption applied on the client side.
      operationId: finalizeMediaDraft
      tags:
      - MediaDrafts
      parameters:
      - name: draftId
        in: path
        required: true
        description: Draft ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FinalizeMediaDraftRequest'
      responses:
        '201':
          description: Created - Draft finalized successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FinalizeMediaDraftResponse'
        '400':
          description: Bad Request - Invalid finalize request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Draft ID does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Draft already finalized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to render edited image
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/sticker-packs:
    get:
      summary: List regional sticker packs
      description: Returns a paginated list of sticker packs available for a specific
        region or locale, enabling clients to surface region-specific sticker packs.
      operationId: listStickerPacks
      tags:
      - StickerPacks
      parameters:
      - name: regionCode
        in: query
        required: true
        description: Region or locale code (e.g., DE, AT, CH) used to filter region-specific
          sticker packs
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      responses:
        '200':
          description: OK - Sticker packs retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedStickerPackListResponse'
        '400':
          description: Bad Request - Invalid pagination or regionCode format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - No sticker packs available for the specified region
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected error while retrieving sticker
            packs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/sticker-packs/{packId}/stickers:
    get:
      summary: List stickers in a pack
      description: Retrieve stickers within a specific sticker pack with pagination.
      operationId: listStickersInPack
      tags:
      - Stickers
      parameters:
      - name: packId
        in: path
        required: true
        description: Sticker pack ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      responses:
        '200':
          description: OK - Stickers retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedStickerListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Sticker pack does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve stickers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/gifs/search:
    get:
      summary: Search GIFs
      description: Search for GIFs using a query string. Supports pagination for mobile-first
        clients.
      operationId: searchGifs
      tags:
      - Gifs
      parameters:
      - name: q
        in: query
        required: true
        description: Search query for GIFs
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      - name: locale
        in: query
        required: false
        description: Locale for localized GIF search results
        schema:
          type: string
      - name: rating
        in: query
        required: false
        description: Content rating filter (e.g., g, pg, pg-13)
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchGifsRequest'
      responses:
        '200':
          description: OK - GIF search results returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedGifSearchResponse'
        '400':
          description: Bad Request - Missing or invalid query parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Rate limit exceeded for GIF search
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - GIF search failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages/gifs:
    post:
      summary: Send GIF message
      description: Send a GIF message to a user, group, or broadcast list. Payload
        is end-to-end encrypted using Signal Protocol; clients send encrypted content
        and metadata.
      operationId: sendGifMessage
      tags:
      - Messages
      - Gifs
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendGifMessageRequest'
      responses:
        '201':
          description: Created - GIF message accepted for delivery
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SendGifMessageResponse'
        '400':
          description: Bad Request - Missing or invalid recipient or GIF data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Recipient not allowed or group limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate clientMessageId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - GIF exceeds size limit
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to send GIF message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/{chatId}/media:
    post:
      summary: Upload camera-captured media to a chat
      description: Uploads an image or video captured directly from the device camera
        for use in a chat message. Enforces size limits (16MB images, 2GB documents/videos)
        and supports end-to-end encryption metadata.
      operationId: uploadChatMedia
      tags:
      - ChatMedia
      parameters:
      - name: chatId
        in: path
        required: true
        description: Chat ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UploadChatMediaRequest'
      responses:
        '201':
          description: Created - Media uploaded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatMediaResponse'
        '400':
          description: Bad Request - Invalid media type or missing required fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Media exceeds allowed size limits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '415':
          description: Unsupported Media Type - MIME type not allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Upload rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Media storage failure
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/{chatId}/media/{mediaId}:
    get:
      summary: Get downloadable media details
      description: Returns a time-limited download URL and metadata for previously
        uploaded chat media. Used to render media in chat.
      operationId: getChatMedia
      tags:
      - ChatMedia
      parameters:
      - name: chatId
        in: path
        required: true
        description: Chat ID
        schema:
          type: string
      - name: mediaId
        in: path
        required: true
        description: Media ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetChatMediaRequest'
      responses:
        '200':
          description: OK - Media details retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetChatMediaResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Media not found in chat
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '410':
          description: Gone - Media no longer available
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to generate download URL
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/audio-messages:
    post:
      summary: Send an encrypted audio message
      description: Uploads an audio file and creates an audio message in a direct
        chat, group, or broadcast list with end-to-end encrypted payload metadata.
        The audio file is uploaded as multipart/form-data and stored for delivery
        over WebSocket and offline queue.
      operationId: createAudioMessage
      tags:
      - AudioMessages
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateAudioMessageRequest'
      responses:
        '201':
          description: Created - Audio message accepted and queued for delivery
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AudioMessageResponse'
        '400':
          description: Bad Request - Missing required fields or invalid audio metadata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Audio file exceeds the allowed size limit
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Unsupported audio MIME type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate clientMessageId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/audio-messages/{audioMessageId}/download:
    get:
      summary: Download an audio message file
      description: Retrieves the encrypted audio file for a given audio message. Access
        is restricted to participants of the thread and used for offline sync.
      operationId: downloadAudioMessage
      tags:
      - AudioMessages
      parameters:
      - name: audioMessageId
        in: path
        required: true
        description: ID of the audio message to download
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DownloadAudioMessageRequest'
      responses:
        '200':
          description: OK - Download URL generated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AudioMessageDownloadResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User is not a participant of the thread
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Audio message does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '410':
          description: Gone - Audio message has expired or been deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/media/library:
    get:
      summary: List user gallery items
      description: Returns a paginated list of media items the user has granted access
        to from the device gallery for selection and sharing. Metadata only; actual
        file is retrieved or uploaded via dedicated endpoints. Enforces max media
        sizes (16MB images, 2GB documents).
      operationId: listGalleryItems
      tags:
      - Media
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      - name: type
        in: query
        required: false
        description: Filter by media type (image, video, document)
        schema:
          type: string
      responses:
        '200':
          description: OK - Gallery items returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedGalleryItemListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Gallery access not granted by user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve gallery items
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/media/uploads:
    post:
      summary: Initialize an HD media upload session
      description: Creates an upload session for HD media with size and type validation
        for encrypted media transfer. Supports large files via multipart/chunked upload.
      operationId: createMediaUploadSession
      tags:
      - Media
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMediaUploadSessionRequest'
      responses:
        '201':
          description: Created - Upload session initialized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateMediaUploadSessionResponse'
        '400':
          description: Bad Request - Media type or size violates limits (e.g., 16MB
            images, 2GB documents)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - File size exceeds maximum allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '415':
          description: Unsupported Media Type - MIME type is not allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/media/uploads/{uploadId}/parts/{partNumber}:
    put:
      summary: Upload a media chunk
      description: Uploads a single encrypted chunk for an HD media upload session.
      operationId: uploadMediaPart
      tags:
      - Media
      parameters:
      - name: uploadId
        in: path
        required: true
        description: Upload session identifier
        schema:
          type: string
      - name: partNumber
        in: path
        required: true
        description: Chunk sequence number starting at 1
        schema:
          type: integer
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UploadMediaPartRequest'
      responses:
        '200':
          description: OK - Chunk uploaded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadMediaPartResponse'
        '400':
          description: Bad Request - Invalid part number or chunk size
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Upload session does not exist or is expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Chunk already uploaded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/media/uploads/{uploadId}/complete:
    post:
      summary: Complete an HD media upload
      description: Finalizes the multipart upload and creates the media resource for
        sending in messages.
      operationId: completeMediaUpload
      tags:
      - Media
      parameters:
      - name: uploadId
        in: path
        required: true
        description: Upload session identifier
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompleteMediaUploadRequest'
      responses:
        '201':
          description: Created - Media resource finalized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompleteMediaUploadResponse'
        '400':
          description: Bad Request - Missing or invalid part list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Upload session does not exist or is expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Upload already completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages/media:
    post:
      summary: Send an HD media message
      description: Sends a message referencing an HD media resource with end-to-end
        encryption metadata. Supports direct, group, and broadcast recipients within
        limits.
      operationId: sendMediaMessage
      tags:
      - Messages
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendMediaMessageRequest'
      responses:
        '201':
          description: Created - Media message sent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SendMediaMessageResponse'
        '400':
          description: Bad Request - Missing recipients or invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate messageQueueId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Recipient list exceeds broadcast limit
            (256)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/media/{mediaId}:
    get:
      summary: Retrieve encrypted media metadata and download URL
      description: Returns metadata for an HD media resource and a time-limited download
        URL for the encrypted payload.
      operationId: getMedia
      tags:
      - Media
      parameters:
      - name: mediaId
        in: path
        required: true
        description: Media resource identifier
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetMediaRequest'
      responses:
        '200':
          description: OK - Media metadata returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMediaResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Media resource does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/crypto/keys:
    post:
      summary: Register or update client encryption keys
      description: Registers or  identity key, signed prekey, and one-time
        prekeys required for Signal Protocol end-to-end encryption. Used per device.
      operationId: registerEncryptionKeys
      tags:
      - Crypto
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterEncryptionKeysRequest'
      responses:
        '201':
          description: Created - Keys registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegisterEncryptionKeysResponse'
        '400':
          description: Bad Request - Missing or invalid key material
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Keys already registered for this device
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/crypto/prekeys/{recipientId}:
    get:
      summary: Fetch recipient prekeys
      description: Retrieves recipient identity key, signed prekey, and one-time prekey
        bundle to establish a Signal session.
      operationId: getRecipientPreKeys
      tags:
      - Crypto
      parameters:
      - name: recipientId
        in: path
        required: true
        description: Recipient user identifier
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetRecipientPreKeysRequest'
      responses:
        '200':
          description: OK - Prekey bundle retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecipientPreKeysResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Recipient or prekeys not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - No available one-time prekeys for recipient
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages/{messageId}/ack:
    post:
      summary: Acknowledge message delivery
      description: Acknowledges successful decryption and delivery on the client to
        remove from server queue.
      operationId: acknowledgeMessage
      tags:
      - Messages
      parameters:
      - name: messageId
        in: path
        required: true
        description: Message identifier
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AcknowledgeMessageRequest'
      responses:
        '201':
          description: Created - Message acknowledged
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AcknowledgeMessageResponse'
        '400':
          description: Bad Request - Missing deviceId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Message not found in queue
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/security-code-verifications:
    post:
      summary: Initiate manual security code verification
      description: Creates a verification session to manually compare the end-to-end
        encryption safety code (e.g., numeric or QR) with a contact.
      operationId: createSecurityCodeVerification
      tags:
      - SecurityCodeVerification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSecurityCodeVerificationRequest'
      responses:
        '201':
          description: Created - Verification session started
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SecurityCodeVerificationResponse'
        '400':
          description: Bad Request - Missing or invalid fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to verify this contact
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Active verification already exists for this contact
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List verification sessions
      description: Returns a paginated list of security code verification sessions
        for the authenticated user.
      operationId: listSecurityCodeVerifications
      tags:
      - SecurityCodeVerification
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      - name: status
        in: query
        required: false
        description: Filter by status
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListSecurityCodeVerificationsRequest'
      responses:
        '200':
          description: OK - List retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedSecurityCodeVerificationListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to list verifications
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/security-code-verifications/{verificationId}:
    get:
      summary: Get verification session details
      description: Retrieves the current status and safety code details for a verification
        session.
      operationId: getSecurityCodeVerification
      tags:
      - SecurityCodeVerification
      parameters:
      - name: verificationId
        in: path
        required: true
        description: Verification session ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetSecurityCodeVerificationRequest'
      responses:
        '200':
          description: OK - Verification session retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SecurityCodeVerificationResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to access this verification
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Verification session does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '410':
          description: Gone - Verification session has expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/security-code-verifications/{verificationId}/confirm:
    post:
      summary: Confirm verification result
      description: Submits the result of manual verification (matched or not matched)
        for a safety code.
      operationId: confirmSecurityCodeVerification
      tags:
      - SecurityCodeVerification
      parameters:
      - name: verificationId
        in: path
        required: true
        description: Verification session ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConfirmSecurityCodeVerificationRequest'
      responses:
        '200':
          description: OK - Verification status updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SecurityCodeVerificationConfirmResponse'
        '400':
          description: Bad Request - Invalid confirmation payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to confirm this verification
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Verification session does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Verification already finalized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '410':
          description: Gone - Verification session has expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/app-lock:
    get:
      summary: Get app lock status
      description: Returns the current app lock configuration and whether the lock
        is enabled for the authenticated user.
      operationId: getAppLockStatus
      tags:
      - AppLock
      responses:
        '200':
          description: OK - App lock status returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppLockStatusResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User not permitted to access app lock settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve app lock status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Configure app lock
      description: Enables or disables app lock and configures the authentication
        method and security settings.
      operationId: updateAppLock
      tags:
      - AppLock
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAppLockRequest'
      responses:
        '200':
          description: OK - App lock configuration updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateAppLockResponse'
        '400':
          description: Bad Request - Invalid lock configuration or missing required
            fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Lock method not supported on device
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update app lock configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/app-lock/verify:
    post:
      summary: Verify app lock authentication
      description: Verifies the provided app lock authentication factor (e.g., PIN)
        to unlock the app session.
      operationId: verifyAppLock
      tags:
      - AppLock
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyAppLockRequest'
      responses:
        '200':
          description: OK - App lock verified successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VerifyAppLockResponse'
        '400':
          description: Bad Request - Invalid verification payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Verification failed or account locked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Too many failed attempts, temporarily locked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to verify app lock
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/blocks:
    post:
      summary: Block a contact
      description: Blocks a contact for the given user. Subsequent messages and calls
        from the blocked contact are prevented or filtered according to policy. This
        operation is idempotent per contact.
      operationId: blockContact
      tags:
      - Blocks
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID who is blocking the contact
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BlockContactRequest'
      responses:
        '201':
          description: Created - Contact successfully blocked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlockContactResponse'
        '400':
          description: Bad Request - contactId missing or invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User not permitted to block this contact
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or contact does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Contact is already blocked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List blocked contacts
      description: Retrieves a paginated list of blocked contacts for the given user.
      operationId: listBlockedContacts
      tags:
      - Blocks
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID whose blocked contacts are retrieved
        schema:
          type: string
      - name: page
        in: query
        required: false
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: false
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListBlockedContactsRequest'
      responses:
        '200':
          description: OK - Blocked contacts retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBlockedContactsListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to retrieve blocked contacts
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/blocks/{contactId}:
    delete:
      summary: Unblock a contact
      description: Removes a block relationship so the contact can message or call
        the user again.
      operationId: unblockContact
      tags:
      - Blocks
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID who is unblocking the contact
        schema:
          type: string
      - name: contactId
        in: path
        required: true
        description: Blocked contact ID to remove
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UnblockContactRequest'
      responses:
        '200':
          description: OK - Contact successfully unblocked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UnblockContactResponse'
        '400':
          description: Bad Request - Invalid userId or contactId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User not permitted to unblock this contact
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Block relationship does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to remove block
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/reports:
    post:
      summary: Report a message or contact
      description: Creates a report for a message or contact. Reports are used to
        flag abusive content or users for review.
      operationId: createReport
      tags:
      - Reports
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReportRequest'
      responses:
        '201':
          description: Created - Report submitted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReportResponse'
        '400':
          description: Bad Request - Missing or invalid targetType, targetId, or reasonCode
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid authentication token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - The specified target does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate report for the same target already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/pin:
    post:
      summary: Enable additional PIN security
      description: Creates and enables an optional additional PIN for two-step verification
        for the specified user.
      operationId: enableUserPin
      tags:
      - Security
      - Users
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnablePinRequest'
      responses:
        '201':
          description: Created - PIN security enabled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnablePinResponse'
        '400':
          description: Bad Request - PIN does not meet policy requirements
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - PIN security already enabled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update additional PIN
      description: Updates the user's existing PIN for two-step verification.
      operationId: updateUserPin
      tags:
      - Security
      - Users
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePinRequest'
      responses:
        '200':
          description: OK - PIN updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdatePinResponse'
        '400':
          description: Bad Request - New PIN does not meet policy requirements
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Current PIN is incorrect
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - PIN security is not enabled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Disable additional PIN security
      description: Disables the user's optional additional PIN for two-step verification.
      operationId: disableUserPin
      tags:
      - Security
      - Users
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DisablePinRequest'
      responses:
        '200':
          description: OK - PIN security disabled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DisablePinResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - PIN is incorrect
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - PIN security is not enabled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: Get PIN security status
      description: Retrieves the current status of optional additional PIN security
        for the user.
      operationId: getUserPinStatus
      tags:
      - Security
      - Users
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetPinStatusRequest'
      responses:
        '200':
          description: OK - PIN status retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetPinStatusResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/pin/verify:
    post:
      summary: Verify PIN during two-step verification
      description: Verifies the user's PIN as part of the two-step verification flow
        using a temporary authentication token.
      operationId: verifyPin
      tags:
      - Security
      - Auth
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyPinRequest'
      responses:
        '200':
          description: OK - PIN verified and access token issued
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VerifyPinResponse'
        '400':
          description: Bad Request - Missing or malformed tempAuthToken
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - PIN verification failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Temporary authentication session not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/spam-checks:
    post:
      summary: Create a spam detection job
      description: Submits encrypted message metadata and content fingerprints for
        asynchronous spam analysis compatible with end-to-end encryption.
      operationId: createSpamCheck
      tags:
      - SpamDetection
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSpamCheckRequest'
      responses:
        '201':
          description: Created - Spam check job created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateSpamCheckResponse'
        '400':
          description: Bad Request - Missing required fields or invalid metadata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate spam check for messageId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/spam-checks/{spamCheckId}:
    get:
      summary: Get spam detection result
      description: Retrieves the spam detection result for a previously submitted
        message.
      operationId: getSpamCheck
      tags:
      - SpamDetection
      parameters:
      - name: spamCheckId
        in: path
        required: true
        description: Spam check job ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetSpamCheckRequest'
      responses:
        '200':
          description: OK - Spam check result returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetSpamCheckResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Spam check ID does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '410':
          description: Gone - Spam check result expired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/call-privacy-settings:
    get:
      summary: Get call privacy settings
      description: Retrieves the user's call privacy settings, including IP address
        masking preference for WebRTC calls.
      operationId: getCallPrivacySettings
      tags:
      - CallPrivacy
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetCallPrivacySettingsRequest'
      responses:
        '200':
          description: OK - Settings retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CallPrivacySettingsResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update call privacy settings
      description: Updates the user's call privacy settings to enable or disable IP
        address masking for WebRTC calls.
      operationId: updateCallPrivacySettings
      tags:
      - CallPrivacy
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCallPrivacySettingsRequest'
      responses:
        '200':
          description: OK - Settings updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CallPrivacySettingsResponse'
        '400':
          description: Bad Request - ipMaskingEnabled must be a boolean
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Settings update conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/call-sessions:
    post:
      summary: Create call session with IP masking
      description: Creates a WebRTC call session using relay servers to mask participants'
        IP addresses when ipMaskingEnabled is true.
      operationId: createCallSession
      tags:
      - CallSessions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCallSessionRequest'
      responses:
        '201':
          description: Created - Call session created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CallSessionResponse'
        '400':
          description: Bad Request - Invalid mediaType or missing calleeIds
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Caller not allowed to initiate call
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Active call session already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/push-tokens:
    post:
      summary: Register device push token
      description: Registers or updates a device push token for reliable delivery
        to iOS/Android clients.
      operationId: registerPushToken
      tags:
      - PushNotifications
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterPushTokenRequest'
      responses:
        '201':
          description: Created - Push token registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PushTokenResponse'
        '400':
          description: Bad Request - Missing or invalid fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Token already registered for device
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/push-notifications:
    post:
      summary: Send push notification
      description: Creates a reliable push notification with end-to-end encrypted
        payload for a user, group, or broadcast list.
      operationId: createPushNotification
      tags:
      - PushNotifications
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePushNotificationRequest'
      responses:
        '201':
          description: Created - Notification queued
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PushNotificationResponse'
        '400':
          description: Bad Request - Invalid recipient or payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Encrypted payload exceeds limits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List push notifications
      description: Returns a paginated list of push notifications for the authenticated
        user.
      operationId: listPushNotifications
      tags:
      - PushNotifications
      parameters:
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListPushNotificationsRequest'
      responses:
        '200':
          description: OK - Notifications retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedPushNotificationListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/push-notifications/{id}/ack:
    post:
      summary: Acknowledge push notification
      description: Acknowledges delivery or processing of a push notification to support
        reliability and offline queues.
      operationId: acknowledgePushNotification
      tags:
      - PushNotifications
      parameters:
      - name: id
        in: path
        required: true
        description: Notification ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AckPushNotificationRequest'
      responses:
        '201':
          description: Created - Acknowledgement recorded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AckPushNotificationResponse'
        '400':
          description: Bad Request - Invalid acknowledgement status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Notification does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/notification-preferences:
    get:
      summary: Get notification preview settings
      description: Returns the user's configurable notification preview settings used
        by mobile clients to render previews.
      operationId: getNotificationPreferences
      tags:
      - Notifications
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetNotificationPreferencesRequest'
      responses:
        '200':
          description: OK - Notification preferences returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationPreferencesResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Cannot access preferences for another user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update notification preview settings
      description: Updates the user's configurable notification preview settings.
        Settings are applied across devices and used by clients for previews.
      operationId: updateNotificationPreferences
      tags:
      - Notifications
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateNotificationPreferencesRequest'
      responses:
        '200':
          description: OK - Preferences updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationPreferencesResponse'
        '400':
          description: Bad Request - Invalid preview configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Cannot update preferences for another user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/notification-previews:
    post:
      summary: Generate notification preview
      description: Generates a server-side notification preview payload based on encrypted
        metadata and user preferences. The message content remains end-to-end encrypted.
      operationId: createNotificationPreview
      tags:
      - Notifications
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateNotificationPreviewRequest'
      responses:
        '201':
          description: Created - Preview generated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationPreviewResponse'
        '400':
          description: Bad Request - Invalid preview input or unsupported message
            type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Recipient preferences disallow previews
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Message or user not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages/{messageId}/quick-replies:
    post:
      summary: Send a quick reply to a message from a notification
      description: Creates a quick reply to a specific message directly from a notification.
        Payload is end-to-end encrypted (Signal Protocol) and queued for offline delivery
        if necessary. Supports mobile-first clients and real-time delivery via WebSocket.
      operationId: createQuickReply
      tags:
      - Messages
      - QuickReplies
      parameters:
      - name: messageId
        in: path
        required: true
        description: ID of the original message being replied to
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateQuickReplyRequest'
      responses:
        '201':
          description: Created - Quick reply accepted and queued/sent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuickReplyResponse'
        '400':
          description: Bad Request - Missing required fields or invalid encrypted
            payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid authentication token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Original message or notification does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate clientMessageId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Payload cannot be decrypted or violates
            protocol constraints
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to create quick reply
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/do-not-disturb:
    get:
      summary: Get Do-Not-Disturb settings
      description: Returns the current Do-Not-Disturb mode configuration for the specified
        user.
      operationId: getDoNotDisturbSettings
      tags:
      - DoNotDisturb
      parameters:
      - name: userId
        in: path
        required: true
        description: Unique identifier of the user
        schema:
          type: string
      responses:
        '200':
          description: OK - Do-Not-Disturb settings retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DoNotDisturbSettingsResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User not allowed to access these settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update Do-Not-Disturb settings
      description: Enables, disables, or schedules Do-Not-Disturb mode for the specified
        user.
      operationId: updateDoNotDisturbSettings
      tags:
      - DoNotDisturb
      parameters:
      - name: userId
        in: path
        required: true
        description: Unique identifier of the user
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDoNotDisturbSettingsRequest'
      responses:
        '200':
          description: OK - Do-Not-Disturb settings updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DoNotDisturbSettingsResponse'
        '400':
          description: Bad Request - Invalid schedule or timestamp format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User not allowed to update these settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/notifications/reactions:
    get:
      summary: List reaction notifications
      description: Returns a paginated list of reaction notifications for the authenticated
        user's own messages. Notifications are generated when other users react to
        the user's messages. Intended for offline clients to sync missed notifications
        in addition to WebSocket delivery.
      operationId: listReactionNotifications
      tags:
      - Notifications
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination (starting at 1)
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      - name: since
        in: query
        required: false
        description: ISO-8601 timestamp to fetch notifications created after this
          time
        schema:
          type: string
      - name: unreadOnly
        in: query
        required: false
        description: If true, return only unread notifications
        schema:
          type: boolean
      responses:
        '200':
          description: OK - Reaction notifications retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedReactionNotificationListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to access these notifications
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve notifications
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/notifications/reactions/{notificationId}/read:
    put:
      summary: Mark reaction notification as read
      description: Marks a specific reaction notification as read for the authenticated
        user. Useful for syncing read state across devices when offline queues are
        used.
      operationId: markReactionNotificationRead
      tags:
      - Notifications
      parameters:
      - name: notificationId
        in: path
        required: true
        description: Notification ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MarkReactionNotificationReadRequest'
      responses:
        '200':
          description: OK - Notification marked as read
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReactionNotificationReadResponse'
        '400':
          description: Bad Request - Invalid readAt timestamp
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to modify this notification
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Notification does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Notification already marked as read
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update notification
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/call-notification-settings:
    get:
      summary: Get call notification settings
      description: Retrieves the separate call notification settings for a user. Settings
        apply to incoming voice/video calls using WebRTC.
      operationId: getCallNotificationSettings
      tags:
      - CallNotificationSettings
      parameters:
      - name: userId
        in: path
        required: true
        description: Unique user ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetCallNotificationSettingsRequest'
      responses:
        '200':
          description: OK - Call notification settings retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CallNotificationSettingsResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User does not have access to this resource
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or settings do not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected error while retrieving settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update call notification settings
      description: Updates the separate call notification settings for a user. Changes
        apply to incoming voice/video calls using WebRTC.
      operationId: updateCallNotificationSettings
      tags:
      - CallNotificationSettings
      parameters:
      - name: userId
        in: path
        required: true
        description: Unique user ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCallNotificationSettingsRequest'
      responses:
        '200':
          description: OK - Call notification settings updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CallNotificationSettingsResponse'
        '400':
          description: Bad Request - Invalid settings payload or time format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User does not have access to update this resource
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or settings do not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Settings update conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected error while updating settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/contacts/sync:
    post:
      summary: Synchronize device contacts with WhatsApp users
      description: Submits a device contact list (e.g., hashed phone numbers) to match
        against registered users and returns matched users for the client. Designed
        for mobile-first usage and offline batching.
      operationId: syncContacts
      tags:
      - Contacts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ContactSyncRequest'
      responses:
        '201':
          description: Created - Contacts sync accepted and processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContactSyncResponse'
        '400':
          description: Bad Request - Contacts payload is malformed or missing required
            fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid authentication token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Contact list exceeds allowed size
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Contact hashes are invalid or unsupported
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to process contact sync
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/contacts/sync/{syncId}:
    get:
      summary: Get contact sync result by sync ID
      description: Retrieves the results of a previously submitted contact sync operation.
      operationId: getContactSyncResult
      tags:
      - Contacts
      parameters:
      - name: syncId
        in: path
        required: true
        description: Sync operation identifier
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmptyRequest'
      responses:
        '200':
          description: OK - Sync result retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContactSyncResultResponse'
        '401':
          description: Unauthorized - Missing or invalid authentication token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Sync ID does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve sync result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/contacts:
    post:
      summary: Add a contact by identifier
      description: Adds a new contact using a phone number, userId, or username. Supports
        multiple ways to add a contact.
      operationId: addContact
      tags:
      - Contacts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddContactRequest'
      responses:
        '201':
          description: Created - Contact added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContactResponse'
        '400':
          description: Bad Request - Identifier type or value is invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - No user matches the identifier
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Contact already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Identifier format not supported
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/contacts/invitations:
    post:
      summary: Invite a contact not yet registered
      description: Creates an invitation to add a contact via phone number or email
        when the user is not yet registered.
      operationId: inviteContact
      tags:
      - Contacts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InviteContactRequest'
      responses:
        '201':
          description: Created - Invitation created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InviteContactResponse'
        '400':
          description: Bad Request - Invalid channel or destination
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Rate limit exceeded for invitations
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to create invitation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/contacts/qr:
    post:
      summary: Add a contact via QR token
      description: Adds a contact using a QR code token generated by another user.
      operationId: addContactByQr
      tags:
      - Contacts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddContactByQrRequest'
      responses:
        '201':
          description: Created - Contact added successfully via QR
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContactResponse'
        '400':
          description: Bad Request - Invalid or malformed QR token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - QR token does not map to a valid user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Contact already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/favorite-contacts:
    get:
      summary: List favorite contacts
      description: Retrieves a paginated list of a user's favorite contacts.
      operationId: listFavoriteContacts
      tags:
      - Favorites
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListFavoriteContactsRequest'
      responses:
        '200':
          description: OK - Favorites retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedFavoriteContactsListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected error while retrieving favorites
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    post:
      summary: Add favorite contact
      description: Adds a contact to the user's favorites list.
      operationId: addFavoriteContact
      tags:
      - Favorites
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddFavoriteContactRequest'
      responses:
        '201':
          description: Created - Contact added to favorites
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddFavoriteContactResponse'
        '400':
          description: Bad Request - Missing or invalid contactId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or contact does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Contact already in favorites
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected error while adding favorite
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/favorite-contacts/{contactId}:
    delete:
      summary: Remove favorite contact
      description: Removes a contact from the user's favorites list.
      operationId: removeFavoriteContact
      tags:
      - Favorites
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      - name: contactId
        in: path
        required: true
        description: Contact ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveFavoriteContactRequest'
      responses:
        '200':
          description: OK - Contact removed from favorites
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RemoveFavoriteContactResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Favorite contact not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected error while removing favorite
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/contact-labels:
    post:
      summary: Create a contact label
      description: Creates a new label that can be assigned to contacts for business
        categorization.
      operationId: createContactLabel
      tags:
      - ContactLabels
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateContactLabelRequest'
      responses:
        '201':
          description: Created - Label created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContactLabelResponse'
        '400':
          description: Bad Request - Label name is missing or invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Label name already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List contact labels
      description: Retrieves a paginated list of labels available to the business
        user.
      operationId: listContactLabels
      tags:
      - ContactLabels
      parameters:
      - name: page
        in: query
        required: true
        description: Page number starting from 1
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListContactLabelsRequest'
      responses:
        '200':
          description: OK - Labels retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedContactLabelListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/contact-labels/{labelId}:
    get:
      summary: Get a contact label
      description: Retrieves details of a specific contact label.
      operationId: getContactLabel
      tags:
      - ContactLabels
      parameters:
      - name: labelId
        in: path
        required: true
        description: Label ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetContactLabelRequest'
      responses:
        '200':
          description: OK - Label retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContactLabelResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Label does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update a contact label
      description: Updates the name or color of an existing label.
      operationId: updateContactLabel
      tags:
      - ContactLabels
      parameters:
      - name: labelId
        in: path
        required: true
        description: Label ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateContactLabelRequest'
      responses:
        '200':
          description: OK - Label updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContactLabelResponse'
        '400':
          description: Bad Request - Invalid label attributes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Label does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Label name already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete a contact label
      description: Deletes a label and unassigns it from all contacts.
      operationId: deleteContactLabel
      tags:
      - ContactLabels
      parameters:
      - name: labelId
        in: path
        required: true
        description: Label ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteContactLabelRequest'
      responses:
        '200':
          description: OK - Label deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteContactLabelResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Label does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/contacts/{contactId}/labels:
    get:
      summary: List labels for a contact
      description: Retrieves a paginated list of labels assigned to a specific contact.
      operationId: listContactLabelsForContact
      tags:
      - ContactLabels
      - Contacts
      parameters:
      - name: contactId
        in: path
        required: true
        description: Contact ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number starting from 1
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListContactLabelsForContactRequest'
      responses:
        '200':
          description: OK - Labels retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedContactLabelListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Contact does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/contacts/{contactId}/labels/{labelId}:
    post:
      summary: Assign label to a contact
      description: Assigns an existing label to a specific contact.
      operationId: assignLabelToContact
      tags:
      - ContactLabels
      - Contacts
      parameters:
      - name: contactId
        in: path
        required: true
        description: Contact ID
        schema:
          type: string
      - name: labelId
        in: path
        required: true
        description: Label ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssignLabelToContactRequest'
      responses:
        '201':
          description: Created - Label assigned to contact
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AssignLabelToContactResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Contact or label does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Label already assigned to contact
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Unassign label from a contact
      description: Removes a label assignment from a specific contact.
      operationId: unassignLabelFromContact
      tags:
      - ContactLabels
      - Contacts
      parameters:
      - name: contactId
        in: path
        required: true
        description: Contact ID
        schema:
          type: string
      - name: labelId
        in: path
        required: true
        description: Label ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UnassignLabelFromContactRequest'
      responses:
        '200':
          description: OK - Label unassigned from contact
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UnassignLabelFromContactResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Contact or label does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/contact-labels/{labelId}/contacts:
    get:
      summary: List contacts by label
      description: Retrieves a paginated list of contacts that have a specific label.
      operationId: listContactsByLabel
      tags:
      - ContactLabels
      - Contacts
      parameters:
      - name: labelId
        in: path
        required: true
        description: Label ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number starting from 1
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListContactsByLabelRequest'
      responses:
        '200':
          description: OK - Contacts retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedContactListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Label does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/unknown-senders:
    get:
      summary: List unknown senders
      description: Returns a paginated list of senders not in the user's contacts
        that have pending messages.
      operationId: listUnknownSenders
      tags:
      - UnknownSenders
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListUnknownSendersRequest'
      responses:
        '200':
          description: OK - List of unknown senders returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedUnknownSendersListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve unknown senders
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/unknown-senders/{senderId}:
    get:
      summary: Get unknown sender details
      description: Retrieves detailed information about a specific unknown sender
        and their pending message status.
      operationId: getUnknownSender
      tags:
      - UnknownSenders
      parameters:
      - name: senderId
        in: path
        required: true
        description: Sender ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetUnknownSenderRequest'
      responses:
        '200':
          description: OK - Unknown sender details returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UnknownSenderResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Unknown sender does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve sender details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/unknown-senders/{senderId}/messages:
    get:
      summary: List messages from an unknown sender
      description: Returns a paginated list of pending messages from a specific unknown
        sender.
      operationId: listUnknownSenderMessages
      tags:
      - UnknownSenders
      - Messages
      parameters:
      - name: senderId
        in: path
        required: true
        description: Sender ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListUnknownSenderMessagesRequest'
      responses:
        '200':
          description: OK - List of pending messages returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedUnknownSenderMessagesResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Unknown sender does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve messages
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/unknown-senders/{senderId}/actions:
    post:
      summary: Handle unknown sender
      description: Approves or blocks an unknown sender. Approval moves the sender
        to known contacts and releases pending messages. Blocking prevents future
        messages.
      operationId: handleUnknownSender
      tags:
      - UnknownSenders
      parameters:
      - name: senderId
        in: path
        required: true
        description: Sender ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HandleUnknownSenderRequest'
      responses:
        '201':
          description: Created - Action processed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HandleUnknownSenderResponse'
        '400':
          description: Bad Request - Invalid action value
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Unknown sender does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Sender already handled with the same action
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to process action
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages/search:
    get:
      summary: Search messages by full text
      description: Performs a full-text search over messages accessible to the authenticated
        user. Supports pagination and optional filters such as chatId and senderId.
      operationId: searchMessages
      tags:
      - Messages
      parameters:
      - name: q
        in: query
        required: true
        description: Full-text search query
        schema:
          type: string
      - name: chatId
        in: query
        required: false
        description: Filter results to a specific chat or group
        schema:
          type: string
      - name: senderId
        in: query
        required: false
        description: Filter results by sender user ID
        schema:
          type: string
      - name: fromTimestamp
        in: query
        required: false
        description: Filter results from this ISO 8601 timestamp (inclusive)
        schema:
          type: string
      - name: toTimestamp
        in: query
        required: false
        description: Filter results up to this ISO 8601 timestamp (inclusive)
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination (starting at 1)
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      responses:
        '200':
          description: OK - Search results returned successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedMessageSearchResponse'
        '400':
          description: Bad Request - Missing or invalid search query or pagination
            parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid authentication token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User does not have access to one or more requested
            chats
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Search rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected error during search processing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/search/chats:
    get:
      summary: Search chats by keyword
      description: Searches the user's chats by name, participants, or last message
        preview. Supports mobile-first pagination.
      operationId: searchChats
      tags:
      - Search
      - Chats
      parameters:
      - name: q
        in: query
        required: true
        description: Search query text
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      - name: type
        in: query
        required: false
        description: Filter by chat type (direct|group|broadcast)
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchChatsRequest'
      responses:
        '200':
          description: OK - Search results returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedSearchChatsResponse'
        '400':
          description: Bad Request - Missing or invalid query parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected failure
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/search/contacts:
    get:
      summary: Search contacts by keyword
      description: Searches the user's contacts by name, phone number, or username.
        Supports mobile-first pagination.
      operationId: searchContacts
      tags:
      - Search
      - Contacts
      parameters:
      - name: q
        in: query
        required: true
        description: Search query text
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchContactsRequest'
      responses:
        '200':
          description: OK - Search results returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedSearchContactsResponse'
        '400':
          description: Bad Request - Missing or invalid query parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected failure
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/presence-visibility:
    get:
      summary: Get online status visibility setting
      description: Returns the configured visibility setting for a user's online/last
        seen status.
      operationId: getPresenceVisibility
      tags:
      - Presence
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID whose visibility setting is requested
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetPresenceVisibilityRequest'
      responses:
        '200':
          description: OK - Visibility setting returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PresenceVisibilityResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to view this user's visibility setting
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve visibility setting
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update online status visibility setting
      description: Updates the configured visibility setting for a user's online/last
        seen status.
      operationId: updatePresenceVisibility
      tags:
      - Presence
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID whose visibility setting is being updated
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePresenceVisibilityRequest'
      responses:
        '200':
          description: OK - Visibility setting updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PresenceVisibilityResponse'
        '400':
          description: Bad Request - Invalid visibility value or conflicting allow/deny
            lists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to update this user's visibility setting
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Request conflicts with current visibility rules
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update visibility setting
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/presence-visibility/allowed-users:
    get:
      summary: List users allowed to see online status
      description: Returns a paginated list of users explicitly allowed to see status
        when visibility is custom.
      operationId: listPresenceAllowedUsers
      tags:
      - Presence
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID whose allow list is requested
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Page size for pagination
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListPresenceAllowedUsersRequest'
      responses:
        '200':
          description: OK - Allowed users list returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedPresenceAllowedUsersResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to view this allow list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or allow list does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve allow list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/presence-visibility/denied-users:
    get:
      summary: List users denied to see online status
      description: Returns a paginated list of users explicitly denied to see status
        when visibility is custom.
      operationId: listPresenceDeniedUsers
      tags:
      - Presence
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID whose deny list is requested
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Page size for pagination
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListPresenceDeniedUsersRequest'
      responses:
        '200':
          description: OK - Denied users list returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedPresenceDeniedUsersResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to view this deny list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or deny list does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve deny list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/settings/read-receipts:
    get:
      summary: Get read receipt settings
      description: Retrieves the current read receipt configuration for a user, including
        global and per-conversation overrides.
      operationId: getReadReceiptSettings
      tags:
      - ReadReceipts
      - UserSettings
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetReadReceiptSettingsRequest'
      responses:
        '200':
          description: OK - Read receipt settings returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReadReceiptSettingsResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Access to user settings denied
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or settings not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update read receipt settings
      description: Updates the user's read receipt configuration, including global
        and per-conversation overrides.
      operationId: updateReadReceiptSettings
      tags:
      - ReadReceipts
      - UserSettings
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateReadReceiptSettingsRequest'
      responses:
        '200':
          description: OK - Read receipt settings updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReadReceiptSettingsResponse'
        '400':
          description: Bad Request - Invalid settings payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Access to user settings denied
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or settings not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Settings update conflict detected
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/settings/profile-picture-visibility:
    get:
      summary: Get profile picture visibility setting
      description: Returns the current profile picture visibility configuration for
        the specified user.
      operationId: getProfilePictureVisibility
      tags:
      - UserSettings
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Visibility setting returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfilePictureVisibilityResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to access this user's settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update profile picture visibility setting
      description: Updates the profile picture visibility configuration for the specified
        user.
      operationId: updateProfilePictureVisibility
      tags:
      - UserSettings
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfilePictureVisibilityRequest'
      responses:
        '200':
          description: OK - Visibility setting updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfilePictureVisibilityResponse'
        '400':
          description: Bad Request - Visibility value is invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to update this user's settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Settings update conflict detected
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/privacy/infoVisibility:
    get:
      summary: Get info/status text visibility settings
      description: Retrieves the configurable visibility settings for a user's info/status
        text. These settings control who can see the user's info/status text across
        the system.
      operationId: getInfoVisibilitySettings
      tags:
      - Privacy
      - Users
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetInfoVisibilitySettingsRequest'
      responses:
        '200':
          description: OK - Settings retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InfoVisibilitySettingsResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Access denied for requested user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update info/status text visibility settings
      description: Updates the configurable visibility settings for a user's info/status
        text. Changes are applied immediately across the system.
      operationId: updateInfoVisibilitySettings
      tags:
      - Privacy
      - Users
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateInfoVisibilitySettingsRequest'
      responses:
        '200':
          description: OK - Settings updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InfoVisibilitySettingsResponse'
        '400':
          description: Bad Request - Invalid visibility value
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Access denied for requested user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/groups/{groupId}/settings/invite-policy:
    get:
      summary: Get group invite policy
      description: Retrieves the current configuration that defines who is allowed
        to add members to the group.
      operationId: getGroupInvitePolicy
      tags:
      - Groups
      - GroupSettings
      parameters:
      - name: groupId
        in: path
        required: true
        description: Unique group ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetGroupInvitePolicyRequest'
      responses:
        '200':
          description: OK - Invite policy retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupInvitePolicyResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to view settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update group invite policy
      description: Updates the configuration that defines who is allowed to add members
        to the group.
      operationId: updateGroupInvitePolicy
      tags:
      - Groups
      - GroupSettings
      parameters:
      - name: groupId
        in: path
        required: true
        description: Unique group ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateGroupInvitePolicyRequest'
      responses:
        '200':
          description: OK - Invite policy updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupInvitePolicyResponse'
        '400':
          description: Bad Request - Invalid invitePolicy value
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Only group owners or admins can update invite policy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Group does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Group settings update conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/storage/usage:
    get:
      summary: Retrieve storage usage metrics
      description: Returns per-scope storage usage and quotas to enable storage-efficient
        behavior on mobile clients.
      operationId: getStorageUsage
      tags:
      - Storage
      parameters:
      - name: scope
        in: query
        required: false
        description: 'Usage scope filter: user|device|group'
        schema:
          type: string
      - name: page
        in: query
        required: false
        description: Page number for paginated results
        schema:
          type: integer
      - name: pageSize
        in: query
        required: false
        description: Number of items per page
        schema:
          type: integer
      responses:
        '200':
          description: OK - Storage usage returned successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedStorageUsageResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to view usage
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve usage metrics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/storage/items:
    get:
      summary: List storage items
      description: Returns a paginated list of stored items for the authenticated
        user to manage storage usage.
      operationId: listStorageItems
      tags:
      - Storage
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      - name: type
        in: query
        required: false
        description: Filter by media type (image, document, video, audio, other)
        schema:
          type: string
      - name: sort
        in: query
        required: false
        description: Sort by field (createdAt, sizeBytes) with optional direction
          (e.g., sizeBytes:desc)
        schema:
          type: string
      responses:
        '200':
          description: OK - Storage items returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedStorageItemListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to list storage items
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/storage/items/{id}:
    delete:
      summary: Delete a storage item
      description: Deletes a specific storage item to free up space. This action removes
        the item for the authenticated user.
      operationId: deleteStorageItem
      tags:
      - Storage
      parameters:
      - name: id
        in: path
        required: true
        description: Storage item ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Storage item deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteStorageItemResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Storage item does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Storage item cannot be deleted due to active references
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to delete storage item
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/storage/purge:
    post:
      summary: Purge storage items by criteria
      description: Deletes multiple storage items based on criteria such as type and
        age to manage storage usage.
      operationId: purgeStorageItems
      tags:
      - Storage
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PurgeStorageItemsRequest'
      responses:
        '201':
          description: Created - Purge operation executed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PurgeStorageItemsResponse'
        '400':
          description: Bad Request - Invalid purge criteria
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to execute purge
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/data-usage/settings:
    get:
      summary: Get data usage control settings
      description: Retrieves the authenticated user's data usage control settings
        such as upload/download limits and auto-download preferences.
      operationId: getDataUsageSettings
      tags:
      - DataUsage
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetDataUsageSettingsRequest'
      responses:
        '200':
          description: OK - Settings retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataUsageSettingsResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Settings not found for user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update data usage control settings
      description: Updates the authenticated user's data usage control settings, enabling
        control over data consumption.
      operationId: updateDataUsageSettings
      tags:
      - DataUsage
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDataUsageSettingsRequest'
      responses:
        '200':
          description: OK - Settings updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateDataUsageSettingsResponse'
        '400':
          description: Bad Request - Invalid limits or preferences
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Settings update conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/data-usage/summary:
    get:
      summary: Get data usage summary
      description: Returns the authenticated user's current data usage totals and
        remaining quotas for the active period.
      operationId: getDataUsageSummary
      tags:
      - DataUsage
      parameters:
      - name: period
        in: query
        required: false
        description: Usage period (e.g., currentMonth, lastMonth)
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetDataUsageSummaryRequest'
      responses:
        '200':
          description: OK - Summary retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataUsageSummaryResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Usage data not available
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve summary
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chat-backgrounds:
    get:
      summary: List available chat backgrounds
      description: Returns a paginated list of available system and user-uploaded
        chat backgrounds.
      operationId: listChatBackgrounds
      tags:
      - ChatBackgrounds
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListChatBackgroundsRequest'
      responses:
        '200':
          description: OK - List of chat backgrounds returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedChatBackgroundListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve backgrounds
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    post:
      summary: Upload a custom chat background
      description: Uploads a user-provided image to be used as a chat background.
      operationId: createChatBackground
      tags:
      - ChatBackgrounds
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateChatBackgroundRequest'
      responses:
        '201':
          description: Created - Custom background uploaded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatBackgroundResponse'
        '400':
          description: Bad Request - Invalid file or missing required fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - File exceeds allowed size
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to upload background
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/me/chat-background:
    get:
      summary: Get user default chat background
      description: Returns the current default chat background for the authenticated
        user.
      operationId: getUserChatBackground
      tags:
      - UserSettings
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetUserChatBackgroundRequest'
      responses:
        '200':
          description: OK - User chat background returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserChatBackgroundResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - No background configured
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve user background
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Set user default chat background
      description: Sets the default chat background for the authenticated user.
      operationId: updateUserChatBackground
      tags:
      - UserSettings
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserChatBackgroundRequest'
      responses:
        '200':
          description: OK - User chat background updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserChatBackgroundResponse'
        '400':
          description: Bad Request - Invalid background ID
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Background does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update user background
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/{chatId}/chat-background:
    put:
      summary: Set chat-specific background
      description: Sets a background for a specific chat, overriding the user default
        for that chat.
      operationId: updateChatBackground
      tags:
      - ChatSettings
      parameters:
      - name: chatId
        in: path
        required: true
        description: Chat ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateChatBackgroundRequest'
      responses:
        '200':
          description: OK - Chat background updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatBackgroundResponse'
        '400':
          description: Bad Request - Invalid background ID
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User is not a participant of the chat
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Chat or background does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update chat background
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{id}/preferences/theme:
    get:
      summary: Get user theme preference
      description: Retrieves the user's theme preference including dark mode setting.
      operationId: getUserThemePreference
      tags:
      - UserPreferences
      parameters:
      - name: id
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetThemePreferenceRequest'
      responses:
        '200':
          description: OK - Theme preference retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ThemePreferenceResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Access to user preferences denied
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or preference not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve preference
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update user theme preference
      description: Updates the user's theme preference to enable dark mode or other
        theme options.
      operationId: updateUserThemePreference
      tags:
      - UserPreferences
      parameters:
      - name: id
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateThemePreferenceRequest'
      responses:
        '200':
          description: OK - Theme preference updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ThemePreferenceResponse'
        '400':
          description: Bad Request - Invalid theme value
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Access to user preferences denied
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Preference update conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update preference
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/languages:
    get:
      summary: List supported languages
      description: Returns a paginated list of languages supported by the system for
        UI and content localization.
      operationId: listLanguages
      tags:
      - Languages
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      responses:
        '200':
          description: OK - Languages retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedLanguagesListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve languages
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/me/language:
    get:
      summary: Get user language preference
      description: Retrieves the authenticated user's current language preference
        used for UI and content localization.
      operationId: getMyLanguage
      tags:
      - Users
      - Languages
      responses:
        '200':
          description: OK - User language retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserLanguageResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User language preference not set
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve user language
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update user language preference
      description: Sets the authenticated user's preferred language used for UI and
        content localization.
      operationId: updateMyLanguage
      tags:
      - Users
      - Languages
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserLanguageRequest'
      responses:
        '200':
          description: OK - User language updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserLanguageResponse'
        '400':
          description: Bad Request - Unsupported language code
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update user language
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/backups:
    post:
      summary: Create encrypted backup
      description: Uploads a client-side end-to-end encrypted backup blob and its
        metadata using Signal Protocol key identifiers. The server stores only ciphertext
        and metadata needed for retrieval.
      operationId: createBackup
      tags:
      - Backups
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateBackupRequest'
      responses:
        '201':
          description: Created - Encrypted backup stored successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BackupResponse'
        '400':
          description: Bad Request - Missing required fields or invalid metadata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Backup exceeds size limits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '415':
          description: Unsupported Media Type - Expected multipart/form-data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to store backup
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List encrypted backups
      description: Returns a paginated list of encrypted backup metadata for the authenticated
        user.
      operationId: listBackups
      tags:
      - Backups
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListBackupsRequest'
      responses:
        '200':
          description: OK - Backups retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBackupListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to fetch backups
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/backups/{backupId}:
    get:
      summary: Get backup metadata
      description: Returns metadata for a specific encrypted backup without exposing
        plaintext.
      operationId: getBackup
      tags:
      - Backups
      parameters:
      - name: backupId
        in: path
        required: true
        description: Backup ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetBackupRequest'
      responses:
        '200':
          description: OK - Backup metadata retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BackupResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Backup does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to fetch backup
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete encrypted backup
      description: Permanently deletes an encrypted backup and its metadata.
      operationId: deleteBackup
      tags:
      - Backups
      parameters:
      - name: backupId
        in: path
        required: true
        description: Backup ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteBackupRequest'
      responses:
        '200':
          description: OK - Backup deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteBackupResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Backup does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to delete backup
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/backups/{backupId}/download:
    get:
      summary: Download encrypted backup
      description: Provides a secure, time-limited URL to download the encrypted backup
        ciphertext.
      operationId: downloadBackup
      tags:
      - Backups
      parameters:
      - name: backupId
        in: path
        required: true
        description: Backup ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DownloadBackupRequest'
      responses:
        '200':
          description: OK - Download URL generated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BackupDownloadResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Backup does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to generate download URL
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/backups/{backupId}/restore:
    post:
      summary: Initiate backup restore
      description: Marks a backup as selected for restore and returns restore metadata.
        Actual decryption and import occur on the client.
      operationId: restoreBackup
      tags:
      - Backups
      parameters:
      - name: backupId
        in: path
        required: true
        description: Backup ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RestoreBackupRequest'
      responses:
        '201':
          description: Created - Restore initiated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RestoreBackupResponse'
        '400':
          description: Bad Request - Missing or invalid device ID
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Backup ID does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Restore already in progress for this backup
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to initiate restore
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/{chatId}/exports:
    post:
      summary: Create a chat export
      description: Creates an export job for a single chat. The export will contain
        messages (and optionally media) and returns an exportId to track status and
        retrieve the download URL.
      operationId: createChatExport
      tags:
      - ChatExports
      parameters:
      - name: chatId
        in: path
        required: true
        description: Unique identifier of the chat to export
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateChatExportRequest'
      responses:
        '201':
          description: Created - Export job successfully created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatExportCreatedResponse'
        '400':
          description: Bad Request - Invalid export format or parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User does not have access to this chat
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Chat does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Requested export exceeds size limits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Export rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to create export job
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/{chatId}/exports/{exportId}:
    get:
      summary: Get chat export status and download URL
      description: Retrieves the status of a chat export job and provides a temporary
        download URL when the export is ready.
      operationId: getChatExport
      tags:
      - ChatExports
      parameters:
      - name: chatId
        in: path
        required: true
        description: Unique identifier of the chat
        schema:
          type: string
      - name: exportId
        in: path
        required: true
        description: Unique identifier of the export job
        schema:
          type: string
      responses:
        '200':
          description: OK - Export status retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatExportStatusResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User does not have access to this chat or export
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Export job does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '410':
          description: Gone - Export has expired and is no longer available
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve export status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chat-history-transfer-sessions:
    post:
      summary: Create chat history transfer session
      description: Creates a transfer session to securely move encrypted chat history
        from a source device to a new device using Signal Protocol key bundles.
      operationId: createChatHistoryTransferSession
      tags:
      - ChatHistoryTransfer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateChatHistoryTransferSessionRequest'
      responses:
        '201':
          description: Created - Transfer session created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatHistoryTransferSessionResponse'
        '400':
          description: Bad Request - Missing or invalid Signal key bundle or transferMode
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - An active transfer session already exists for the
            source device
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chat-history-transfer-sessions/{sessionId}/export:
    post:
      summary: Start chat history export
      description: Initiates export of encrypted chat history from the source device
        into an encrypted archive for transfer.
      operationId: startChatHistoryExport
      tags:
      - ChatHistoryTransfer
      parameters:
      - name: sessionId
        in: path
        required: true
        description: Transfer session ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StartChatHistoryExportRequest'
      responses:
        '202':
          description: Accepted - Export job started
        '400':
          description: Bad Request - Invalid archive key or archive size constraints
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Transfer session does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Export already started or completed for this session
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chat-history-transfer-sessions/{sessionId}:
    get:
      summary: Get transfer session status
      description: Retrieves the current status and progress of a chat history transfer
        session.
      operationId: getChatHistoryTransferSession
      tags:
      - ChatHistoryTransfer
      parameters:
      - name: sessionId
        in: path
        required: true
        description: Transfer session ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetChatHistoryTransferSessionRequest'
      responses:
        '200':
          description: OK - Status returned successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatHistoryTransferSessionStatusResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Transfer session does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chat-history-transfer-sessions/{sessionId}/archive:
    get:
      summary: Get encrypted archive download URL
      description: Provides a time-limited download URL for the encrypted chat history
        archive once export is ready.
      operationId: getChatHistoryArchive
      tags:
      - ChatHistoryTransfer
      parameters:
      - name: sessionId
        in: path
        required: true
        description: Transfer session ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetChatHistoryArchiveRequest'
      responses:
        '200':
          description: OK - Download URL returned successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatHistoryArchiveResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Archive not ready or session does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '410':
          description: Gone - Archive expired or deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chat-history-transfer-sessions/{sessionId}/import:
    post:
      summary: Start chat history import
      description: Initiates import of the encrypted archive on the target device,
        supporting offline resume through checkpoints.
      operationId: startChatHistoryImport
      tags:
      - ChatHistoryTransfer
      parameters:
      - name: sessionId
        in: path
        required: true
        description: Transfer session ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StartChatHistoryImportRequest'
      responses:
        '202':
          description: Accepted - Import job started
        '400':
          description: Bad Request - Invalid transfer token or checksum mismatch
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Transfer session or archive does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Import already in progress or completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/{chatId}/archive:
    post:
      summary: Archive a chat
      description: Marks a chat as archived for the authenticated user to enable chat
        archiving functionality.
      operationId: archiveChat
      tags:
      - Chats
      parameters:
      - name: chatId
        in: path
        required: true
        description: Unique identifier of the chat to archive
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ArchiveChatRequest'
      responses:
        '201':
          description: Created - Chat archived successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArchiveChatResponse'
        '400':
          description: Bad Request - Invalid chatId or payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Chat does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Chat is already archived
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/{chatId}/pin:
    put:
      summary: Chat anpinnen
      description: Pinnt einen Chat fuer den authentifizierten Benutzer an.
      operationId: pinChat
      tags:
      - Chats
      parameters:
      - name: chatId
        in: path
        required: true
        description: Eindeutige Chat-ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PinChatRequest'
      responses:
        '200':
          description: OK - Chat erfolgreich angepinnt
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PinChatResponse'
        '400':
          description: Bad Request - Ungueltige Chat-ID oder Request-Parameter
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Fehlender oder ungueltiger Zugriffstoken
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Keine Berechtigung fuer diesen Chat
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Chat existiert nicht
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Chat ist bereits angepinnt
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unerwarteter Serverfehler
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Chat lospinnen
      description: Entfernt das Anpinnen eines Chats fuer den authentifizierten Benutzer.
      operationId: unpinChat
      tags:
      - Chats
      parameters:
      - name: chatId
        in: path
        required: true
        description: Eindeutige Chat-ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UnpinChatRequest'
      responses:
        '200':
          description: OK - Chat erfolgreich losgepinnt
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UnpinChatResponse'
        '400':
          description: Bad Request - Ungueltige Chat-ID oder Request-Parameter
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Fehlender oder ungueltiger Zugriffstoken
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Keine Berechtigung fuer diesen Chat
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Chat existiert nicht
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Chat ist nicht angepinnt
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unerwarteter Serverfehler
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/chats/pinned:
    get:
      summary: Angepinnte Chats abrufen
      description: Liefert eine paginierte Liste aller angepinnten Chats des authentifizierten
        Benutzers.
      operationId: listPinnedChats
      tags:
      - Chats
      parameters:
      - name: page
        in: query
        required: true
        description: Seitennummer fuer die Paginierung
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Anzahl der Eintraege pro Seite
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListPinnedChatsRequest'
      responses:
        '200':
          description: OK - Liste der angepinnten Chats
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedPinnedChatsListResponse'
        '400':
          description: Bad Request - Ungueltige Paginierungsparameter
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Fehlender oder ungueltiger Zugriffstoken
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unerwarteter Serverfehler
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/business-profiles:
    post:
      summary: Create a business profile
      description: Creates an extended business profile for an authenticated account.
      operationId: createBusinessProfile
      tags:
      - BusinessProfiles
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBusinessProfileRequest'
      responses:
        '201':
          description: Created - Business profile created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessProfileResponse'
        '400':
          description: Bad Request - Missing or invalid business profile fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Business profile already exists for this account
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List business profiles
      description: Returns a paginated list of business profiles accessible to the
        authenticated user.
      operationId: listBusinessProfiles
      tags:
      - BusinessProfiles
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListBusinessProfilesRequest'
      responses:
        '200':
          description: OK - Business profiles retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBusinessProfileListResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected error while listing business
            profiles
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/business-profiles/{id}:
    get:
      summary: Get a business profile
      description: Retrieves a single business profile by ID.
      operationId: getBusinessProfile
      tags:
      - BusinessProfiles
      parameters:
      - name: id
        in: path
        required: true
        description: Business profile ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetBusinessProfileRequest'
      responses:
        '200':
          description: OK - Business profile retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessProfileResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Business profile does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update a business profile
      description: Updates an existing business profile by ID.
      operationId: updateBusinessProfile
      tags:
      - BusinessProfiles
      parameters:
      - name: id
        in: path
        required: true
        description: Business profile ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateBusinessProfileRequest'
      responses:
        '200':
          description: OK - Business profile updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessProfileResponse'
        '400':
          description: Bad Request - Invalid business profile fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Business profile does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete a business profile
      description: Deletes an existing business profile by ID.
      operationId: deleteBusinessProfile
      tags:
      - BusinessProfiles
      parameters:
      - name: id
        in: path
        required: true
        description: Business profile ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteBusinessProfileRequest'
      responses:
        '200':
          description: OK - Business profile deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteBusinessProfileResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Business profile does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/business-profiles/{id}/media:
    post:
      summary: Upload business profile media
      description: Uploads media (logo or cover) for a business profile. Enforce media
        limits (16MB images, 2GB documents).
      operationId: uploadBusinessProfileMedia
      tags:
      - BusinessProfiles
      - Media
      parameters:
      - name: id
        in: path
        required: true
        description: Business profile ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UploadBusinessProfileMediaRequest'
      responses:
        '201':
          description: Created - Media uploaded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessProfileMediaResponse'
        '400':
          description: Bad Request - Invalid media type or file
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Media exceeds allowed size limits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/businesses/{businessId}/verification-requests:
    post:
      summary: Submit a business verification request
      description: Creates a verification request for a business with required metadata
        and optional document references.
      operationId: createBusinessVerificationRequest
      tags:
      - BusinessVerification
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBusinessVerificationRequest'
      responses:
        '201':
          description: Created - Verification request submitted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessVerificationRequestResponse'
        '400':
          description: Bad Request - Missing or invalid verification data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Active verification request already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to create verification request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/businesses/{businessId}/verification-status:
    get:
      summary: Get business verification status
      description: Retrieves the current verification status for a business.
      operationId: getBusinessVerificationStatus
      tags:
      - BusinessVerification
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetBusinessVerificationStatusRequest'
      responses:
        '200':
          description: OK - Verification status retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessVerificationStatusResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Business or verification status not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to retrieve verification status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/verification-requests/{requestId}:
    put:
      summary: Update verification request status
      description: Administrative endpoint to approve or reject a business verification
        request.
      operationId: updateBusinessVerificationRequestStatus
      tags:
      - BusinessVerification
      - Admin
      parameters:
      - name: requestId
        in: path
        required: true
        description: Verification request ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateBusinessVerificationRequestStatusRequest'
      responses:
        '200':
          description: OK - Verification request updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateBusinessVerificationRequestStatusResponse'
        '400':
          description: Bad Request - Invalid status transition or missing data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient privileges to update verification
            status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Verification request not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to update verification request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/businesses/{businessId}/quick-replies:
    post:
      summary: Create quick reply
      description: Creates a predefined quick reply for a business to be used in messaging.
      operationId: createQuickReply
      tags:
      - QuickReplies
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateQuickReplyRequest'
      responses:
        '201':
          description: Created - Quick reply was created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuickReplyResponse'
        '400':
          description: Bad Request - Missing or invalid fields in request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid authentication token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Business does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Quick reply with same title already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List quick replies
      description: Retrieves a paginated list of quick replies for a business.
      operationId: listQuickReplies
      tags:
      - QuickReplies
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      - name: isActive
        in: query
        required: false
        description: Filter by active status
        schema:
          type: boolean
      - name: language
        in: query
        required: false
        description: Filter by language tag
        schema:
          type: string
      responses:
        '200':
          description: OK - Quick replies retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedQuickReplyListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid authentication token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Business does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/businesses/{businessId}/quick-replies/{quickReplyId}:
    get:
      summary: Get quick reply
      description: Retrieves a specific quick reply by ID for a business.
      operationId: getQuickReply
      tags:
      - QuickReplies
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      - name: quickReplyId
        in: path
        required: true
        description: Quick reply ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Quick reply retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuickReplyResponse'
        '401':
          description: Unauthorized - Missing or invalid authentication token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Business or quick reply does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update quick reply
      description: Updates a predefined quick reply for a business.
      operationId: updateQuickReply
      tags:
      - QuickReplies
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      - name: quickReplyId
        in: path
        required: true
        description: Quick reply ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateQuickReplyRequest'
      responses:
        '200':
          description: OK - Quick reply updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuickReplyResponse'
        '400':
          description: Bad Request - Invalid fields in request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid authentication token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Business or quick reply does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Quick reply with same title already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete quick reply
      description: Deletes a predefined quick reply for a business.
      operationId: deleteQuickReply
      tags:
      - QuickReplies
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      - name: quickReplyId
        in: path
        required: true
        description: Quick reply ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Quick reply deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteQuickReplyResponse'
        '401':
          description: Unauthorized - Missing or invalid authentication token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Business or quick reply does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/away-message:
    get:
      summary: Get user's automatic away message configuration
      description: Retrieves the current automatic away message settings for a user,
        including enabled state, message text, and schedule.
      operationId: getAwayMessage
      tags:
      - AwayMessages
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetAwayMessageRequest'
      responses:
        '200':
          description: OK - Away message configuration retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AwayMessageResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to access this user's
            settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Away message configuration does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Create or update user's automatic away message configuration
      description: Creates or updates the automatic away message settings for a user,
        including enabled state, message text, and schedule.
      operationId: upsertAwayMessage
      tags:
      - AwayMessages
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpsertAwayMessageRequest'
      responses:
        '200':
          description: OK - Away message configuration updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AwayMessageResponse'
        '400':
          description: Bad Request - Invalid schedule or message payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to update this user's
            settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Disable and remove user's automatic away message configuration
      description: Disables automatic away messages and removes the current configuration
        for a user.
      operationId: deleteAwayMessage
      tags:
      - AwayMessages
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteAwayMessageRequest'
      responses:
        '200':
          description: OK - Away message configuration deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteAwayMessageResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to delete this user's
            settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Away message configuration does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/greeting-settings:
    get:
      summary: Get greeting settings
      description: Retrieves the automatic greeting configuration for a user. Used
        by clients to display or cache current greeting settings.
      operationId: getGreetingSettings
      tags:
      - Greetings
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetGreetingSettingsRequest'
      responses:
        '200':
          description: OK - Greeting settings retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GreetingSettingsResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User not allowed to access these settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or greeting settings not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve greeting settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update greeting settings
      description: Creates or updates the automatic greeting configuration for a user.
        Used to configure the message sent on first contact.
      operationId: updateGreetingSettings
      tags:
      - Greetings
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateGreetingSettingsRequest'
      responses:
        '200':
          description: OK - Greeting settings updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GreetingSettingsResponse'
        '400':
          description: Bad Request - Invalid greeting settings payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User not allowed to update these settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Greeting settings update conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update greeting settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/conversations/{conversationId}/greeting-messages:
    post:
      summary: Create greeting message on first contact
      description: Creates an automatic greeting message when a first-contact event
        is detected in a conversation. Server-side logic ensures idempotency to avoid
        duplicate greetings.
      operationId: createGreetingMessage
      tags:
      - Greetings
      - Conversations
      parameters:
      - name: conversationId
        in: path
        required: true
        description: Conversation ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGreetingMessageRequest'
      responses:
        '201':
          description: Created - Greeting message created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GreetingMessageResponse'
        '400':
          description: Bad Request - Invalid greeting message payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User not allowed to create greetings in this conversation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Conversation not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Greeting already sent for this first-contact event
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to create greeting message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List greeting messages
      description: Returns a paginated list of greeting messages for a conversation
        to support client synchronization.
      operationId: listGreetingMessages
      tags:
      - Greetings
      - Conversations
      parameters:
      - name: conversationId
        in: path
        required: true
        description: Conversation ID
        schema:
          type: string
      - name: page
        in: query
        required: false
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: false
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListGreetingMessagesRequest'
      responses:
        '200':
          description: OK - Greeting messages retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedGreetingMessageListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - User not allowed to access greetings in this conversation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Conversation not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve greeting messages
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/businesses/{businessId}/products:
    post:
      summary: Create product in business catalog
      description: Creates a new product entry in the specified business product catalog.
      operationId: createBusinessProduct
      tags:
      - ProductCatalog
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBusinessProductRequest'
      responses:
        '201':
          description: Created - Product added to catalog
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessProductResponse'
        '400':
          description: Bad Request - Missing or invalid product fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to manage catalog
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Product with same SKU already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List products in business catalog
      description: Retrieves a paginated list of products in the specified business
        product catalog.
      operationId: listBusinessProducts
      tags:
      - ProductCatalog
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number (1-based)
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      - name: isActive
        in: query
        required: false
        description: Filter by active status
        schema:
          type: boolean
      - name: query
        in: query
        required: false
        description: Search by name or SKU
        schema:
          type: string
      responses:
        '200':
          description: OK - Products retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedBusinessProductListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to view catalog
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/businesses/{businessId}/products/{productId}:
    get:
      summary: Get product details
      description: Retrieves the details of a specific product in the business catalog.
      operationId: getBusinessProduct
      tags:
      - ProductCatalog
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      - name: productId
        in: path
        required: true
        description: Product ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Product retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessProductResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to view product
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Product does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update product details
      description: Updates a specific product in the business catalog.
      operationId: updateBusinessProduct
      tags:
      - ProductCatalog
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      - name: productId
        in: path
        required: true
        description: Product ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateBusinessProductRequest'
      responses:
        '200':
          description: OK - Product updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessProductResponse'
        '400':
          description: Bad Request - Invalid product fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to manage product
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Product does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - SKU already used by another product
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete product from catalog
      description: Removes a product from the business catalog.
      operationId: deleteBusinessProduct
      tags:
      - ProductCatalog
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      - name: productId
        in: path
        required: true
        description: Product ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Product deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteBusinessProductResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to manage catalog
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Product does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/businesses/{businessId}/products/{productId}/media:
    post:
      summary: Upload product media
      description: Uploads media (image/document) for a product. Enforces max size
        of 16MB for images and 2GB for documents.
      operationId: uploadBusinessProductMedia
      tags:
      - ProductCatalog
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      - name: productId
        in: path
        required: true
        description: Product ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UploadBusinessProductMediaRequest'
      responses:
        '201':
          description: Created - Media uploaded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessProductMediaResponse'
        '400':
          description: Bad Request - Invalid media type or file
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to manage product media
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Media exceeds allowed size
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/businesses/{businessId}/products/{productId}/media/{mediaId}:
    delete:
      summary: Delete product media
      description: Removes a media asset from a product.
      operationId: deleteBusinessProductMedia
      tags:
      - ProductCatalog
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      - name: productId
        in: path
        required: true
        description: Product ID
        schema:
          type: string
      - name: mediaId
        in: path
        required: true
        description: Media ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Media deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteBusinessProductMediaResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to manage product media
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Media does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/carts/{cartId}:
    get:
      summary: Get cart details
      description: Retrieves cart metadata including totals and item count.
      operationId: getCart
      tags:
      - Carts
      parameters:
      - name: cartId
        in: path
        required: true
        description: Cart ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetCartRequest'
      responses:
        '200':
          description: OK - Cart retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Cart does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve cart
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/carts/{cartId}/items:
    get:
      summary: List cart items
      description: Retrieves a paginated list of items in the cart.
      operationId: listCartItems
      tags:
      - CartItems
      parameters:
      - name: cartId
        in: path
        required: true
        description: Cart ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListCartItemsRequest'
      responses:
        '200':
          description: OK - Cart items retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedCartItemListResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Cart does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to list cart items
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    post:
      summary: Add item to cart
      description: Adds a product item to the cart with quantity.
      operationId: addCartItem
      tags:
      - CartItems
      parameters:
      - name: cartId
        in: path
        required: true
        description: Cart ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddCartItemRequest'
      responses:
        '201':
          description: Created - Cart item added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddCartItemResponse'
        '400':
          description: Bad Request - Invalid product or quantity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Cart does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Product already in cart
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to add cart item
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Clear cart
      description: Removes all items from the cart.
      operationId: clearCart
      tags:
      - Carts
      parameters:
      - name: cartId
        in: path
        required: true
        description: Cart ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClearCartRequest'
      responses:
        '200':
          description: OK - Cart cleared successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClearCartResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Cart does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to clear cart
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/carts/{cartId}/items/{itemId}:
    put:
      summary: Update cart item quantity
      description: Updates the quantity of an existing cart item.
      operationId: updateCartItem
      tags:
      - CartItems
      parameters:
      - name: cartId
        in: path
        required: true
        description: Cart ID
        schema:
          type: string
      - name: itemId
        in: path
        required: true
        description: Cart item ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCartItemRequest'
      responses:
        '200':
          description: OK - Cart item updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateCartItemResponse'
        '400':
          description: Bad Request - Invalid quantity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Cart or item does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update cart item
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Remove item from cart
      description: Removes a specific item from the cart.
      operationId: removeCartItem
      tags:
      - CartItems
      parameters:
      - name: cartId
        in: path
        required: true
        description: Cart ID
        schema:
          type: string
      - name: itemId
        in: path
        required: true
        description: Cart item ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveCartItemRequest'
      responses:
        '200':
          description: OK - Cart item removed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RemoveCartItemResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Cart or item does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to remove cart item
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/payments/markets:
    get:
      summary: List supported payment markets
      description: Returns the list of markets where in-app WhatsApp Pay is available
        for the authenticated user.
      operationId: listPaymentMarkets
      tags:
      - Payments
      responses:
        '200':
          description: OK - Supported markets returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentMarketsResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to fetch markets
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/payments:
    post:
      summary: Create a payment
      description: Creates a new in-app payment request between two users within a
        supported market.
      operationId: createPayment
      tags:
      - Payments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePaymentRequest'
      responses:
        '201':
          description: Created - Payment created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentResponse'
        '400':
          description: Bad Request - Missing or invalid payment fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate idempotency key
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Market not supported or payment not
            allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List payments
      description: Returns a paginated list of payments for the authenticated user.
      operationId: listPayments
      tags:
      - Payments
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      - name: status
        in: query
        required: false
        description: Filter by payment status
        schema:
          type: string
      responses:
        '200':
          description: OK - Payments list returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedPaymentListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/payments/{paymentId}:
    get:
      summary: Get payment details
      description: Retrieves details and status of a specific payment.
      operationId: getPayment
      tags:
      - Payments
      parameters:
      - name: paymentId
        in: path
        required: true
        description: Payment ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Payment details returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentDetailsResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Payment ID does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/businesses/{businessId}/statistics/messages:
    get:
      summary: Retrieve basic message statistics for a business
      description: Provides aggregated message statistics for a business within a
        specified time range, including counts of sent, delivered, read, failed, and
        media messages. Supports optional grouping by day or hour.
      operationId: getBusinessMessageStatistics
      tags:
      - BusinessStatistics
      parameters:
      - name: businessId
        in: path
        required: true
        description: Business ID
        schema:
          type: string
      - name: from
        in: query
        required: true
        description: Start of time range in ISO 8601 format
        schema:
          type: string
      - name: to
        in: query
        required: true
        description: End of time range in ISO 8601 format
        schema:
          type: string
      - name: groupBy
        in: query
        required: false
        description: 'Optional grouping interval: hour or day'
        schema:
          type: string
      responses:
        '200':
          description: OK - Business message statistics retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessMessageStatisticsResponse'
        '400':
          description: Bad Request - Invalid time range or groupBy parameter
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not authorized to access business statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Business does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/health:
    get:
      summary: Health check
      description: Public health check endpoint for integration monitoring.
      operationId: getHealth
      tags:
      - System
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HealthCheckRequest'
      responses:
        '200':
          description: OK - Service is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthCheckResponse'
        '503':
          description: Service Unavailable - System is not ready
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/integrations/apps:
    post:
      summary: Create integration app
      description: Creates a business integration app to access the Business API.
      operationId: createIntegrationApp
      tags:
      - Integrations
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateIntegrationAppRequest'
      responses:
        '201':
          description: Created - Integration app created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationAppResponse'
        '400':
          description: Bad Request - Missing or invalid fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - App already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List integration apps
      description: Returns paginated list of integration apps for the business account.
      operationId: listIntegrationApps
      tags:
      - Integrations
      parameters:
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Page size
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListIntegrationAppsRequest'
      responses:
        '200':
          description: OK - Apps retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedIntegrationAppListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/integrations/apps/{appId}:
    get:
      summary: Get integration app
      description: Returns details for a specific integration app.
      operationId: getIntegrationApp
      tags:
      - Integrations
      parameters:
      - name: appId
        in: path
        required: true
        description: Integration app ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetIntegrationAppRequest'
      responses:
        '200':
          description: OK - App retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntegrationAppResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - App does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/integrations/apps/{appId}/tokens:
    post:
      summary: Issue API token
      description: Issues an access token for the integration app using client credentials.
      operationId: issueIntegrationToken
      tags:
      - Integrations
      - Auth
      parameters:
      - name: appId
        in: path
        required: true
        description: Integration app ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IssueTokenRequest'
      responses:
        '201':
          description: Created - Token issued
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenResponse'
        '400':
          description: Bad Request - Missing or invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Invalid client credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - App does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/integrations/keys:
    post:
      summary: Register encryption keys
      description: Registers Signal Protocol public keys for end-to-end encryption.
      operationId: registerIntegrationKeys
      tags:
      - Integrations
      - Security
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterKeysRequest'
      responses:
        '201':
          description: Created - Keys registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegisterKeysResponse'
        '400':
          description: Bad Request - Invalid key payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/integrations/messages:
    post:
      summary: Send message
      description: Sends an end-to-end encrypted message. Supports offline queueing
        and real-time delivery via WebSocket. Enforces max group members (1024) and
        max broadcast recipients (256).
      operationId: sendIntegrationMessage
      tags:
      - Messaging
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendMessageRequest'
      responses:
        '201':
          description: Created - Message accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SendMessageResponse'
        '400':
          description: Bad Request - Invalid recipient or payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Encrypted message exceeds limits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List messages
      description: Retrieves paginated messages for integration tracking and reconciliation.
      operationId: listIntegrationMessages
      tags:
      - Messaging
      parameters:
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Page size
        schema:
          type: integer
      - name: since
        in: query
        required: false
        description: Filter by ISO-8601 timestamp
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListMessagesRequest'
      responses:
        '200':
          description: OK - Messages retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedMessageListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/integrations/media:
    post:
      summary: Upload media
      description: 'Uploads encrypted media for messages. Max size: 2GB documents,
        16MB images.'
      operationId: uploadIntegrationMedia
      tags:
      - Media
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UploadMediaRequest'
      responses:
        '201':
          description: Created - Media uploaded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadMediaResponse'
        '400':
          description: Bad Request - Invalid media type or checksum
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Media size exceeds limits
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/integrations/webhooks:
    post:
      summary: Register webhook
      description: Registers webhook endpoints for real-time events (e.g., message
        status, delivery).
      operationId: registerIntegrationWebhook
      tags:
      - Webhooks
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterWebhookRequest'
      responses:
        '201':
          description: Created - Webhook registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebhookResponse'
        '400':
          description: Bad Request - Invalid URL or events
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Webhook already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List webhooks
      description: Retrieves paginated list of registered webhooks.
      operationId: listIntegrationWebhooks
      tags:
      - Webhooks
      parameters:
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Page size
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListWebhooksRequest'
      responses:
        '200':
          description: OK - Webhooks retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedWebhookListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{id}/accessibility-settings:
    get:
      summary: Get accessibility settings
      description: Retrieves the user's accessibility settings including contrast
        preferences to ensure sufficient color contrast in the UI.
      operationId: getUserAccessibilitySettings
      tags:
      - Accessibility
      - Users
      parameters:
      - name: id
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetUserAccessibilitySettingsRequest'
      responses:
        '200':
          description: OK - Accessibility settings returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserAccessibilitySettingsResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Access denied to user settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or settings not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update accessibility settings
      description: Updates the user's accessibility settings to enforce sufficient
        color contrast in the UI.
      operationId: updateUserAccessibilitySettings
      tags:
      - Accessibility
      - Users
      parameters:
      - name: id
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserAccessibilitySettingsRequest'
      responses:
        '200':
          description: OK - Accessibility settings updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserAccessibilitySettingsResponse'
        '400':
          description: Bad Request - Invalid contrast mode or ratio
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Access denied to user settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Settings update conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/preferences/typography:
    get:
      summary: Get user typography preferences
      description: Retrieves the current font size settings for the specified user
        to support adjustable text sizes across the app.
      operationId: getUserTypographyPreferences
      tags:
      - UserPreferences
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Typography preferences retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TypographyPreferencesResponse'
        '401':
          description: Unauthorized - Missing or invalid authentication token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or preferences not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve preferences
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update user typography preferences
      description: Updates the user's font size settings to support adjustable text
        sizes across the app.
      operationId: updateUserTypographyPreferences
      tags:
      - UserPreferences
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTypographyPreferencesRequest'
      responses:
        '200':
          description: OK - Typography preferences updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TypographyPreferencesResponse'
        '400':
          description: Bad Request - Invalid fontScale or preset value
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid authentication token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update preferences
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/app/accessibility/contrast-requirements:
    get:
      summary: Get contrast requirements
      description: Provides the system's minimum contrast requirements to ensure sufficient
        color contrast across clients.
      operationId: getContrastRequirements
      tags:
      - Accessibility
      - AppConfig
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetContrastRequirementsRequest'
      responses:
        '200':
          description: OK - Contrast requirements returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContrastRequirementsResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve requirements
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/voice-messages/{voiceMessageId}/transcriptions:
    post:
      summary: Create transcription for a voice message
      description: Creates a transcription job for the specified voice message and
        returns the transcription resource in processing state.
      operationId: createVoiceMessageTranscription
      tags:
      - Transcriptions
      parameters:
      - name: voiceMessageId
        in: path
        required: true
        description: Voice message ID to transcribe
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTranscriptionRequest'
      responses:
        '201':
          description: Created - Transcription job created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TranscriptionResponse'
        '400':
          description: Bad Request - Invalid voiceMessageId or parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to access this voice message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Voice message does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Transcription already exists for this voice message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Audio cannot be transcribed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to create transcription job
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List transcriptions for a voice message
      description: Returns a paginated list of transcriptions for the specified voice
        message.
      operationId: listVoiceMessageTranscriptions
      tags:
      - Transcriptions
      parameters:
      - name: voiceMessageId
        in: path
        required: true
        description: Voice message ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListTranscriptionsRequest'
      responses:
        '200':
          description: OK - Transcription list retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedTranscriptionListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to access this voice message
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Voice message does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to list transcriptions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/transcriptions/{transcriptionId}:
    get:
      summary: Get transcription by ID
      description: Returns the transcription resource including status and text when
        available.
      operationId: getTranscriptionById
      tags:
      - Transcriptions
      parameters:
      - name: transcriptionId
        in: path
        required: true
        description: Transcription ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetTranscriptionRequest'
      responses:
        '200':
          description: OK - Transcription retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TranscriptionResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Not allowed to access this transcription
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Transcription does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve transcription
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/offline-queues:
    post:
      summary: Create offline queue
      description: Creates a device-scoped offline message queue to store encrypted
        events while the client is offline.
      operationId: createOfflineQueue
      tags:
      - Offline
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOfflineQueueRequest'
      responses:
        '201':
          description: Created - Offline queue initialized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OfflineQueueResponse'
        '400':
          description: Bad Request - Missing or invalid deviceId/clientPublicKey
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Queue already exists for device
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/offline-queues/{queueId}/messages:
    post:
      summary: Enqueue offline message
      description: Stores an end-to-end encrypted message/event in the offline queue
        for later delivery.
      operationId: enqueueOfflineMessage
      tags:
      - Offline
      - Messages
      parameters:
      - name: queueId
        in: path
        required: true
        description: Offline queue ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnqueueOfflineMessageRequest'
      responses:
        '201':
          description: Created - Message queued for offline delivery
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnqueueOfflineMessageResponse'
        '400':
          description: Bad Request - Invalid ciphertext or metadata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Queue does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List queued messages
      description: Retrieves queued messages for a device to enable offline synchronization.
        Supports pagination.
      operationId: listQueuedMessages
      tags:
      - Offline
      - Messages
      parameters:
      - name: queueId
        in: path
        required: true
        description: Offline queue ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListQueuedMessagesRequest'
      responses:
        '200':
          description: OK - Queued messages retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedListQueuedMessagesResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Queue does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/offline-queues/{queueId}/messages/ack:
    post:
      summary: Acknowledge queued messages
      description: Acknowledges delivery of queued messages to remove them from the
        offline queue.
      operationId: ackQueuedMessages
      tags:
      - Offline
      - Messages
      parameters:
      - name: queueId
        in: path
        required: true
        description: Offline queue ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AckQueuedMessagesRequest'
      responses:
        '200':
          description: OK - Messages acknowledged
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AckQueuedMessagesResponse'
        '400':
          description: Bad Request - Invalid messageIds
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Queue does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/offline-queues/{queueId}:
    delete:
      summary: Delete offline queue
      description: Deletes an offline queue and all queued messages for the device.
      operationId: deleteOfflineQueue
      tags:
      - Offline
      parameters:
      - name: queueId
        in: path
        required: true
        description: Offline queue ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteOfflineQueueRequest'
      responses:
        '200':
          description: OK - Queue deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteOfflineQueueResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Queue does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/startup-resources:
    get:
      summary: Fetch startup resources for fast app launch
      description: Returns a compact bootstrap payload required for a fast app start,
        including configuration, limits, and endpoints needed to initialize the app
        quickly. Supports delta updates via a sync token to minimize payload size.
      operationId: getStartupResources
      tags:
      - Startup
      parameters:
      - name: syncToken
        in: query
        required: false
        description: Token for fetching only changes since the last startup sync
        schema:
          type: string
      - name: locale
        in: query
        required: false
        description: Client locale for localized configuration values
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetStartupResourcesRequest'
      responses:
        '200':
          description: OK - Startup resources returned successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StartupResourcesResponse'
        '400':
          description: Bad Request - Invalid query parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected error while preparing startup
            resources
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages/sync:
    get:
      summary: Synchronize new and updated messages
      description: Returns a delta of messages since the last sync, optimized for
        mobile clients and offline queues. Supports pagination for efficient batching.
      operationId: getMessagesSync
      tags:
      - Messages
      parameters:
      - name: since
        in: query
        required: false
        description: ISO-8601 timestamp of the last successful sync
        schema:
          type: string
      - name: cursor
        in: query
        required: false
        description: Opaque cursor for delta pagination
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of records per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MessagesSyncRequest'
      responses:
        '200':
          description: OK - Sync delta retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedMessagesSyncResponse'
        '400':
          description: Bad Request - Invalid pagination or sync parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Sync rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to process sync
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/messages/sync/ack:
    post:
      summary: Acknowledge synchronized messages
      description: Confirms receipt and processing of synchronized messages to support
        efficient delta sync and offline queues.
      operationId: acknowledgeMessagesSync
      tags:
      - Messages
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MessagesSyncAckRequest'
      responses:
        '201':
          description: Created - Acknowledgment recorded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessagesSyncAckResponse'
        '400':
          description: Bad Request - Invalid message IDs or timestamp
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Acknowledgment state conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to record acknowledgment
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/conversations/sync:
    get:
      summary: Synchronize conversation metadata
      description: Returns delta updates for conversations (e.g., membership changes,
        titles, last message references) to keep clients in sync efficiently.
      operationId: getConversationsSync
      tags:
      - Conversations
      parameters:
      - name: since
        in: query
        required: false
        description: ISO-8601 timestamp of the last successful sync
        schema:
          type: string
      - name: cursor
        in: query
        required: false
        description: Opaque cursor for delta pagination
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of records per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConversationsSyncRequest'
      responses:
        '200':
          description: OK - Conversation delta retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedConversationsSyncResponse'
        '400':
          description: Bad Request - Invalid pagination or sync parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Sync rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to process sync
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/power-policy:
    get:
      summary: Retrieve server power policy
      description: Provides server-recommended battery optimization policies such
        as sync intervals, websocket keepalive, and background fetch limits to enable
        battery-efficient operation.
      operationId: getPowerPolicy
      tags:
      - PowerPolicy
      responses:
        '200':
          description: OK - Power policy retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PowerPolicyResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '503':
          description: Service Unavailable - Power policy temporarily unavailable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/power-settings:
    get:
      summary: Get user battery settings
      description: Returns the user's battery efficiency preferences to minimize background
        activity and data usage.
      operationId: getUserPowerSettings
      tags:
      - UserPowerSettings
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      responses:
        '200':
          description: OK - User power settings retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserPowerSettingsResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update user battery settings
      description: Updates the user's battery efficiency preferences to control background
        activity and data usage.
      operationId: updateUserPowerSettings
      tags:
      - UserPowerSettings
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserPowerSettingsRequest'
      responses:
        '200':
          description: OK - User power settings updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserPowerSettingsResponse'
        '400':
          description: Bad Request - Invalid settings payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/clients/power-state:
    post:
      summary: Report client power state
      description: Allows clients to report battery and power state to optimize server-side
        push behavior and reduce unnecessary background activity.
      operationId: reportClientPowerState
      tags:
      - ClientPowerState
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClientPowerStateRequest'
      responses:
        '201':
          description: Created - Client power state recorded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientPowerStateResponse'
        '400':
          description: Bad Request - Missing or invalid power state data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate power state report
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/storage/cleanup:
    post:
      summary: Trigger storage cleanup
      description: Initiates server-side cleanup of expired, redundant, or cached
        data to improve storage efficiency.
      operationId: triggerStorageCleanup
      tags:
      - Storage
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StorageCleanupRequest'
      responses:
        '201':
          description: Created - Cleanup job accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StorageCleanupResponse'
        '400':
          description: Bad Request - Invalid cleanup parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to trigger cleanup
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Cleanup already running for this scope
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to schedule cleanup
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/storage/retention-policy:
    put:
      summary: Update retention policy
      description: Configures retention and lifecycle policies to minimize storage
        usage, including maximum status duration and media retention.
      operationId: updateRetentionPolicy
      tags:
      - Storage
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RetentionPolicyRequest'
      responses:
        '200':
          description: OK - Retention policy updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RetentionPolicyResponse'
        '400':
          description: Bad Request - Invalid retention parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to update policy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Retention policy violates system constraints
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update retention policy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/share-extensions:
    post:
      summary: Create share-extension payload
      description: Creates a share-extension payload that will be encrypted end-to-end
        (Signal Protocol) and queued for offline delivery if needed.
      operationId: createShareExtension
      tags:
      - ShareExtension
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateShareExtensionRequest'
      responses:
        '201':
          description: Created - Share payload created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShareExtensionResponse'
        '400':
          description: Bad Request - Missing or invalid fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Target constraints violated (group/broadcast limits)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Exceeds allowed media size
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - E2E encryption metadata invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to create share payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/share-extensions/{shareId}/attachments:
    post:
      summary: Upload share-extension media
      description: Uploads media for a share-extension payload. Enforces max sizes
        (documents 2GB, images 16MB). Media will be encrypted end-to-end by the client.
      operationId: uploadShareExtensionAttachment
      tags:
      - ShareExtension
      - Media
      parameters:
      - name: shareId
        in: path
        required: true
        description: Share payload identifier
        schema:
          type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ShareExtensionAttachmentUploadRequest'
      responses:
        '201':
          description: Created - Attachment uploaded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShareExtensionAttachmentResponse'
        '400':
          description: Bad Request - Missing or invalid fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Share payload not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '413':
          description: Payload Too Large - Exceeds allowed media size
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '415':
          description: Unsupported Media Type - Invalid media type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to upload attachment
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/share-extensions/{shareId}/dispatch:
    post:
      summary: Dispatch share-extension payload
      description: Dispatches the share-extension payload to the target via WebSocket
        when online or queue when offline.
      operationId: dispatchShareExtension
      tags:
      - ShareExtension
      parameters:
      - name: shareId
        in: path
        required: true
        description: Share payload identifier
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DispatchShareExtensionRequest'
      responses:
        '201':
          description: Created - Dispatch initiated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DispatchShareExtensionResponse'
        '400':
          description: Bad Request - Missing or invalid fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Share payload not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Share payload already dispatched
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to dispatch share payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/share-extensions/targets:
    get:
      summary: List available share targets
      description: Returns a paginated list of chats, groups, and broadcast lists
        available for sharing, respecting membership limits.
      operationId: listShareTargets
      tags:
      - ShareExtension
      parameters:
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      - name: type
        in: query
        required: false
        description: 'Filter by target type: chat, group, broadcast'
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListShareTargetsRequest'
      responses:
        '200':
          description: OK - Share targets retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedListShareTargetsResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve targets
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/voiceAssistants:
    get:
      summary: List supported voice assistants
      description: Returns the list of supported voice assistant providers (e.g.,
        Siri, Google Assistant) and their integration status.
      operationId: listVoiceAssistants
      tags:
      - VoiceAssistants
      security: []
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListVoiceAssistantsRequest'
      responses:
        '200':
          description: OK - Providers returned successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedVoiceAssistantsListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve providers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/voiceAssistantLinks:
    get:
      summary: List linked voice assistant accounts
      description: Returns the user's linked voice assistant accounts.
      operationId: listVoiceAssistantLinks
      tags:
      - VoiceAssistants
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListVoiceAssistantLinksRequest'
      responses:
        '200':
          description: OK - Linked accounts returned successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedVoiceAssistantLinksListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve links
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    post:
      summary: Create a voice assistant account link
      description: Links a user account with a voice assistant provider using OAuth
        authorization code.
      operationId: createVoiceAssistantLink
      tags:
      - VoiceAssistants
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateVoiceAssistantLinkRequest'
      responses:
        '201':
          description: Created - Account linked successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoiceAssistantLinkResponse'
        '400':
          description: Bad Request - Invalid provider or authorization code
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Account already linked for provider
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '502':
          description: Bad Gateway - Provider token exchange failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/voiceAssistantLinks/{linkId}:
    delete:
      summary: Remove a voice assistant account link
      description: Unlinks the user's account from the specified voice assistant provider.
      operationId: deleteVoiceAssistantLink
      tags:
      - VoiceAssistants
      parameters:
      - name: linkId
        in: path
        required: true
        description: Unique link identifier
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteVoiceAssistantLinkRequest'
      responses:
        '200':
          description: OK - Account unlinked successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteVoiceAssistantLinkResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Link identifier does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to unlink account
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/voiceAssistantCommands:
    post:
      summary: Execute a voice assistant command
      description: Processes a command issued via a voice assistant to perform actions
        such as send message, start call, or read status.
      operationId: createVoiceAssistantCommand
      tags:
      - VoiceAssistants
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateVoiceAssistantCommandRequest'
      responses:
        '201':
          description: Created - Command accepted for processing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoiceAssistantCommandResponse'
        '400':
          description: Bad Request - Invalid intent or parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate clientRequestId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '503':
          description: Service Unavailable - Command processing unavailable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/voiceAssistants/{provider}/webhooks:
    post:
      summary: Receive voice assistant webhook events
      description: Public webhook endpoint to receive events and intents from the
        specified voice assistant provider.
      operationId: receiveVoiceAssistantWebhook
      tags:
      - VoiceAssistants
      security: []
      parameters:
      - name: provider
        in: path
        required: true
        description: Voice assistant provider identifier
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VoiceAssistantWebhookRequest'
      responses:
        '200':
          description: OK - Webhook processed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoiceAssistantWebhookResponse'
        '400':
          description: Bad Request - Invalid webhook payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Invalid or missing signature
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate eventId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Webhook processing failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/widgets:
    get:
      summary: List home-screen widgets
      description: Returns a paginated list of widgets configured for the authenticated
        user.
      operationId: listWidgets
      tags:
      - Widgets
      parameters:
      - name: page
        in: query
        required: true
        description: Page number (starting at 1)
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      responses:
        '200':
          description: OK - Widgets retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedWidgetListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to retrieve widgets
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    post:
      summary: Create a home-screen widget
      description: Creates a new widget configuration for the authenticated user.
      operationId: createWidget
      tags:
      - Widgets
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWidgetRequest'
      responses:
        '201':
          description: Created - Widget created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetResponse'
        '400':
          description: Bad Request - Missing or invalid widget data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Widget with same position already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to create widget
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/widgets/{widgetId}:
    get:
      summary: Get a widget
      description: Retrieves a single widget configuration by ID.
      operationId: getWidget
      tags:
      - Widgets
      parameters:
      - name: widgetId
        in: path
        required: true
        description: Widget ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Widget retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Widget does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to retrieve widget
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update a widget
      description: Updates an existing widget configuration by ID.
      operationId: updateWidget
      tags:
      - Widgets
      parameters:
      - name: widgetId
        in: path
        required: true
        description: Widget ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateWidgetRequest'
      responses:
        '200':
          description: OK - Widget updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WidgetResponse'
        '400':
          description: Bad Request - Invalid widget update data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Widget does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Widget position already in use
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to update widget
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete a widget
      description: Removes a widget configuration by ID.
      operationId: deleteWidget
      tags:
      - Widgets
      parameters:
      - name: widgetId
        in: path
        required: true
        description: Widget ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Widget deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteWidgetResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Widget does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to delete widget
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/watch-devices:
    post:
      summary: Register smartwatch device
      description: Registers a smartwatch for a user and establishes an encrypted
        integration context for mobile-first clients.
      operationId: createWatchDevice
      tags:
      - WatchDevices
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWatchDeviceRequest'
      responses:
        '201':
          description: Created - Smartwatch registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WatchDeviceResponse'
        '400':
          description: Bad Request - Missing or invalid device fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Device already registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List registered smartwatches
      description: Returns paginated list of smartwatches linked to the user.
      operationId: listWatchDevices
      tags:
      - WatchDevices
      parameters:
      - name: page
        in: query
        required: true
        description: Page number
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListWatchDevicesRequest'
      responses:
        '200':
          description: OK - List of smartwatches returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedWatchDeviceListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/watch-devices/{id}/pair:
    post:
      summary: Pair smartwatch
      description: Initiates secure pairing using Signal Protocol metadata for end-to-end
        encryption.
      operationId: pairWatchDevice
      tags:
      - WatchDevices
      parameters:
      - name: id
        in: path
        required: true
        description: Smartwatch device ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PairWatchDeviceRequest'
      responses:
        '201':
          description: Created - Pairing initiated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PairWatchDeviceResponse'
        '400':
          description: Bad Request - Invalid pairing code or key bundle
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Smartwatch not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Device already paired
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/watch-devices/{id}/sync:
    post:
      summary: Sync smartwatch data
      description: Synchronizes messages and state with offline queue support for
        smartwatch integration.
      operationId: syncWatchDevice
      tags:
      - WatchDevices
      parameters:
      - name: id
        in: path
        required: true
        description: Smartwatch device ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SyncWatchDeviceRequest'
      responses:
        '201':
          description: Created - Sync processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SyncWatchDeviceResponse'
        '400':
          description: Bad Request - Invalid sync payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Smartwatch not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Sync version mismatch
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/watch-devices/{id}/notifications:
    post:
      summary: Send notification to smartwatch
      description: Sends an encrypted notification payload to the smartwatch.
      operationId: sendWatchNotification
      tags:
      - WatchDevices
      parameters:
      - name: id
        in: path
        required: true
        description: Smartwatch device ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendWatchNotificationRequest'
      responses:
        '201':
          description: Created - Notification queued
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SendWatchNotificationResponse'
        '400':
          description: Bad Request - Invalid encrypted payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Smartwatch not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Notification rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/watch-devices/{id}/settings:
    put:
      summary: Update smartwatch settings
      description: Updates smartwatch integration preferences for notifications and
        call handling.
      operationId: updateWatchDeviceSettings
      tags:
      - WatchDevices
      parameters:
      - name: id
        in: path
        required: true
        description: Smartwatch device ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateWatchDeviceSettingsRequest'
      responses:
        '200':
          description: OK - Settings updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateWatchDeviceSettingsResponse'
        '400':
          description: Bad Request - Invalid settings payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Smartwatch not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/desktop-apps:
    get:
      summary: List desktop app releases
      description: Returns a paginated list of available native desktop application
        releases for supported platforms (Windows, macOS, Linux).
      operationId: listDesktopAppReleases
      tags:
      - DesktopApps
      security: []
      parameters:
      - name: platform
        in: query
        required: false
        description: Filter by platform (windows, macos, linux)
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListDesktopAppReleasesRequest'
      responses:
        '200':
          description: OK - Desktop app releases retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedDesktopAppReleaseListResponse'
        '400':
          description: Bad Request - Invalid pagination or filter parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to retrieve releases
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/desktop-apps/{releaseId}:
    get:
      summary: Get desktop app release details
      description: Returns metadata for a specific desktop app release including download
        URL and checksum.
      operationId: getDesktopAppRelease
      tags:
      - DesktopApps
      security: []
      parameters:
      - name: releaseId
        in: path
        required: true
        description: Release ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetDesktopAppReleaseRequest'
      responses:
        '200':
          description: OK - Desktop app release retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DesktopAppReleaseResponse'
        '404':
          description: Not Found - Release ID does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to retrieve release
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/desktop-apps/check-update:
    post:
      summary: Check for desktop app updates
      description: Checks whether a newer desktop app release is available for the
        given platform and current version.
      operationId: checkDesktopAppUpdate
      tags:
      - DesktopApps
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CheckDesktopAppUpdateRequest'
      responses:
        '201':
          description: Created - Update check processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CheckDesktopAppUpdateResponse'
        '400':
          description: Bad Request - Missing or invalid platform or version
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unable to check updates
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/web/clients/config:
    get:
      summary: Get web client configuration
      description: Returns configuration required for the web version including feature
        flags and limits for groups, broadcasts, media sizes, and status duration.
      operationId: getWebClientConfig
      tags:
      - WebClient
      responses:
        '200':
          description: OK - Configuration returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebClientConfigResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '503':
          description: Service Unavailable - Configuration service unavailable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/web/sessions:
    post:
      summary: Create a web session
      description: Creates a web session for the authenticated user to use the web
        version on a specific browser/device.
      operationId: createWebSession
      tags:
      - WebSession
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWebSessionRequest'
      responses:
        '201':
          description: Created - Web session created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebSessionResponse'
        '400':
          description: Bad Request - Invalid session parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Session already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/web/sessions/{sessionId}/websocket-tokens:
    post:
      summary: Issue WebSocket token
      description: Issues a short-lived token for establishing an authenticated WebSocket
        connection for real-time communication.
      operationId: createWebSocketToken
      tags:
      - WebSession
      - WebSocket
      parameters:
      - name: sessionId
        in: path
        required: true
        description: Web session ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWebSocketTokenRequest'
      responses:
        '201':
          description: Created - WebSocket token issued
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebSocketTokenResponse'
        '400':
          description: Bad Request - Invalid nonce
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Session does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/web/sessions/{sessionId}/webrtc-tokens:
    post:
      summary: Issue WebRTC credentials
      description: Issues TURN/STUN credentials required to establish WebRTC voice/video
        calls.
      operationId: createWebRtcToken
      tags:
      - WebSession
      - WebRTC
      parameters:
      - name: sessionId
        in: path
        required: true
        description: Web session ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWebRtcTokenRequest'
      responses:
        '201':
          description: Created - WebRTC credentials issued
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebRtcTokenResponse'
        '400':
          description: Bad Request - Invalid call type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Session does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/queues:
    get:
      summary: Fetch offline queued messages
      description: Retrieves messages queued while the web client was offline. Supports
        pagination.
      operationId: listOfflineQueueMessages
      tags:
      - OfflineQueue
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      responses:
        '200':
          description: OK - Queued messages returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedOfflineQueueListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '503':
          description: Service Unavailable - Queue service unavailable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/queues/ack:
    post:
      summary: Acknowledge offline queue messages
      description: Acknowledges delivery of queued messages so they can be removed
        from the offline queue.
      operationId: ackOfflineQueueMessages
      tags:
      - OfflineQueue
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AckOfflineQueueRequest'
      responses:
        '201':
          description: Created - Acknowledgements recorded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AckOfflineQueueResponse'
        '400':
          description: Bad Request - Invalid queue IDs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - One or more queue items do not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/ai-chats:
    post:
      summary: Create AI chat session
      description: Creates a new AI assistant chat session for a user to exchange
        end-to-end encrypted messages.
      operationId: createAiChat
      tags:
      - AiChats
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAiChatRequest'
      responses:
        '201':
          description: Created - AI chat session created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AiChatResponse'
        '400':
          description: Bad Request - Missing or invalid assistantId or signalSessionSetup
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - AI chat session already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/ai-chats/{chatId}/messages:
    post:
      summary: Send encrypted message to AI assistant
      description: Queues an end-to-end encrypted message to the AI assistant. Supports
        offline message queueing.
      operationId: createAiChatMessage
      tags:
      - AiChatMessages
      parameters:
      - name: chatId
        in: path
        required: true
        description: AI chat session ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAiChatMessageRequest'
      responses:
        '201':
          description: Created - Message accepted and queued
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AiChatMessageResponse'
        '400':
          description: Bad Request - Missing ciphertext or invalid attachment references
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - AI chat session not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Duplicate clientMessageId
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: List AI chat messages
      description: Retrieves encrypted messages in an AI chat session with pagination.
      operationId: listAiChatMessages
      tags:
      - AiChatMessages
      parameters:
      - name: chatId
        in: path
        required: true
        description: AI chat session ID
        schema:
          type: string
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListAiChatMessagesRequest'
      responses:
        '200':
          description: OK - Messages retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedAiChatMessageListResponse'
        '400':
          description: Bad Request - Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - AI chat session not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/conversations/{conversationId}/smart-replies:
    post:
      summary: Generate smart reply suggestions
      description: Generiert intelligente Antwortvorschlaege fuer eine Unterhaltung
        unter Beruecksichtigung der Ende-zu-Ende-Verschluesselung. Der Client uebermittelt
        verschluesselten Kontext; der Server liefert verschluesselte Vorschlaege zur
        Rueckgabe an den Client.
      operationId: createSmartReplies
      tags:
      - SmartReplies
      parameters:
      - name: conversationId
        in: path
        required: true
        description: Eindeutige ID der Unterhaltung
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSmartRepliesRequest'
      responses:
        '201':
          description: Created - Smart reply suggestions generated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SmartRepliesResponse'
        '400':
          description: Bad Request - Missing or invalid encrypted context
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Conversation does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Unprocessable Entity - Context format not supported
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Rate limit exceeded for smart reply generation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Smart reply generation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/sticker-suggestions:
    post:
      summary: Get context-based sticker suggestions
      description: Generates sticker suggestions based on encrypted conversational
        context, message metadata, and optional user input. Designed for mobile-first
        clients with offline queue support and end-to-end encrypted content.
      operationId: createStickerSuggestions
      tags:
      - Stickers
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StickerSuggestionsRequest'
      responses:
        '200':
          description: OK - Sticker suggestions generated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StickerSuggestionsResponse'
        '400':
          description: Bad Request - Missing or invalid context parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid access token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Conversation access not permitted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too Many Requests - Rate limit exceeded for suggestions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to generate sticker suggestions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{id}/preferences/localization:
    get:
      summary: Get user localization preferences
      description: Retrieves the user's localization settings including language and
        text direction to support full RTL rendering across clients.
      operationId: getUserLocalizationPreferences
      tags:
      - Users
      - Localization
      parameters:
      - name: id
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetUserLocalizationPreferencesRequest'
      responses:
        '200':
          description: OK - Preferences retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserLocalizationPreferencesResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or preferences not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update user localization preferences
      description: Updates the user's localization settings to ensure full RTL language
        support across mobile and web clients.
      operationId: updateUserLocalizationPreferences
      tags:
      - Users
      - Localization
      parameters:
      - name: id
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserLocalizationPreferencesRequest'
      responses:
        '200':
          description: OK - Preferences updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateUserLocalizationPreferencesResponse'
        '400':
          description: Bad Request - Invalid language tag or text direction
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/locales:
    get:
      summary: List supported locales
      description: Returns supported locales and whether each locale is RTL or LTR
        for client-side rendering and layout decisions.
      operationId: listSupportedLocales
      tags:
      - Localization
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListSupportedLocalesRequest'
      responses:
        '200':
          description: OK - Supported locales retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedListSupportedLocalesResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/regional-formats:
    get:
      summary: List supported regional formats
      description: Retrieves a paginated list of supported regional formats (locales)
        including date, time, number, and timezone patterns to allow clients to render
        content according to regional conventions.
      operationId: listRegionalFormats
      tags:
      - RegionalFormats
      parameters:
      - name: page
        in: query
        required: true
        description: Page number for pagination
        schema:
          type: integer
      - name: pageSize
        in: query
        required: true
        description: Number of items per page
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListRegionalFormatsRequest'
      responses:
        '200':
          description: OK - Supported regional formats retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedRegionalFormatsListResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Insufficient permissions to view regional formats
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve regional formats
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/users/{userId}/regional-formats:
    get:
      summary: Get user regional format preferences
      description: Retrieves the user's regional format preferences to ensure dates,
        times, numbers, and timezones are rendered according to the user's locale.
      operationId: getUserRegionalFormats
      tags:
      - UserPreferences
      - RegionalFormats
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetUserRegionalFormatsRequest'
      responses:
        '200':
          description: OK - User regional formats retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserRegionalFormatsResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Cannot access another user's preferences
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User or regional formats not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to retrieve user regional formats
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update user regional format preferences
      description: Updates the user's regional format preferences to ensure consistent
        locale-specific rendering across devices (mobile-first).
      operationId: updateUserRegionalFormats
      tags:
      - UserPreferences
      - RegionalFormats
      parameters:
      - name: userId
        in: path
        required: true
        description: User ID
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRegionalFormatsRequest'
      responses:
        '200':
          description: OK - User regional formats updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateUserRegionalFormatsResponse'
        '400':
          description: Bad Request - Invalid locale or format pattern
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden - Cannot update another user's preferences
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Conflict - Locale not supported
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Failed to update user regional formats
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/sticker-packs/{stickerPackId}:
    get:
      summary: Get sticker pack details
      description: Retrieves detailed information about a specific sticker pack, including
        sticker metadata and asset URLs.
      operationId: getStickerPack
      tags:
      - StickerPacks
      parameters:
      - name: stickerPackId
        in: path
        required: true
        description: Sticker pack ID
        schema:
          type: string
      responses:
        '200':
          description: OK - Sticker pack retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StickerPackResponse'
        '400':
          description: Bad Request - Invalid stickerPackId format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found - Sticker pack does not exist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error - Unexpected error while retrieving the
            sticker pack
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
components:
  schemas:
    CreatePhoneRegistrationRequest:
      type: object
      properties:
        phoneNumber:
          type: string
          description: Phone number in E.164 format
        deviceId:
          type: string
          description: Client device identifier
        locale:
          type: string
          description: User locale for SMS/voice messages
        deliveryChannel:
          type: string
          description: 'OTP delivery channel: sms or voice'
      required:
      - phoneNumber
      - deviceId
      - deliveryChannel
    CreatePhoneRegistrationResponse:
      type: object
      properties:
        registrationId:
          type: string
          description: Registration session identifier
        expiresInSeconds:
          type: integer
          description: Time until OTP expires
        status:
          type: string
          description: Registration status (pending)
    VerifyPhoneRegistrationRequest:
      type: object
      properties:
        otp:
          type: string
          description: One-time verification code
        devicePublicKey:
          type: string
          description: Client device public key for E2E encryption initialization
      required:
      - otp
      - devicePublicKey
    VerifyPhoneRegistrationResponse:
      type: object
      properties:
        userId:
          type: string
          description: Created user identifier
        accessToken:
          type: string
          description: JWT access token
        refreshToken:
          type: string
          description: Refresh token
        status:
          type: string
          description: Verification status (verified)
    ResendPhoneRegistrationOtpRequest:
      type: object
      properties:
        deliveryChannel:
          type: string
          description: 'OTP delivery channel: sms or voice'
      required:
      - deliveryChannel
    ResendPhoneRegistrationOtpResponse:
      type: object
      properties:
        expiresInSeconds:
          type: integer
          description: Time until OTP expires
        status:
          type: string
          description: Resend status (pending)
    EnableTwoFactorRequest:
      type: object
      properties:
        pin:
          type: string
          description: 6-digit PIN for 2FA
          minLength: 6
          maxLength: 6
      required:
      - pin
    EnableTwoFactorResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        twoFactorEnabled:
          type: boolean
          description: Indicates whether 2FA is enabled
    DisableTwoFactorRequest:
      type: object
      properties:
        pin:
          type: string
          description: 6-digit PIN to confirm disabling 2FA
          minLength: 6
          maxLength: 6
      required:
      - pin
    DisableTwoFactorResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        twoFactorEnabled:
          type: boolean
          description: Indicates whether 2FA is enabled
    VerifyTwoFactorRequest:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        pin:
          type: string
          description: 6-digit PIN for 2FA verification
          minLength: 6
          maxLength: 6
        loginSessionId:
          type: string
          description: Login session ID issued after primary authentication
      required:
      - userId
      - pin
      - loginSessionId
    VerifyTwoFactorResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        verified:
          type: boolean
          description: Indicates whether 2FA verification succeeded
        accessToken:
          type: string
          description: Access token issued after successful 2FA verification
    GetTwoFactorStatusRequest:
      type: object
      properties: {}
    GetTwoFactorStatusResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        twoFactorEnabled:
          type: boolean
          description: Indicates whether 2FA is enabled
    BiometricRegistrationOptionsRequest:
      type: object
      properties:
        deviceId:
          type: string
          description: Unique device identifier
        platform:
          type: string
          description: Client platform (ios|android)
        deviceName:
          type: string
          description: Human-readable device name
      required:
      - deviceId
      - platform
    BiometricRegistrationOptionsResponse:
      type: object
      properties:
        challenge:
          type: string
          description: Base64Url-encoded registration challenge
        rpId:
          type: string
          description: Relying party identifier
        userId:
          type: string
          description: User identifier for WebAuthn
        timeoutMs:
          type: integer
          description: Challenge timeout in milliseconds
    CreateBiometricCredentialRequest:
      type: object
      properties:
        deviceId:
          type: string
          description: Unique device identifier
        attestationObject:
          type: string
          description: Base64Url-encoded WebAuthn attestation object
        clientDataJSON:
          type: string
          description: Base64Url-encoded client data JSON
        credentialId:
          type: string
          description: Base64Url-encoded credential identifier
      required:
      - deviceId
      - attestationObject
      - clientDataJSON
      - credentialId
    CreateBiometricCredentialResponse:
      type: object
      properties:
        id:
          type: string
          description: Biometric credential ID
        deviceId:
          type: string
          description: Associated device identifier
        createdAt:
          type: string
          description: ISO-8601 timestamp when the credential was created
    ListBiometricCredentialsRequest:
      type: object
      properties: {}
    ListBiometricCredentialsResponse:
      type: object
      properties:
        items:
          type: array
          description: List of biometric credentials
          items:
            type: object
            description: Biometric credential summary
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of credentials
    DeleteBiometricCredentialRequest:
      type: object
      properties: {}
    DeleteBiometricCredentialResponse:
      type: object
      properties:
        deleted:
          type: boolean
          description: Indicates whether the credential was deleted
    BiometricAuthenticationOptionsRequest:
      type: object
      properties:
        username:
          type: string
          description: User identifier (e.g., phone or email)
        deviceId:
          type: string
          description: Unique device identifier
      required:
      - username
      - deviceId
    BiometricAuthenticationOptionsResponse:
      type: object
      properties:
        challenge:
          type: string
          description: Base64Url-encoded authentication challenge
        rpId:
          type: string
          description: Relying party identifier
        timeoutMs:
          type: integer
          description: Challenge timeout in milliseconds
    BiometricAuthenticateRequest:
      type: object
      properties:
        credentialId:
          type: string
          description: Base64Url-encoded credential identifier
        authenticatorData:
          type: string
          description: Base64Url-encoded authenticator data
        clientDataJSON:
          type: string
          description: Base64Url-encoded client data JSON
        signature:
          type: string
          description: Base64Url-encoded assertion signature
        deviceId:
          type: string
          description: Unique device identifier
      required:
      - credentialId
      - authenticatorData
      - clientDataJSON
      - signature
      - deviceId
    BiometricAuthenticateResponse:
      type: object
      properties:
        accessToken:
          type: string
          description: JWT access token
        refreshToken:
          type: string
          description: Refresh token
        expiresIn:
          type: integer
          description: Access token expiration in seconds
    RegisterDeviceRequest:
      type: object
      properties:
        deviceName:
          type: string
          description: Human-readable device name
        platform:
          type: string
          description: Device platform (ios, android, web)
        deviceFingerprint:
          type: string
          description: Unique device fingerprint
        identityKey:
          type: string
          description: Signal Protocol identity key (base64)
        registrationId:
          type: integer
          description: Signal Protocol registration ID
        pushToken:
          type: string
          description: Push notification token for the device
        websocketCapable:
          type: boolean
          description: Whether device supports WebSocket connectivity
      required:
      - deviceName
      - platform
      - deviceFingerprint
      - identityKey
      - registrationId
    DeviceResponse:
      type: object
      properties:
        id:
          type: string
          description: Device ID
        deviceName:
          type: string
          description: Human-readable device name
        platform:
          type: string
          description: Device platform
        deviceFingerprint:
          type: string
          description: Unique device fingerprint
        createdAt:
          type: string
          description: Device registration timestamp (ISO 8601)
        lastSeenAt:
          type: string
          description: Last seen timestamp (ISO 8601)
    ListDevicesRequest:
      type: object
      properties: {}
    DeviceListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of devices
          items:
            type: object
            properties:
              id:
                type: string
                description: Device ID
              deviceName:
                type: string
                description: Human-readable device name
              platform:
                type: string
                description: Device platform
              deviceFingerprint:
                type: string
                description: Unique device fingerprint
              createdAt:
                type: string
                description: Device registration timestamp (ISO 8601)
              lastSeenAt:
                type: string
                description: Last seen timestamp (ISO 8601)
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of devices
    GetDeviceRequest:
      type: object
      properties: {}
    UpdateDeviceRequest:
      type: object
      properties:
        deviceName:
          type: string
          description: Updated device name
        pushToken:
          type: string
          description: Updated push notification token
        websocketCapable:
          type: boolean
          description: Updated WebSocket capability flag
    RevokeDeviceRequest:
      type: object
      properties: {}
    RevokeDeviceResponse:
      type: object
      properties:
        id:
          type: string
          description: Revoked device ID
        revokedAt:
          type: string
          description: Revocation timestamp (ISO 8601)
    UploadPrekeysRequest:
      type: object
      properties:
        signedPreKey:
          type: string
          description: Signed pre-key (base64)
        signedPreKeySignature:
          type: string
          description: Signature for signed pre-key (base64)
        oneTimePreKeys:
          type: array
          description: Array of one-time pre-keys (base64)
          items:
            type: string
      required:
      - signedPreKey
      - signedPreKeySignature
      - oneTimePreKeys
    UploadPrekeysResponse:
      type: object
      properties:
        deviceId:
          type: string
          description: Device ID
        uploadedOneTimePreKeys:
          type: integer
          description: Number of one-time pre-keys uploaded
    PasskeyRegistrationOptionsRequest:
      type: object
      properties:
        username:
          type: string
          description: Unique username or handle for the user
        displayName:
          type: string
          description: Human-readable display name
        deviceId:
          type: string
          description: Client device identifier for risk checks and allow-listing
        platform:
          type: string
          description: Client platform (ios, android, web)
      required:
      - username
      - displayName
      - deviceId
      - platform
    PasskeyRegistrationOptionsResponse:
      type: object
      properties:
        challenge:
          type: string
          description: Base64URL-encoded challenge
        rp:
          type: object
          description: Relying party information
          properties:
            id:
              type: string
              description: RP ID
            name:
              type: string
              description: RP name
        user:
          type: object
          description: User information
          properties:
            id:
              type: string
              description: User handle (base64url)
            name:
              type: string
              description: Username
            displayName:
              type: string
              description: Display name
        pubKeyCredParams:
          type: array
          description: Supported public key credential parameters
        timeout:
          type: integer
          description: Timeout in milliseconds
        attestation:
          type: string
          description: Attestation conveyance preference
    PasskeyRegistrationVerifyRequest:
      type: object
      properties:
        username:
          type: string
          description: Unique username or handle
        credential:
          type: object
          description: WebAuthn credential response from the client
          properties:
            id:
              type: string
              description: Credential ID (base64url)
            rawId:
              type: string
              description: Raw credential ID (base64url)
            type:
              type: string
              description: Credential type
            response:
              type: object
              description: Authenticator attestation response
              properties:
                clientDataJSON:
                  type: string
                  description: Base64url-encoded clientDataJSON
                attestationObject:
                  type: string
                  description: Base64url-encoded attestationObject
            clientExtensionResults:
              type: object
              description: Client extension results
        deviceId:
          type: string
          description: Client device identifier
        platform:
          type: string
          description: Client platform (ios, android, web)
      required:
      - username
      - credential
      - deviceId
      - platform
    PasskeyRegistrationVerifyResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        credentialId:
          type: string
          description: Stored credential ID
        status:
          type: string
          description: Verification status
    PasskeyAuthenticationOptionsRequest:
      type: object
      properties:
        username:
          type: string
          description: Unique username or handle for allowCredentials lookup
        deviceId:
          type: string
          description: Client device identifier
        platform:
          type: string
          description: Client platform (ios, android, web)
      required:
      - username
      - deviceId
      - platform
    PasskeyAuthenticationOptionsResponse:
      type: object
      properties:
        challenge:
          type: string
          description: Base64URL-encoded challenge
        allowCredentials:
          type: array
          description: Allowed credentials for the user
        timeout:
          type: integer
          description: Timeout in milliseconds
        userVerification:
          type: string
          description: User verification requirement
    PasskeyAuthenticationVerifyRequest:
      type: object
      properties:
        username:
          type: string
          description: Unique username or handle
        credential:
          type: object
          description: WebAuthn credential assertion from the client
          properties:
            id:
              type: string
              description: Credential ID (base64url)
            rawId:
              type: string
              description: Raw credential ID (base64url)
            type:
              type: string
              description: Credential type
            response:
              type: object
              description: Authenticator assertion response
              properties:
                clientDataJSON:
                  type: string
                  description: Base64url-encoded clientDataJSON
                authenticatorData:
                  type: string
                  description: Base64url-encoded authenticatorData
                signature:
                  type: string
                  description: Base64url-encoded signature
                userHandle:
                  type: string
                  description: User handle (base64url)
            clientExtensionResults:
              type: object
              description: Client extension results
        deviceId:
          type: string
          description: Client device identifier
        platform:
          type: string
          description: Client platform (ios, android, web)
      required:
      - username
      - credential
      - deviceId
      - platform
    PasskeyAuthenticationVerifyResponse:
      type: object
      properties:
        accessToken:
          type: string
          description: JWT access token
        refreshToken:
          type: string
          description: Refresh token
        expiresIn:
          type: integer
          description: Access token lifetime in seconds
        userId:
          type: string
          description: Authenticated user ID
    ListUserPasskeysRequest:
      type: object
      properties: {}
    UserPasskeysResponse:
      type: object
      properties:
        items:
          type: array
          description: List of passkeys
          items:
            type: object
            description: Passkey metadata
            properties:
              credentialId:
                type: string
                description: Credential ID
              createdAt:
                type: string
                description: Creation timestamp
              lastUsedAt:
                type: string
                description: Last used timestamp
              deviceName:
                type: string
                description: Device name or label
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Items per page
        total:
          type: integer
          description: Total items
    DeleteUserPasskeyRequest:
      type: object
      properties: {}
    DeleteUserPasskeyResponse:
      type: object
      properties:
        status:
          type: string
          description: Deletion status
    UploadProfileImageRequest:
      type: object
      properties:
        file:
          type: string
          format: binary
          description: Profile image file (max 16MB)
      required:
      - file
    ProfileImageResponse:
      type: object
      properties:
        imageId:
          type: string
          description: Profile image ID
        userId:
          type: string
          description: User ID
        url:
          type: string
          description: URL to access the profile image
        updatedAt:
          type: string
          description: Update timestamp (ISO 8601)
    GetProfileImageRequest:
      type: object
      properties: {}
    ReplaceProfileImageRequest:
      type: object
      properties:
        file:
          type: string
          format: binary
          description: Profile image file (max 16MB)
      required:
      - file
    DeleteProfileImageRequest:
      type: object
      properties: {}
    DeleteProfileImageResponse:
      type: object
      properties:
        deleted:
          type: boolean
          description: Deletion status
        userId:
          type: string
          description: User ID
    UserProfileResponse:
      type: object
      properties:
        userId:
          type: string
          description: Unique identifier of the user
        displayName:
          type: string
          description: User's display name
        phoneNumber:
          type: string
          description: User's phone number in E.164 format
        avatarUrl:
          type: string
          description: URL to the user's profile picture
        statusMessage:
          type: string
          description: User's status message
    UpdateDisplayNameRequest:
      type: object
      properties:
        displayName:
          type: string
          description: New display name for the user
      required:
      - displayName
    UpdateDisplayNameResponse:
      type: object
      properties:
        userId:
          type: string
          description: Unique identifier of the user
        displayName:
          type: string
          description: Updated display name
        updatedAt:
          type: string
          description: ISO 8601 timestamp of the update
    UserProfileInfoTextResponse:
      type: object
      properties:
        userId:
          type: string
          description: Unique identifier of the user
        infoText:
          type: string
          description: Short info/status text displayed in the profile
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp of the info text
    UpdateUserProfileInfoTextRequest:
      type: object
      properties:
        infoText:
          type: string
          description: Short info/status text to display in the profile
      required:
      - infoText
    GetUserProfileRequest:
      type: object
      properties: {}
    CreateUserQrCodeRequest:
      type: object
      properties:
        validitySeconds:
          type: integer
          description: Validity duration of the QR code in seconds
        format:
          type: string
          description: QR code image format (e.g., png, svg)
        size:
          type: integer
          description: QR code image size in pixels
      required:
      - format
      - size
    UserQrCodeResponse:
      type: object
      properties:
        qrCodeId:
          type: string
          description: Unique QR code identifier
        userId:
          type: string
          description: User identifier
        imageBase64:
          type: string
          description: Base64-encoded QR code image
        deepLink:
          type: string
          description: Deeplink encoded in the QR code
        expiresAt:
          type: string
          description: Expiration timestamp in ISO 8601 format
        createdAt:
          type: string
          description: Creation timestamp in ISO 8601 format
    GetUserQrCodeRequest:
      type: object
      properties: {}
    SendTextMessageRequest:
      type: object
      properties:
        clientMessageId:
          type: string
          description: Client-generated idempotency key for deduplication
        ciphertext:
          type: string
          description: Encrypted message payload using Signal Protocol
        senderDeviceId:
          type: string
          description: Sender device identifier
        sentAt:
          type: string
          description: ISO 8601 timestamp when the message was created on the client
      required:
      - clientMessageId
      - ciphertext
      - senderDeviceId
      - sentAt
    MessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Message ID
        chatId:
          type: string
          description: Chat ID
        type:
          type: string
          description: Message type
        status:
          type: string
          description: Message status (queued, sent, delivered)
        serverTimestamp:
          type: string
          description: Server timestamp in ISO 8601
    CreateVoiceMessageRequest:
      type: object
      properties:
        recipientType:
          type: string
          description: 'Recipient type: user, group, or broadcast'
        recipientId:
          type: string
          description: ID of the target user, group, or broadcast list
        clientMessageId:
          type: string
          description: Client-generated unique identifier for idempotency
        durationMs:
          type: integer
          description: Duration of the voice message in milliseconds
        mimeType:
          type: string
          description: MIME type of the audio file (e.g., audio/ogg, audio/m4a)
        waveform:
          type: string
          description: Optional compact waveform representation for UI rendering
        encryptionHeader:
          type: string
          description: Signal Protocol header or metadata required to decrypt the
            payload
        ciphertextHash:
          type: string
          description: Hash of the encrypted payload for integrity verification
        file:
          type: string
          format: binary
          description: Encrypted voice message file
      required:
      - recipientType
      - recipientId
      - clientMessageId
      - durationMs
      - mimeType
      - encryptionHeader
      - ciphertextHash
      - file
    VoiceMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Server-generated message ID
        clientMessageId:
          type: string
          description: Client-generated unique identifier for idempotency
        recipientType:
          type: string
          description: 'Recipient type: user, group, or broadcast'
        recipientId:
          type: string
          description: ID of the target user, group, or broadcast list
        serverTimestamp:
          type: string
          description: ISO-8601 timestamp when the server accepted the message
        status:
          type: string
          description: Message status (e.g., queued, sent)
    DeleteMessageRequest:
      type: object
      properties:
        reason:
          type: string
          description: Optional reason for deletion
    DeleteMessageResponse:
      type: object
      properties:
        id:
          type: string
          description: Deleted message ID
        deletedAt:
          type: string
          description: Deletion timestamp in ISO 8601
        status:
          type: string
          description: Deletion status
    EditMessageRequest:
      type: object
      properties:
        ciphertext:
          type: string
          description: Encrypted message content (Signal Protocol ciphertext)
        nonce:
          type: string
          description: Nonce/IV used for encryption
        clientEditId:
          type: string
          description: Client-generated idempotency key for the edit
        editedAt:
          type: string
          description: ISO 8601 timestamp when the edit was performed on the client
      required:
      - ciphertext
      - nonce
      - clientEditId
      - editedAt
    EditMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Unique identifier of the edited message
        editedAt:
          type: string
          description: ISO 8601 timestamp when the edit was accepted by the server
        version:
          type: integer
          description: Incremented message version after edit
        status:
          type: string
          description: Edit status (e.g., accepted, queued)
    ForwardMessageRequest:
      type: object
      properties:
        recipients:
          type: array
          description: List of recipients to forward to (max 256 for broadcast lists).
            Each item must specify exactly one of userId, groupId, or broadcastListId.
          items:
            type: object
            properties:
              userId:
                type: string
                description: Recipient user ID
              groupId:
                type: string
                description: Recipient group ID (max 1024 group members enforced server-side)
              broadcastListId:
                type: string
                description: Recipient broadcast list ID (max 256 recipients enforced
                  server-side)
        forwardedText:
          type: string
          description: Optional text to accompany the forwarded message
        e2eEnvelope:
          type: object
          description: Signal Protocol envelope per recipient
          properties:
            ciphertext:
              type: string
              description: Base64-encoded ciphertext
            senderKeyId:
              type: string
              description: Sender key identifier
        clientQueueId:
          type: string
          description: Client-generated ID for offline queue tracking
      required:
      - recipients
      - e2eEnvelope
    ForwardMessageResponse:
      type: object
      properties:
        forwardedMessageId:
          type: string
          description: ID of the newly created forwarded message
        status:
          type: string
          description: Forwarding status
        queued:
          type: boolean
          description: Indicates if the message is queued for delivery
        createdAt:
          type: string
          description: ISO 8601 timestamp of creation
    CreateMessageRequest:
      type: object
      properties:
        conversationId:
          type: string
          description: Target conversation (1:1, group, or broadcast)
        mediaId:
          type: string
          description: Reference to uploaded media
        viewOnce:
          type: boolean
          description: Whether the media is restricted to a single view
        caption:
          type: string
          description: Optional caption
        clientMessageId:
          type: string
          description: Client-generated id for idempotency
      required:
      - conversationId
      - mediaId
      - viewOnce
      - clientMessageId
    CreateReactionRequest:
      type: object
      properties:
        emoji:
          type: string
          description: Emoji unicode character
        encryptedPayload:
          type: string
          description: End-to-end encrypted reaction metadata (Signal Protocol)
        clientMessageId:
          type: string
          description: Client-generated id for offline queue de-duplication
      required:
      - emoji
      - clientMessageId
    ReactionResponse:
      type: object
      properties:
        reactionId:
          type: string
          description: Reaction ID
        messageId:
          type: string
          description: Message ID
        emoji:
          type: string
          description: Emoji unicode character
        userId:
          type: string
          description: User ID who reacted
        createdAt:
          type: string
          description: ISO-8601 timestamp when reaction was created
    ListReactionsRequest:
      type: object
      properties: {}
    ReactionListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of reactions
          items:
            type: object
            description: Reaction item
            properties:
              reactionId:
                type: string
                description: Reaction ID
              emoji:
                type: string
                description: Emoji unicode character
              userId:
                type: string
                description: User ID who reacted
              createdAt:
                type: string
                description: ISO-8601 timestamp
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Items per page
        totalItems:
          type: integer
          description: Total number of reactions
    DeleteReactionRequest:
      type: object
      properties:
        clientMessageId:
          type: string
          description: Client-generated id for offline queue de-duplication
      required:
      - clientMessageId
    DeleteReactionResponse:
      type: object
      properties:
        reactionId:
          type: string
          description: Deleted reaction ID
        messageId:
          type: string
          description: Message ID
        deletedAt:
          type: string
          description: ISO-8601 timestamp when reaction was deleted
    UpdateSelfDestructRequest:
      type: object
      properties:
        ttlSeconds:
          type: integer
          description: Time-to-live in seconds after delivery
        expiresAt:
          type: string
          description: Absolute expiration timestamp in ISO 8601
    UpdateSelfDestructResponse:
      type: object
      properties:
        id:
          type: string
          description: Message ID
        selfDestruct:
          type: object
          description: Updated self-destruction policy
          properties:
            ttlSeconds:
              type: integer
              description: Time-to-live in seconds after delivery
            expiresAt:
              type: string
              description: Absolute expiration timestamp in ISO 8601
        updatedAt:
          type: string
          description: Update timestamp in ISO 8601
    UploadMediaRequest:
      type: object
      properties:
        file:
          type: string
          format: binary
          description: Media file to upload
        mediaType:
          type: string
          description: Type of media (image, document, audio, video)
      required:
      - file
      - mediaType
    UploadMediaResponse:
      type: object
      properties:
        mediaId:
          type: string
          description: Media ID
        status:
          type: string
          description: Upload status
        sizeBytes:
          type: integer
          description: Uploaded size in bytes
    CreateMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Server-generated message id
        status:
          type: string
          description: Message creation status
    GetViewOnceMediaRequest:
      type: object
      properties: {}
    ViewOnceMediaResponse:
      type: object
      properties:
        file:
          type: string
          format: binary
          description: Encrypted media file content
        encryptionMetadata:
          type: object
          description: Signal Protocol metadata required for decryption
    LockChatRequest:
      type: object
      properties:
        authMethod:
          type: string
          description: Additional authentication method used (e.g., biometric, otp,
            devicePin)
        authToken:
          type: string
          description: Proof of additional authentication (e.g., OTP code or signed
            device assertion)
        deviceId:
          type: string
          description: Identifier of the client device used for authentication
      required:
      - authMethod
      - authToken
      - deviceId
    ChatLockResponse:
      type: object
      properties:
        chatId:
          type: string
          description: Chat ID
        locked:
          type: boolean
          description: Indicates whether the chat is locked
        lockedAt:
          type: string
          description: ISO-8601 timestamp when the chat was locked
    UnlockChatRequest:
      type: object
      properties:
        authMethod:
          type: string
          description: Additional authentication method used (e.g., biometric, otp,
            devicePin)
        authToken:
          type: string
          description: Proof of additional authentication (e.g., OTP code or signed
            device assertion)
        deviceId:
          type: string
          description: Identifier of the client device used for authentication
      required:
      - authMethod
      - authToken
      - deviceId
    ChatUnlockResponse:
      type: object
      properties:
        chatId:
          type: string
          description: Chat ID
        locked:
          type: boolean
          description: Indicates whether the chat is locked
        unlockedAt:
          type: string
          description: ISO-8601 timestamp when the chat was unlocked
    CreateBroadcastListRequest:
      type: object
      properties:
        name:
          type: string
          description: Human-readable name of the broadcast list
        recipientIds:
          type: array
          description: Array of recipient user IDs (max 256)
          items:
            type: string
          maxItems: 256
      required:
      - name
      - recipientIds
    BroadcastListResponse:
      type: object
      properties:
        id:
          type: string
          description: Broadcast list ID
        name:
          type: string
          description: Broadcast list name
        recipientCount:
          type: integer
          description: Number of recipients
        updatedAt:
          type: string
          description: ISO-8601 update timestamp
    ListBroadcastListsRequest:
      type: object
      properties: {}
    BroadcastListCollectionResponse:
      type: object
      properties:
        items:
          type: array
          description: Broadcast lists
          items:
            type: object
            properties:
              id:
                type: string
                description: Broadcast list ID
              name:
                type: string
                description: Broadcast list name
              recipientCount:
                type: integer
                description: Number of recipients
              createdAt:
                type: string
                description: ISO-8601 creation timestamp
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Items per page
        totalItems:
          type: integer
          description: Total number of items
    GetBroadcastListRequest:
      type: object
      properties: {}
    BroadcastListDetailResponse:
      type: object
      properties:
        id:
          type: string
          description: Broadcast list ID
        name:
          type: string
          description: Broadcast list name
        recipientIds:
          type: array
          description: Recipient user IDs
          items:
            type: string
        recipientCount:
          type: integer
          description: Number of recipients
        createdAt:
          type: string
          description: ISO-8601 creation timestamp
    UpdateBroadcastListRequest:
      type: object
      properties:
        name:
          type: string
          description: Updated broadcast list name
        recipientIds:
          type: array
          description: Updated recipient user IDs (max 256)
          items:
            type: string
          maxItems: 256
    DeleteBroadcastListRequest:
      type: object
      properties: {}
    DeleteBroadcastListResponse:
      type: object
      properties:
        id:
          type: string
          description: Broadcast list ID
        deleted:
          type: boolean
          description: Deletion status
    SendBroadcastMessageRequest:
      type: object
      properties:
        encryptedPayload:
          type: string
          description: Signal Protocol encrypted message payload
        ciphertextType:
          type: string
          description: Ciphertext type (e.g., preKeySignalMessage, signalMessage)
        clientMessageId:
          type: string
          description: Client-generated message ID for de-duplication
        media:
          type: object
          description: Optional media metadata if message includes media
          properties:
            mediaId:
              type: string
              description: Uploaded media ID
            mediaType:
              type: string
              description: Media MIME type
            sizeBytes:
              type: integer
              description: Media size in bytes
      required:
      - encryptedPayload
      - ciphertextType
      - clientMessageId
    BroadcastMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Server message ID
        channelId:
          type: string
          description: Broadcast channel ID
        queued:
          type: boolean
          description: Indicates message queued for offline delivery
        createdAt:
          type: string
          description: Creation timestamp (ISO 8601)
    CreateFormattedMessageRequest:
      type: object
      properties:
        clientMessageId:
          type: string
          description: Client-generated id for deduplication in offline queue
        ciphertext:
          type: string
          description: End-to-end encrypted message payload
        ciphertextFormat:
          type: string
          description: Format of the encrypted payload, e.g., 'signal-protocol-v1'
        formatting:
          type: object
          description: Formatting metadata applied to the plaintext prior to encryption
          properties:
            type:
              type: string
              description: Formatting type, e.g., 'markdown', 'inline'
            entities:
              type: array
              description: List of formatting entities with ranges
              items:
                type: object
                properties:
                  kind:
                    type: string
                    description: Entity kind, e.g., 'bold', 'italic', 'code', 'strike'
                  offset:
                    type: integer
                    description: Start index in plaintext
                  length:
                    type: integer
                    description: Length of formatted range
      required:
      - clientMessageId
      - ciphertext
      - ciphertextFormat
    ListMessagesRequest:
      type: object
      properties: {}
    MessageListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of message metadata
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Page size
        total:
          type: integer
          description: Total items
    CreateGroupMessageRequest:
      type: object
      properties:
        clientMessageId:
          type: string
          description: Client-generated idempotency key for offline queue and deduplication
        ciphertext:
          type: string
          description: End-to-end encrypted message payload (Signal Protocol)
        mentions:
          type: array
          description: List of mentioned user IDs in the message
          items:
            type: string
      required:
      - clientMessageId
      - ciphertext
    GroupMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Server-assigned message ID
        groupId:
          type: string
          description: Group chat ID
        createdAt:
          type: string
          description: ISO-8601 timestamp of creation
        mentions:
          type: array
          description: List of mentioned user IDs acknowledged by server
          items:
            type: string
    CreateLocationMessageRequest:
      type: object
      properties:
        clientMessageId:
          type: string
          description: Client-generated idempotency key for offline queue reconciliation
        payloadCiphertext:
          type: string
          description: Signal Protocol encrypted payload (location data)
        payloadType:
          type: string
          description: Type of encrypted payload
          enum:
          - location
        sentAt:
          type: string
          format: date-time
          description: Client timestamp when the location was shared
        ttlSeconds:
          type: integer
          description: Optional time-to-live for location sharing in seconds
      required:
      - clientMessageId
      - payloadCiphertext
      - payloadType
      - sentAt
    LocationMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Server-assigned message ID
        conversationId:
          type: string
          description: Conversation ID
        clientMessageId:
          type: string
          description: Client-generated idempotency key
        status:
          type: string
          description: Delivery status
          enum:
          - queued
          - sent
        createdAt:
          type: string
          format: date-time
          description: Server timestamp when message was created
    CreateContactShareMessageRequest:
      type: object
      properties:
        messageType:
          type: string
          description: Message type; must be 'contact'
        recipientType:
          type: string
          description: 'Recipient type: ''direct'', ''group'', or ''broadcast'''
        encryptedPayload:
          type: string
          description: Signal Protocol encrypted payload containing the contact data
            (e.g., vCard)
        payloadChecksum:
          type: string
          description: Checksum for encrypted payload integrity validation
        clientMessageId:
          type: string
          description: Client-generated idempotency key for offline queueing
        timestamp:
          type: string
          description: Client timestamp in ISO 8601
      required:
      - messageType
      - recipientType
      - encryptedPayload
      - clientMessageId
      - timestamp
    CreateGroupRequest:
      type: object
      properties:
        name:
          type: string
          description: Group name
        description:
          type: string
          description: Group description
        memberIds:
          type: array
          description: Initial member user IDs (max 1024)
          items:
            type: string
        encryptionMetadata:
          type: object
          description: Signal Protocol group encryption metadata (e.g., sender keys)
      required:
      - name
      - memberIds
      - encryptionMetadata
    GroupResponse:
      type: object
      properties:
        id:
          type: string
          description: Group ID
        name:
          type: string
          description: Group name
        description:
          type: string
          description: Group description
        settings:
          type: object
          description: Group settings
    ListGroupsRequest:
      type: object
      properties: {}
    GroupListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of groups
          items:
            type: object
            properties:
              id:
                type: string
                description: Group ID
              name:
                type: string
                description: Group name
              memberCount:
                type: integer
                description: Number of members
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Items per page
        total:
          type: integer
          description: Total items
    GetGroupRequest:
      type: object
      properties: {}
    UpdateGroupRequest:
      type: object
      properties:
        name:
          type: string
          description: Group name
        description:
          type: string
          description: Group description
        settings:
          type: object
          description: Group settings
    DeleteGroupRequest:
      type: object
      properties: {}
    DeleteGroupResponse:
      type: object
      properties:
        id:
          type: string
          description: Deleted group ID
        deleted:
          type: boolean
          description: Deletion status
    ListGroupMembersRequest:
      type: object
      properties: {}
    GroupMemberListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of members
          items:
            type: object
            properties:
              userId:
                type: string
                description: User ID
              role:
                type: string
                description: Member role
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Items per page
        total:
          type: integer
          description: Total items
    AddGroupMembersRequest:
      type: object
      properties:
        memberIds:
          type: array
          description: User IDs to add
          items:
            type: string
      required:
      - memberIds
    AddGroupMembersResponse:
      type: object
      properties:
        groupId:
          type: string
          description: Group ID
        addedCount:
          type: integer
          description: Number of members added
    RemoveGroupMemberRequest:
      type: object
      properties: {}
    RemoveGroupMemberResponse:
      type: object
      properties:
        groupId:
          type: string
          description: Group ID
        memberId:
          type: string
          description: Removed member ID
        removed:
          type: boolean
          description: Removal status
    UpdateGroupRolesRequest:
      type: object
      properties:
        roles:
          type: array
          description: Role updates
          items:
            type: object
            properties:
              memberId:
                type: string
                description: Member ID
              role:
                type: string
                description: New role
      required:
      - roles
    UpdateGroupRolesResponse:
      type: object
      properties:
        groupId:
          type: string
          description: Group ID
        updatedCount:
          type: integer
          description: Number of roles updated
    TransferGroupOwnershipRequest:
      type: object
      properties:
        newOwnerId:
          type: string
          description: New owner user ID
      required:
      - newOwnerId
    TransferGroupOwnershipResponse:
      type: object
      properties:
        groupId:
          type: string
          description: Group ID
        ownerId:
          type: string
          description: New owner user ID
    UploadGroupAvatarRequest:
      type: object
      properties:
        file:
          type: string
          format: binary
          description: Avatar image file (max 16MB)
      required:
      - file
    UploadGroupAvatarResponse:
      type: object
      properties:
        groupId:
          type: string
          description: Group ID
        avatarUrl:
          type: string
          description: Avatar URL
    GroupSettingsResponse:
      type: object
      properties:
        groupId:
          type: string
          description: Unique group ID
        name:
          type: string
          description: Group display name
        description:
          type: string
          description: Group description
        isPublic:
          type: boolean
          description: Whether the group is discoverable
        joinPolicy:
          type: string
          description: Join policy (open, approval, inviteOnly)
        memberPostingPolicy:
          type: string
          description: Who can post messages (all, adminsOnly)
        mediaSharingEnabled:
          type: boolean
          description: Whether media sharing is allowed
        maxMembers:
          type: integer
          description: Maximum members allowed (max 1024)
        encryptionEnabled:
          type: boolean
          description: End-to-end encryption enabled
        ephemeralMessagesEnabled:
          type: boolean
          description: Whether ephemeral messages are enabled
        ephemeralMessageTTLSeconds:
          type: integer
          description: TTL for ephemeral messages in seconds
        updatedAt:
          type: string
          description: Last update timestamp in ISO 8601
    UpdateGroupSettingsRequest:
      type: object
      properties:
        name:
          type: string
          description: Group display name
        description:
          type: string
          description: Group description
        isPublic:
          type: boolean
          description: Whether the group is discoverable
        joinPolicy:
          type: string
          description: Join policy (open, approval, inviteOnly)
        memberPostingPolicy:
          type: string
          description: Who can post messages (all, adminsOnly)
        mediaSharingEnabled:
          type: boolean
          description: Whether media sharing is allowed
        maxMembers:
          type: integer
          description: Maximum members allowed (max 1024)
        encryptionEnabled:
          type: boolean
          description: End-to-end encryption enabled
        ephemeralMessagesEnabled:
          type: boolean
          description: Whether ephemeral messages are enabled
        ephemeralMessageTTLSeconds:
          type: integer
          description: TTL for ephemeral messages in seconds
    CreateGroupInviteLinkRequest:
      type: object
      properties:
        expiresAt:
          type: string
          description: ISO-8601 timestamp when the invite link expires
        maxUses:
          type: integer
          description: Maximum number of uses for the invite link
        requireApproval:
          type: boolean
          description: Whether a group admin must approve the join request
    GroupInviteLinkResponse:
      type: object
      properties:
        inviteId:
          type: string
          description: Invite link ID
        inviteToken:
          type: string
          description: Opaque token embedded in the invite link
        inviteUrl:
          type: string
          description: Full invite URL to share
        groupId:
          type: string
          description: Group ID
        expiresAt:
          type: string
          description: ISO-8601 expiration timestamp
        maxUses:
          type: integer
          description: Maximum number of uses
        uses:
          type: integer
          description: Current number of uses
        requireApproval:
          type: boolean
          description: Whether approval is required
        createdAt:
          type: string
          description: ISO-8601 creation timestamp
    GetInviteLinkDetailsRequest:
      type: object
      properties: {}
    InviteLinkDetailsResponse:
      type: object
      properties:
        inviteToken:
          type: string
          description: Invite token
        groupId:
          type: string
          description: Group ID
        groupName:
          type: string
          description: Group name
        groupAvatarUrl:
          type: string
          description: Group avatar URL
        memberCount:
          type: integer
          description: Current number of group members
        maxMembers:
          type: integer
          description: Maximum allowed group members
        expiresAt:
          type: string
          description: ISO-8601 expiration timestamp
        requireApproval:
          type: boolean
          description: Whether approval is required
        status:
          type: string
          description: 'Invite link status: active, expired, revoked, maxUsesReached'
    AcceptInviteLinkRequest:
      type: object
      properties:
        displayName:
          type: string
          description: Optional display name to use in the group
    AcceptInviteLinkResponse:
      type: object
      properties:
        groupId:
          type: string
          description: Group ID
        memberId:
          type: string
          description: Member ID of the joining user
        status:
          type: string
          description: 'Join status: joined, pendingApproval'
        joinedAt:
          type: string
          description: ISO-8601 join timestamp (if joined)
    RevokeGroupInviteLinkRequest:
      type: object
      properties: {}
    RevokeGroupInviteLinkResponse:
      type: object
      properties:
        inviteId:
          type: string
          description: Invite link ID
        status:
          type: string
          description: 'Revocation status: revoked'
        revokedAt:
          type: string
          description: ISO-8601 revocation timestamp
    LeaveGroupRequest:
      type: object
      properties: {}
    LeaveGroupResponse:
      type: object
      properties:
        groupId:
          type: string
          description: Group ID
        memberId:
          type: string
          description: ID of the member who left
        leftAt:
          type: string
          description: ISO 8601 timestamp when the member left
        notificationSent:
          type: boolean
          description: Indicates whether a notification was sent
    CreateCommunityRequest:
      type: object
      properties:
        name:
          type: string
          description: Community display name
        description:
          type: string
          description: Community description
        metadata:
          type: object
          description: Optional community metadata (non-sensitive, client-encrypted
            if needed)
      required:
      - name
    CommunityResponse:
      type: object
      properties:
        id:
          type: string
          description: Community ID
        name:
          type: string
          description: Community display name
        description:
          type: string
          description: Community description
        metadata:
          type: object
          description: Community metadata
        updatedAt:
          type: string
          description: ISO-8601 update timestamp
    ListCommunitiesRequest:
      type: object
      properties: {}
    CommunityListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of communities
          items:
            type: object
            description: Community summary
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Page size
        totalCount:
          type: integer
          description: Total number of communities
    GetCommunityRequest:
      type: object
      properties: {}
    UpdateCommunityRequest:
      type: object
      properties:
        name:
          type: string
          description: Community display name
        description:
          type: string
          description: Community description
        metadata:
          type: object
          description: Community metadata
    DeleteCommunityRequest:
      type: object
      properties: {}
    DeleteCommunityResponse:
      type: object
      properties:
        deleted:
          type: boolean
          description: Indicates whether the community was deleted
    AddGroupToCommunityRequest:
      type: object
      properties:
        groupId:
          type: string
          description: Existing group ID to link to the community
      required:
      - groupId
    CommunityGroupLinkResponse:
      type: object
      properties:
        communityId:
          type: string
          description: Community ID
        groupId:
          type: string
          description: Group ID
        linkedAt:
          type: string
          description: ISO-8601 link timestamp
    ListCommunityGroupsRequest:
      type: object
      properties: {}
    CommunityGroupListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of groups in the community
          items:
            type: object
            description: Group summary
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Page size
        totalCount:
          type: integer
          description: Total number of groups in the community
    RemoveGroupFromCommunityRequest:
      type: object
      properties: {}
    RemoveGroupFromCommunityResponse:
      type: object
      properties:
        communityId:
          type: string
          description: Community ID
        groupId:
          type: string
          description: Group ID
        removed:
          type: boolean
          description: Indicates whether the group link was removed
    CreateBroadcastChannelRequest:
      type: object
      properties:
        name:
          type: string
          description: Channel display name
        recipientIds:
          type: array
          description: Initial recipient user IDs (max 256)
          items:
            type: string
        encryptedChannelKey:
          type: string
          description: Encrypted channel key for E2E (Signal Protocol)
        metadata:
          type: object
          description: Optional metadata (e.g., avatar, description)
      required:
      - name
      - recipientIds
      - encryptedChannelKey
    BroadcastChannelResponse:
      type: object
      properties:
        id:
          type: string
          description: Broadcast channel ID
        name:
          type: string
          description: Channel display name
        ownerId:
          type: string
          description: Owner user ID
        recipientCount:
          type: integer
          description: Number of recipients
        createdAt:
          type: string
          description: Creation timestamp (ISO 8601)
    BroadcastChannelListResponse:
      type: object
      properties:
        items:
          type: array
          description: Broadcast channels
          items:
            type: object
            properties:
              id:
                type: string
                description: Broadcast channel ID
              name:
                type: string
                description: Channel display name
              ownerId:
                type: string
                description: Owner user ID
              recipientCount:
                type: integer
                description: Number of recipients
              createdAt:
                type: string
                description: Creation timestamp (ISO 8601)
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Page size
        total:
          type: integer
          description: Total number of channels
    UpdateBroadcastChannelRequest:
      type: object
      properties:
        name:
          type: string
          description: Channel display name
        metadata:
          type: object
          description: Optional metadata (e.g., avatar, description)
    DeleteBroadcastChannelResponse:
      type: object
      properties:
        deleted:
          type: boolean
          description: Deletion status
        id:
          type: string
          description: Broadcast channel ID
    AddBroadcastRecipientsRequest:
      type: object
      properties:
        recipientIds:
          type: array
          description: Recipient user IDs to add (max 256 total)
          items:
            type: string
      required:
      - recipientIds
    BroadcastRecipientsResponse:
      type: object
      properties:
        channelId:
          type: string
          description: Broadcast channel ID
        recipientCount:
          type: integer
          description: Number of recipients after update
    RemoveBroadcastRecipientsRequest:
      type: object
      properties:
        recipientIds:
          type: array
          description: Recipient user IDs to remove
          items:
            type: string
      required:
      - recipientIds
    BroadcastMessageListResponse:
      type: object
      properties:
        items:
          type: array
          description: Broadcast messages
          items:
            type: object
            properties:
              messageId:
                type: string
                description: Server message ID
              channelId:
                type: string
                description: Broadcast channel ID
              senderId:
                type: string
                description: Sender user ID
              encryptedPayload:
                type: string
                description: Signal Protocol encrypted payload
              ciphertextType:
                type: string
                description: Ciphertext type
              createdAt:
                type: string
                description: Creation timestamp (ISO 8601)
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Page size
        total:
          type: integer
          description: Total number of messages
    CreatePollRequest:
      type: object
      properties:
        questionCiphertext:
          type: string
          description: Encrypted poll question (Signal Protocol payload)
        optionsCiphertexts:
          type: array
          description: Encrypted poll options (Signal Protocol payloads)
          items:
            type: string
        allowsMultipleChoices:
          type: boolean
          description: Whether multiple options can be selected
        expiresAt:
          type: string
          description: ISO-8601 expiration timestamp; null for no expiration
        clientMessageId:
          type: string
          description: Client-generated id for offline queue de-duplication
      required:
      - questionCiphertext
      - optionsCiphertexts
      - allowsMultipleChoices
      - clientMessageId
    PollResponse:
      type: object
      properties:
        pollId:
          type: string
          description: Poll ID
        chatId:
          type: string
          description: Chat ID
        createdAt:
          type: string
          description: ISO-8601 creation timestamp
        status:
          type: string
          description: Poll status (active|closed)
    PollListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of polls
          items:
            type: object
            properties:
              pollId:
                type: string
                description: Poll ID
              questionCiphertext:
                type: string
                description: Encrypted poll question
              optionsCiphertexts:
                type: array
                description: Encrypted poll options
                items:
                  type: string
              status:
                type: string
                description: Poll status (active|closed)
              createdAt:
                type: string
                description: ISO-8601 creation timestamp
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Current page size
        total:
          type: integer
          description: Total number of polls
    PollDetailResponse:
      type: object
      properties:
        pollId:
          type: string
          description: Poll ID
        chatId:
          type: string
          description: Chat ID
        questionCiphertext:
          type: string
          description: Encrypted poll question
        optionsCiphertexts:
          type: array
          description: Encrypted poll options
          items:
            type: string
        allowsMultipleChoices:
          type: boolean
          description: Whether multiple options can be selected
        status:
          type: string
          description: Poll status (active|closed)
        tallyCiphertext:
          type: string
          description: Encrypted tally snapshot for clients
        createdAt:
          type: string
          description: ISO-8601 creation timestamp
        expiresAt:
          type: string
          description: ISO-8601 expiration timestamp
    SubmitVoteRequest:
      type: object
      properties:
        selectedOptionIndexes:
          type: array
          description: Selected option indexes
          items:
            type: integer
        voteCiphertext:
          type: string
          description: Encrypted vote payload (Signal Protocol)
        clientMessageId:
          type: string
          description: Client-generated id for offline queue de-duplication
      required:
      - selectedOptionIndexes
      - voteCiphertext
      - clientMessageId
    SubmitVoteResponse:
      type: object
      properties:
        pollId:
          type: string
          description: Poll ID
        status:
          type: string
          description: Poll status (active|closed)
        updatedAt:
          type: string
          description: ISO-8601 update timestamp
    ClosePollRequest:
      type: object
      properties:
        reason:
          type: string
          description: Optional reason for closing the poll
    ClosePollResponse:
      type: object
      properties:
        pollId:
          type: string
          description: Poll ID
        status:
          type: string
          description: Poll status (closed)
        closedAt:
          type: string
          description: ISO-8601 close timestamp
    CreateGroupEventRequest:
      type: object
      properties:
        title:
          type: string
          description: Event title
        description:
          type: string
          description: Event description
        startTime:
          type: string
          description: ISO-8601 start date-time
        endTime:
          type: string
          description: ISO-8601 end date-time
        location:
          type: string
          description: Event location or meeting link
        timezone:
          type: string
          description: IANA timezone
        visibility:
          type: string
          description: Event visibility within group (e.g., group, organizers)
        maxParticipants:
          type: integer
          description: Optional cap on participants
      required:
      - title
      - startTime
      - timezone
    GroupEventResponse:
      type: object
      properties:
        id:
          type: string
          description: Event ID
        groupId:
          type: string
          description: Group ID
        title:
          type: string
          description: Event title
        description:
          type: string
          description: Event description
        startTime:
          type: string
          description: ISO-8601 start date-time
        endTime:
          type: string
          description: ISO-8601 end date-time
        location:
          type: string
          description: Event location or meeting link
        timezone:
          type: string
          description: IANA timezone
        visibility:
          type: string
          description: Event visibility within group
        maxParticipants:
          type: integer
          description: Optional cap on participants
        createdAt:
          type: string
          description: ISO-8601 creation timestamp
        updatedAt:
          type: string
          description: ISO-8601 last update timestamp
    GroupEventListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of group events
          items:
            type: object
            properties:
              id:
                type: string
                description: Event ID
              title:
                type: string
                description: Event title
              startTime:
                type: string
                description: ISO-8601 start date-time
              endTime:
                type: string
                description: ISO-8601 end date-time
              location:
                type: string
                description: Event location or meeting link
              timezone:
                type: string
                description: IANA timezone
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of events
        totalPages:
          type: integer
          description: Total number of pages
    UpdateGroupEventRequest:
      type: object
      properties:
        title:
          type: string
          description: Event title
        description:
          type: string
          description: Event description
        startTime:
          type: string
          description: ISO-8601 start date-time
        endTime:
          type: string
          description: ISO-8601 end date-time
        location:
          type: string
          description: Event location or meeting link
        timezone:
          type: string
          description: IANA timezone
        visibility:
          type: string
          description: Event visibility within group
        maxParticipants:
          type: integer
          description: Optional cap on participants
    DeleteGroupEventResponse:
      type: object
      properties:
        id:
          type: string
          description: Deleted event ID
        deleted:
          type: boolean
          description: Deletion status
    RsvpGroupEventRequest:
      type: object
      properties:
        status:
          type: string
          description: RSVP status (going, maybe, notGoing)
      required:
      - status
    RsvpGroupEventResponse:
      type: object
      properties:
        eventId:
          type: string
          description: Event ID
        userId:
          type: string
          description: User ID
        status:
          type: string
          description: RSVP status
        updatedAt:
          type: string
          description: ISO-8601 last update timestamp
    CreateCallRequest:
      type: object
      properties:
        callType:
          type: string
          description: Type of call (oneToOne, group)
        participantIds:
          type: array
          description: List of initial participant user IDs (max 1024 for group calls)
        e2eKeyBundleId:
          type: string
          description: Signal Protocol key bundle ID used to establish end-to-end
            encryption
      required:
      - callType
      - participantIds
      - e2eKeyBundleId
    CallResponse:
      type: object
      properties:
        id:
          type: string
          description: Call ID
        callType:
          type: string
          description: Type of call
        status:
          type: string
          description: Current call status (created, active, ended)
        iceServers:
          type: array
          description: WebRTC ICE servers configuration
        signalingChannel:
          type: string
          description: WebSocket channel identifier for real-time signaling
        createdAt:
          type: string
          description: ISO 8601 timestamp when the call was created
    ListCallsRequest:
      type: object
      properties: {}
    CallListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of call sessions
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of call sessions
    GetCallRequest:
      type: object
      properties: {}
    CallDetailResponse:
      type: object
      properties:
        callId:
          type: string
          description: Call ID
        type:
          type: string
          description: Call type
        status:
          type: string
          description: Current status
        participants:
          type: array
          description: Participant user IDs
        createdAt:
          type: string
          description: ISO-8601 timestamp
    AddParticipantRequest:
      type: object
      properties:
        participantId:
          type: string
          description: User ID to add
      required:
      - participantId
    AddParticipantResponse:
      type: object
      properties:
        callId:
          type: string
          description: Call ID
        participantId:
          type: string
          description: Added participant ID
        status:
          type: string
          description: Participant status
    RemoveParticipantRequest:
      type: object
      properties: {}
    RemoveParticipantResponse:
      type: object
      properties:
        callId:
          type: string
          description: Call ID
        participantId:
          type: string
          description: Removed participant ID
        status:
          type: string
          description: Removal status
    EndCallRequest:
      type: object
      properties:
        reason:
          type: string
          description: Reason for ending the call (completed, declined, error)
      required:
      - reason
    EndCallResponse:
      type: object
      properties:
        id:
          type: string
          description: Call ID
        status:
          type: string
          description: Updated call status
        endedAt:
          type: string
          description: ISO 8601 timestamp when the call ended
    SignalingMessageRequest:
      type: object
      properties:
        type:
          type: string
          description: 'Message type: ''offer'', ''answer'', or ''iceCandidate'''
        payload:
          type: string
          description: Encrypted signaling payload (E2EE)
        senderId:
          type: string
          description: Sender user ID
      required:
      - type
      - payload
      - senderId
    SignalingMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Stored message ID
        callId:
          type: string
          description: Call ID
        queued:
          type: boolean
          description: Whether message is queued for offline delivery
    ListSignalingMessagesRequest:
      type: object
      properties: {}
    SignalingMessageListResponse:
      type: object
      properties:
        items:
          type: array
          description: Queued signaling messages
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Page size
        total:
          type: integer
          description: Total queued messages
    JoinCallRequest:
      type: object
      properties:
        e2eKeyBundleId:
          type: string
          description: Signal Protocol key bundle ID for E2E encryption setup
        deviceId:
          type: string
          description: Joining device identifier
      required:
      - e2eKeyBundleId
      - deviceId
    JoinCallResponse:
      type: object
      properties:
        id:
          type: string
          description: Call ID
        participantId:
          type: string
          description: Joined participant ID
        iceServers:
          type: array
          description: WebRTC ICE servers configuration
        signalingChannel:
          type: string
          description: WebSocket channel identifier for real-time signaling
        status:
          type: string
          description: Current call status
    GetCallResponse:
      type: object
      properties:
        id:
          type: string
          description: Call ID
        callType:
          type: string
          description: Type of call
        status:
          type: string
          description: Current call status
        participants:
          type: array
          description: Current participants in the call
        createdAt:
          type: string
          description: ISO 8601 timestamp when the call was created
        endedAt:
          type: string
          description: ISO 8601 timestamp when the call ended
    CreateGroupCallRequest:
      type: object
      properties:
        groupId:
          type: string
          description: Group ID for the call
        mediaType:
          type: string
          description: 'Media type: audio or video'
        participantIds:
          type: array
          description: Initial participant IDs (max 1024)
          items:
            type: string
        webrtcOffer:
          type: string
          description: SDP offer for WebRTC negotiation
        e2eKeyPackage:
          type: string
          description: Signal Protocol key package for end-to-end encryption
        clientNonce:
          type: string
          description: Client-generated nonce to ensure idempotency
      required:
      - groupId
      - mediaType
      - webrtcOffer
      - e2eKeyPackage
      - clientNonce
    CreateGroupCallResponse:
      type: object
      properties:
        callId:
          type: string
          description: Unique group call ID
        status:
          type: string
          description: Call status
        createdAt:
          type: string
          description: ISO timestamp when the call was created
        webrtcAnswer:
          type: string
          description: SDP answer from server
        iceServers:
          type: array
          description: List of ICE servers for WebRTC connectivity
          items:
            type: object
    GetGroupCallRequest:
      type: object
      properties: {}
    GetGroupCallResponse:
      type: object
      properties:
        callId:
          type: string
          description: Group call ID
        groupId:
          type: string
          description: Group ID
        mediaType:
          type: string
          description: 'Media type: audio or video'
        status:
          type: string
          description: Call status
        createdAt:
          type: string
          description: ISO timestamp
        participantCount:
          type: integer
          description: Current number of participants
    AddGroupCallParticipantsRequest:
      type: object
      properties:
        participantIds:
          type: array
          description: Participant IDs to invite (max 1024 total)
          items:
            type: string
        e2eKeyPackage:
          type: string
          description: Signal Protocol key package for new participants
      required:
      - participantIds
      - e2eKeyPackage
    AddGroupCallParticipantsResponse:
      type: object
      properties:
        callId:
          type: string
          description: Group call ID
        invited:
          type: array
          description: Participant IDs successfully invited
          items:
            type: string
        failed:
          type: array
          description: Participant IDs that could not be invited
          items:
            type: string
    ListGroupCallParticipantsRequest:
      type: object
      properties: {}
    ListGroupCallParticipantsResponse:
      type: object
      properties:
        items:
          type: array
          description: Participant list
          items:
            type: object
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Items per page
        totalItems:
          type: integer
          description: Total number of participants
        totalPages:
          type: integer
          description: Total number of pages
    JoinGroupCallRequest:
      type: object
      properties:
        participantId:
          type: string
          description: Participant ID joining the call
        webrtcOffer:
          type: string
          description: SDP offer for WebRTC negotiation
        e2eKeyPackage:
          type: string
          description: Signal Protocol key package for end-to-end encryption
      required:
      - participantId
      - webrtcOffer
      - e2eKeyPackage
    JoinGroupCallResponse:
      type: object
      properties:
        sessionId:
          type: string
          description: Participant session ID
        webrtcAnswer:
          type: string
          description: SDP answer for WebRTC negotiation
        iceServers:
          type: array
          description: List of ICE servers for WebRTC connectivity
          items:
            type: object
    RemoveGroupCallParticipantRequest:
      type: object
      properties: {}
    RemoveGroupCallParticipantResponse:
      type: object
      properties:
        callId:
          type: string
          description: Group call ID
        participantId:
          type: string
          description: Participant ID removed
        status:
          type: string
          description: Removal status
    EndGroupCallRequest:
      type: object
      properties: {}
    EndGroupCallResponse:
      type: object
      properties:
        callId:
          type: string
          description: Group call ID
        status:
          type: string
          description: Termination status
        endedAt:
          type: string
          description: ISO timestamp when the call ended
    CreateScreenShareRequest:
      type: object
      properties:
        publisherId:
          type: string
          description: User ID of the screen-share publisher
        webrtcSdpOffer:
          type: string
          description: WebRTC SDP offer for screen sharing
        encryptionContext:
          type: string
          description: Signal Protocol context identifier for end-to-end encryption
      required:
      - publisherId
      - webrtcSdpOffer
      - encryptionContext
    ScreenShareResponse:
      type: object
      properties:
        screenShareId:
          type: string
          description: Screen share session ID
        callId:
          type: string
          description: Call ID
        publisherId:
          type: string
          description: User ID of the screen-share publisher
        webrtcSdpAnswer:
          type: string
          description: WebRTC SDP answer for screen sharing
        status:
          type: string
          description: Current status of the screen share session
        createdAt:
          type: string
          description: ISO timestamp when the session was created
    ScreenShareListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of screen share sessions
          items:
            type: object
            properties:
              screenShareId:
                type: string
                description: Screen share session ID
              publisherId:
                type: string
                description: User ID of the screen-share publisher
              status:
                type: string
                description: Current status of the screen share session
              createdAt:
                type: string
                description: ISO timestamp when the session was created
              endedAt:
                type: string
                description: ISO timestamp when the session ended
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Page size
        totalItems:
          type: integer
          description: Total number of items
    EndScreenShareRequest:
      type: object
      properties:
        reason:
          type: string
          description: Reason for ending the screen share
    EndScreenShareResponse:
      type: object
      properties:
        screenShareId:
          type: string
          description: Screen share session ID
        status:
          type: string
          description: Final status of the screen share session
        endedAt:
          type: string
          description: ISO timestamp when the session ended
    CreateCallLinkRequest:
      type: object
      properties:
        title:
          type: string
          description: Human-readable title for the scheduled call
        scheduledStartAt:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the call is scheduled to start
        scheduledEndAt:
          type: string
          format: date-time
          description: ISO 8601 timestamp when the call is scheduled to end
        hostUserId:
          type: string
          description: User ID of the call host
        maxParticipants:
          type: integer
          description: Maximum number of participants (must be <= 1024)
        access:
          type: object
          description: Access configuration for the call link
          properties:
            visibility:
              type: string
              description: 'Visibility of the link: public or private'
            requireAuth:
              type: boolean
              description: Whether authentication is required to join
            allowedUserIds:
              type: array
              items:
                type: string
              description: Optional allowlist of user IDs for private calls
        signalProtocolSessionId:
          type: string
          description: Signal protocol session identifier for end-to-end encryption
        webRtcConfigId:
          type: string
          description: Reference to preconfigured WebRTC settings
      required:
      - title
      - scheduledStartAt
      - hostUserId
      - maxParticipants
      - signalProtocolSessionId
    CallLinkResponse:
      type: object
      properties:
        id:
          type: string
          description: Call link ID
        title:
          type: string
          description: Title for the scheduled call
        scheduledStartAt:
          type: string
          format: date-time
          description: Scheduled start time
        scheduledEndAt:
          type: string
          format: date-time
          description: Scheduled end time
        hostUserId:
          type: string
          description: Host user ID
        maxParticipants:
          type: integer
          description: Maximum number of participants
        access:
          type: object
          description: Access configuration
          properties:
            visibility:
              type: string
              description: public or private
            requireAuth:
              type: boolean
              description: Whether auth is required
        linkUrl:
          type: string
          description: Shareable call link URL
        status:
          type: string
          description: Current status of the scheduled call link
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
    ListCallLinksRequest:
      type: object
      properties: {}
    CallLinksListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of call links
          items:
            type: object
            properties:
              id:
                type: string
                description: Call link ID
              title:
                type: string
                description: Title
              scheduledStartAt:
                type: string
                format: date-time
                description: Scheduled start time
              scheduledEndAt:
                type: string
                format: date-time
                description: Scheduled end time
              hostUserId:
                type: string
                description: Host user ID
              status:
                type: string
                description: Status
              linkUrl:
                type: string
                description: Shareable call link URL
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Items per page
        totalItems:
          type: integer
          description: Total number of items
    GetCallLinkRequest:
      type: object
      properties: {}
    CallLinkDetailsResponse:
      type: object
      properties:
        id:
          type: string
          description: Call link ID
        title:
          type: string
          description: Title
        scheduledStartAt:
          type: string
          format: date-time
          description: Scheduled start time
        scheduledEndAt:
          type: string
          format: date-time
          description: Scheduled end time
        hostUserId:
          type: string
          description: Host user ID
        maxParticipants:
          type: integer
          description: Maximum participants
        access:
          type: object
          description: Access configuration
          properties:
            visibility:
              type: string
              description: public or private
            requireAuth:
              type: boolean
              description: Whether auth is required
            allowedUserIds:
              type: array
              items:
                type: string
              description: Allowlist user IDs
        signalProtocolSessionId:
          type: string
          description: Signal protocol session identifier
        webRtcConfigId:
          type: string
          description: WebRTC configuration reference
        linkUrl:
          type: string
          description: Shareable call link URL
        status:
          type: string
          description: Status
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
    UpdateCallLinkRequest:
      type: object
      properties:
        title:
          type: string
          description: Updated title
        scheduledStartAt:
          type: string
          format: date-time
          description: Updated start time
        scheduledEndAt:
          type: string
          format: date-time
          description: Updated end time
        maxParticipants:
          type: integer
          description: Updated maximum participants (<= 1024)
        access:
          type: object
          description: Updated access configuration
          properties:
            visibility:
              type: string
              description: public or private
            requireAuth:
              type: boolean
              description: Whether auth is required
            allowedUserIds:
              type: array
              items:
                type: string
              description: Allowlist user IDs
    CallLinkUpdateResponse:
      type: object
      properties:
        id:
          type: string
          description: Call link ID
        title:
          type: string
          description: Title
        scheduledStartAt:
          type: string
          format: date-time
          description: Scheduled start time
        scheduledEndAt:
          type: string
          format: date-time
          description: Scheduled end time
        maxParticipants:
          type: integer
          description: Maximum participants
        access:
          type: object
          description: Access configuration
          properties:
            visibility:
              type: string
              description: public or private
            requireAuth:
              type: boolean
              description: Whether auth is required
        status:
          type: string
          description: Status
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
    DeleteCallLinkRequest:
      type: object
      properties: {}
    DeleteCallLinkResponse:
      type: object
      properties:
        id:
          type: string
          description: Call link ID
        status:
          type: string
          description: Deletion status
        deletedAt:
          type: string
          format: date-time
          description: Deletion timestamp
    RejectCallRequest:
      type: object
      properties:
        reason:
          type: string
          description: Reason for rejection (e.g., busy, declined, unavailable)
        messageCiphertext:
          type: string
          description: End-to-end encrypted message payload (Signal Protocol)
        messageType:
          type: string
          description: Message type (e.g., text, quickReply)
        clientMessageId:
          type: string
          description: Client-generated idempotency key for offline queueing
        timestamp:
          type: string
          description: Client timestamp in ISO-8601 format
      required:
      - reason
      - clientMessageId
      - timestamp
    RejectCallResponse:
      type: object
      properties:
        callId:
          type: string
          description: Unique call identifier
        status:
          type: string
          description: Rejection status (e.g., rejected)
        messageQueued:
          type: boolean
          description: Indicates whether the message was queued for delivery
        serverTimestamp:
          type: string
          description: Server timestamp in ISO-8601 format
    CallLogListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of call logs
          items:
            type: object
            description: Call log entry
            properties:
              id:
                type: string
                description: Call log ID
              type:
                type: string
                description: 'Call type: voice or video'
              direction:
                type: string
                description: 'Direction: inbound or outbound'
              status:
                type: string
                description: 'Call status: completed, missed, declined, failed'
              startedAt:
                type: string
                description: ISO-8601 start time
              endedAt:
                type: string
                description: ISO-8601 end time
              durationSeconds:
                type: integer
                description: Call duration in seconds
              participants:
                type: array
                description: Participant user IDs
                items:
                  type: string
                  description: User ID
              webrtcSessionId:
                type: string
                description: WebRTC session identifier
              encryptedMetadata:
                type: string
                description: Signal Protocol encrypted metadata blob
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Items per page
        totalItems:
          type: integer
          description: Total number of call logs
    CallLogResponse:
      type: object
      properties:
        id:
          type: string
          description: Call log ID
        type:
          type: string
          description: 'Call type: voice or video'
        direction:
          type: string
          description: 'Direction: inbound or outbound'
        status:
          type: string
          description: 'Call status: completed, missed, declined, failed'
        startedAt:
          type: string
          description: ISO-8601 start time
        endedAt:
          type: string
          description: ISO-8601 end time
        durationSeconds:
          type: integer
          description: Call duration in seconds
        participants:
          type: array
          description: Participant user IDs
          items:
            type: string
            description: User ID
        webrtcSessionId:
          type: string
          description: WebRTC session identifier
        encryptedMetadata:
          type: string
          description: Signal Protocol encrypted metadata blob
    CreateCallLogRequest:
      type: object
      properties:
        type:
          type: string
          description: 'Call type: voice or video'
        direction:
          type: string
          description: 'Direction: inbound or outbound'
        status:
          type: string
          description: 'Call status: completed, missed, declined, failed'
        startedAt:
          type: string
          description: ISO-8601 start time
        endedAt:
          type: string
          description: ISO-8601 end time
        durationSeconds:
          type: integer
          description: Call duration in seconds
        participants:
          type: array
          description: Participant user IDs
          items:
            type: string
            description: User ID
        webrtcSessionId:
          type: string
          description: WebRTC session identifier
        encryptedMetadata:
          type: string
          description: Signal Protocol encrypted metadata blob
      required:
      - type
      - direction
      - status
      - startedAt
      - participants
      - webrtcSessionId
      - encryptedMetadata
    CreateCallLogResponse:
      type: object
      properties:
        id:
          type: string
          description: Call log ID
        createdAt:
          type: string
          description: ISO-8601 creation timestamp
    DeleteCallLogResponse:
      type: object
      properties:
        id:
          type: string
          description: Deleted call log ID
        deleted:
          type: boolean
          description: Deletion result
    CreateStatusRequest:
      type: object
      properties:
        ciphertext:
          type: string
          description: End-to-end encrypted payload containing status content
        mediaId:
          type: string
          description: Optional media identifier for pre-uploaded media (image/document).
        mediaType:
          type: string
          description: Optional media type (e.g., image/jpeg, application/pdf).
        expiresInSeconds:
          type: integer
          description: Expiration time in seconds; maximum 86400 (24 hours).
        clientTimestamp:
          type: string
          description: Client timestamp in ISO 8601 format.
      required:
      - ciphertext
      - expiresInSeconds
      - clientTimestamp
    StatusResponse:
      type: object
      properties:
        id:
          type: string
          description: Status ID
        createdAt:
          type: string
          description: Creation timestamp in ISO 8601 format
        expiresAt:
          type: string
          description: Expiration timestamp in ISO 8601 format
        mediaId:
          type: string
          description: Optional media identifier if attached
        status:
          type: string
          description: Status state (e.g., created)
    ContactStatusResponse:
      type: object
      properties:
        contactId:
          type: string
          description: Contact ID
        statusId:
          type: string
          description: Status ID
        text:
          type: string
          description: Status text
        mediaUrl:
          type: string
          description: Encrypted media URL
        mediaType:
          type: string
          description: Media type (image, video, document)
        createdAt:
          type: string
          description: ISO 8601 timestamp of status creation
        expiresAt:
          type: string
          description: ISO 8601 timestamp when status expires
    ContactStatusListResponse:
      type: object
      properties:
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of available statuses
        items:
          type: array
          description: List of contact statuses
          items:
            type: object
            properties:
              contactId:
                type: string
                description: Contact ID
              statusId:
                type: string
                description: Status ID
              text:
                type: string
                description: Status text
              mediaUrl:
                type: string
                description: Encrypted media URL
              mediaType:
                type: string
                description: Media type (image, video, document)
              createdAt:
                type: string
                description: ISO 8601 timestamp of status creation
              expiresAt:
                type: string
                description: ISO 8601 timestamp when status expires
    CreateStatusReplyRequest:
      type: object
      properties:
        clientMessageId:
          type: string
          description: Client-generated idempotency key for offline queueing
        ciphertext:
          type: string
          description: Encrypted reply payload (Signal Protocol)
        media:
          type: object
          description: Optional encrypted media metadata
          properties:
            mediaId:
              type: string
              description: Reference to previously uploaded encrypted media
            mediaType:
              type: string
              description: 'Type of media: image or document'
            sizeBytes:
              type: integer
              description: Size of media in bytes (max 16MB for images, 2GB for documents)
        replyToMessageId:
          type: string
          description: Optional message id being replied to within the status thread
      required:
      - clientMessageId
      - ciphertext
    StatusReplyResponse:
      type: object
      properties:
        id:
          type: string
          description: Reply ID
        statusId:
          type: string
          description: ID of the status
        senderId:
          type: string
          description: ID of the sender
        createdAt:
          type: string
          description: ISO-8601 timestamp of creation
        deliveryState:
          type: string
          description: Delivery state for offline queueing
    StatusReplyListResponse:
      type: object
      properties:
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Items per page
        total:
          type: integer
          description: Total number of replies
        items:
          type: array
          description: List of replies
          items:
            type: object
            properties:
              id:
                type: string
                description: Reply ID
              senderId:
                type: string
                description: ID of the sender
              ciphertext:
                type: string
                description: Encrypted reply payload (Signal Protocol)
              createdAt:
                type: string
                description: ISO-8601 timestamp of creation
    DeleteStatusReplyResponse:
      type: object
      properties:
        id:
          type: string
          description: Reply ID
        deleted:
          type: boolean
          description: Deletion result
    GetStatusVisibilitySettingsRequest:
      type: object
      properties: {}
    StatusVisibilitySettingsResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        visibilityMode:
          type: string
          description: 'Visibility mode: everyone, contacts, contactsExcept, onlyShareWith'
        contactsExcept:
          type: array
          description: List of contact IDs excluded from viewing status
          items:
            type: string
        onlyShareWith:
          type: array
          description: List of contact IDs allowed to view status
          items:
            type: string
        updatedAt:
          type: string
          description: Last update timestamp in ISO 8601 format
    UpdateStatusVisibilitySettingsRequest:
      type: object
      properties:
        visibilityMode:
          type: string
          description: 'Visibility mode: everyone, contacts, contactsExcept, onlyShareWith'
        contactsExcept:
          type: array
          description: List of contact IDs excluded from viewing status (required
            when visibilityMode=contactsExcept)
          items:
            type: string
        onlyShareWith:
          type: array
          description: List of contact IDs allowed to view status (required when visibilityMode=onlyShareWith)
          items:
            type: string
      required:
      - visibilityMode
    CreateStatusMuteRequest:
      type: object
      properties:
        contactId:
          type: string
          description: ID of the contact whose status should be muted
        muteUntil:
          type: string
          description: ISO 8601 timestamp until which the status is muted; omit for
            indefinite mute
      required:
      - contactId
    StatusMuteResponse:
      type: object
      properties:
        id:
          type: string
          description: Mute resource ID
        contactId:
          type: string
          description: Muted contact ID
        mutedAt:
          type: string
          description: ISO 8601 timestamp when mute was created
        muteUntil:
          type: string
          description: ISO 8601 timestamp until which the status is muted; null if
            indefinite
    ListStatusMutesRequest:
      type: object
      properties: {}
    StatusMuteListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of status mutes
          items:
            type: object
            description: Status mute item
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of muted contacts
    DeleteStatusMuteRequest:
      type: object
      properties: {}
    DeleteStatusMuteResponse:
      type: object
      properties:
        contactId:
          type: string
          description: Unmuted contact ID
        deleted:
          type: boolean
          description: Indicates if the mute was deleted
    UploadImageRequest:
      type: object
      properties:
        file:
          type: string
          format: binary
          description: Image file (max 16MB)
        encryptionInfo:
          type: string
          description: Signal Protocol encryption metadata (e.g., key, IV, MAC) encoded
            as JSON string
        mimeType:
          type: string
          description: MIME type of the image (e.g., image/jpeg, image/png)
      required:
      - file
      - mimeType
    UploadImageResponse:
      type: object
      properties:
        mediaId:
          type: string
          description: Unique ID of the uploaded image
        sizeBytes:
          type: integer
          description: Size of the uploaded image in bytes
        mimeType:
          type: string
          description: MIME type of the uploaded image
        createdAt:
          type: string
          description: ISO-8601 timestamp of upload
    SendImageMessageRequest:
      type: object
      properties:
        messageId:
          type: string
          description: Client-generated message ID for offline queueing and deduplication
        mediaId:
          type: string
          description: ID of the uploaded image to attach
        caption:
          type: string
          description: Optional caption text
        encryptionInfo:
          type: string
          description: Signal Protocol encryption metadata for the message payload
            encoded as JSON string
      required:
      - messageId
      - mediaId
    SendImageMessageResponse:
      type: object
      properties:
        id:
          type: string
          description: Server-generated message ID
        messageId:
          type: string
          description: Client-generated message ID
        conversationId:
          type: string
          description: Conversation ID
        mediaId:
          type: string
          description: Attached image media ID
        status:
          type: string
          description: Delivery status (e.g., queued, sent)
        createdAt:
          type: string
          description: ISO-8601 timestamp of creation
    UploadVideoRequest:
      type: object
      properties:
        file:
          type: string
          format: binary
          description: Encrypted video file payload
        mimeType:
          type: string
          description: MIME type of the video, e.g., video/mp4
        fileSize:
          type: integer
          description: Size of the encrypted video in bytes
        encryption:
          type: object
          description: Signal Protocol encryption metadata for end-to-end encryption
          properties:
            keyId:
              type: string
              description: Identifier of the encryption key used
            iv:
              type: string
              description: Initialization vector used for encryption
            sha256:
              type: string
              description: SHA-256 hash of the encrypted payload
      required:
      - file
      - mimeType
      - fileSize
      - encryption
    UploadVideoResponse:
      type: object
      properties:
        mediaId:
          type: string
          description: Identifier of the uploaded video media
        uploadUrl:
          type: string
          description: Optional resumable upload URL for large files
        expiresAt:
          type: string
          description: Expiration timestamp for the media reference
    SendVideoMessageRequest:
      type: object
      properties:
        clientMessageId:
          type: string
          description: Client-generated id for offline queueing and idempotency
        recipientType:
          type: string
          description: 'Recipient type: user, group, or broadcast'
        recipientId:
          type: string
          description: Target userId, groupId, or broadcastId
        mediaId:
          type: string
          description: Reference to the uploaded video media
        caption:
          type: string
          description: Optional caption text
        encryption:
          type: object
          description: Signal Protocol message encryption metadata
          properties:
            ciphertext:
              type: string
              description: Encrypted message payload
            senderKeyId:
              type: string
              description: Sender key identifier used for encryption
      required:
      - clientMessageId
      - recipientType
      - recipientId
      - mediaId
      - encryption
    SendVideoMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Server-generated message ID
        status:
          type: string
          description: Message delivery status
        queuedAt:
          type: string
          description: Timestamp when the message was queued/sent
    SendDocumentMessageRequest:
      type: object
      properties:
        recipientType:
          type: string
          description: 'Target type: ''user'', ''group'', or ''broadcastList'''
        recipientId:
          type: string
          description: ID of the target user, group, or broadcast list
        clientMessageId:
          type: string
          description: Client-generated idempotency key for offline queue reconciliation
        caption:
          type: string
          description: Optional caption for the document
        encryptedPayload:
          type: string
          description: Base64-encoded Signal Protocol encrypted message payload
        attachmentKey:
          type: string
          description: Base64-encoded key for encrypting the document attachment
        attachmentIv:
          type: string
          description: Base64-encoded IV for attachment encryption
        attachmentSha256:
          type: string
          description: Base64-encoded SHA-256 hash of the encrypted attachment
        file:
          type: string
          format: binary
          description: Document file content (max 2GB)
        fileName:
          type: string
          description: Original file name
        mimeType:
          type: string
          description: MIME type of the document
        sizeBytes:
          type: integer
          description: File size in bytes
      required:
      - recipientType
      - recipientId
      - clientMessageId
      - encryptedPayload
      - attachmentKey
      - attachmentIv
      - attachmentSha256
      - file
      - fileName
      - mimeType
      - sizeBytes
    SendDocumentMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Server-generated message ID
        documentId:
          type: string
          description: Server-generated document attachment ID
        status:
          type: string
          description: 'Delivery status: ''queued'', ''sent'', or ''delivered'''
        createdAt:
          type: string
          description: ISO-8601 timestamp of message creation
    CreateMediaDraftRequest:
      type: object
      properties:
        file:
          type: string
          format: binary
          description: Image file to edit (max 16MB)
        clientDraftId:
          type: string
          description: Client-generated draft ID for offline queue reconciliation
      required:
      - file
    MediaDraftResponse:
      type: object
      properties:
        draftId:
          type: string
          description: Server-generated draft ID
        status:
          type: string
          description: Draft status (e.g., created)
        sizeBytes:
          type: integer
          description: Size of the uploaded image in bytes
    UpdateMediaDraftEditsRequest:
      type: object
      properties:
        crop:
          type: object
          description: Crop rectangle in pixels
          properties:
            x:
              type: integer
              description: Top-left X coordinate
            y:
              type: integer
              description: Top-left Y coordinate
            width:
              type: integer
              description: Width of crop area
            height:
              type: integer
              description: Height of crop area
        rotate:
          type: integer
          description: Rotation in degrees (e.g., 0, 90, 180, 270)
        filter:
          type: string
          description: Filter name (e.g., none, mono, vivid)
        adjustments:
          type: object
          description: Basic adjustments
          properties:
            brightness:
              type: number
              description: Brightness adjustment (-1.0 to 1.0)
            contrast:
              type: number
              description: Contrast adjustment (-1.0 to 1.0)
            saturation:
              type: number
              description: Saturation adjustment (-1.0 to 1.0)
    MediaDraftEditsResponse:
      type: object
      properties:
        draftId:
          type: string
          description: Draft ID
        status:
          type: string
          description: Edit status (e.g., updated)
        appliedEdits:
          type: object
          description: Echo of applied edits
    FinalizeMediaDraftRequest:
      type: object
      properties:
        clientFinalizeId:
          type: string
          description: Client-generated ID for offline queue reconciliation
    FinalizeMediaDraftResponse:
      type: object
      properties:
        mediaId:
          type: string
          description: Finalized media asset ID
        draftId:
          type: string
          description: Draft ID
        status:
          type: string
          description: Finalization status (e.g., finalized)
    StickerPackListResponse:
      type: object
      properties:
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of sticker packs available
        items:
          type: array
          description: List of sticker packs
          items:
            type: object
            properties:
              id:
                type: string
                description: Sticker pack ID
              name:
                type: string
                description: Sticker pack name
              regionCode:
                type: string
                description: Region or locale code for which the pack is available
              thumbnailUrl:
                type: string
                description: URL of the pack thumbnail
              stickerCount:
                type: integer
                description: Number of stickers in the pack
    StickerListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of stickers
          items:
            type: object
            properties:
              stickerId:
                type: string
                description: Sticker ID
              imageUrl:
                type: string
                description: Sticker image URL
              width:
                type: integer
                description: Sticker image width
              height:
                type: integer
                description: Sticker image height
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Page size
        total:
          type: integer
          description: Total number of stickers
    SendStickerMessageRequest:
      type: object
      properties:
        messageId:
          type: string
          description: Client-generated message ID for offline queue deduplication
        type:
          type: string
          description: Message type, must be 'sticker'
        stickerId:
          type: string
          description: Sticker ID to send
        encryptedPayload:
          type: string
          description: End-to-end encrypted payload (Signal Protocol)
        sentAt:
          type: string
          description: Client timestamp in ISO 8601
      required:
      - messageId
      - type
      - stickerId
      - encryptedPayload
    SearchGifsRequest:
      type: object
      properties: {}
    GifSearchResponse:
      type: object
      properties:
        items:
          type: array
          description: List of GIF results
          items:
            type: object
            properties:
              gifId:
                type: string
                description: Unique GIF identifier
              title:
                type: string
                description: Title or short description of the GIF
              previewUrl:
                type: string
                description: URL for low-bandwidth preview
              mediaUrl:
                type: string
                description: URL for full GIF media
              width:
                type: integer
                description: GIF width in pixels
              height:
                type: integer
                description: GIF height in pixels
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        total:
          type: integer
          description: Total number of matching GIFs
    SendGifMessageRequest:
      type: object
      properties:
        recipientType:
          type: string
          description: 'Target type: user, group, or broadcast'
        recipientId:
          type: string
          description: ID of the target user, group, or broadcast list
        gifId:
          type: string
          description: Identifier of the selected GIF from search results
        mediaUrl:
          type: string
          description: Resolved URL to the GIF media (if required by client)
        caption:
          type: string
          description: Optional caption for the GIF
        encryptedPayload:
          type: string
          description: End-to-end encrypted message payload using Signal Protocol
        clientMessageId:
          type: string
          description: Client-generated id for offline queue de-duplication
      required:
      - recipientType
      - recipientId
      - gifId
      - encryptedPayload
      - clientMessageId
    SendGifMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Server-assigned message identifier
        status:
          type: string
          description: 'Delivery status: queued or sent'
        timestamp:
          type: string
          description: Server timestamp in ISO-8601 format
    UploadChatMediaRequest:
      type: object
      properties:
        file:
          type: string
          format: binary
          description: Media file captured by camera
        mediaType:
          type: string
          description: Type of media (image|video|document)
        mimeType:
          type: string
          description: MIME type of the media
        captureSource:
          type: string
          description: Capture source, must be 'camera' for direct camera integration
        encryptedMediaKey:
          type: string
          description: Encrypted media key for Signal Protocol E2E encryption
        encryptedThumbnail:
          type: string
          description: Optional encrypted thumbnail data (base64)
        width:
          type: integer
          description: Image/video width in pixels
        height:
          type: integer
          description: Image/video height in pixels
        durationMs:
          type: integer
          description: Video duration in milliseconds (if mediaType=video)
      required:
      - file
      - mediaType
      - mimeType
      - captureSource
      - encryptedMediaKey
    ChatMediaResponse:
      type: object
      properties:
        mediaId:
          type: string
          description: Uploaded media ID
        chatId:
          type: string
          description: Chat ID
        mediaType:
          type: string
          description: Type of media (image|video|document)
        mimeType:
          type: string
          description: MIME type of the media
        sizeBytes:
          type: integer
          description: Size of the uploaded media in bytes
        createdAt:
          type: string
          description: Upload timestamp in ISO-8601 format
    CreateChatMediaMessageRequest:
      type: object
      properties:
        mediaId:
          type: string
          description: ID of uploaded media
        messageType:
          type: string
          description: Message type, must be 'media'
        encryptedPayload:
          type: string
          description: Encrypted message payload using Signal Protocol
        clientMessageId:
          type: string
          description: Client-generated ID for offline queue de-duplication
      required:
      - mediaId
      - messageType
      - encryptedPayload
      - clientMessageId
    ChatMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Created message ID
        chatId:
          type: string
          description: Chat ID
        mediaId:
          type: string
          description: Referenced media ID
        status:
          type: string
          description: Message status (queued|sent|delivered)
        createdAt:
          type: string
          description: Message creation timestamp in ISO-8601 format
    GetChatMediaRequest:
      type: object
      properties: {}
    GetChatMediaResponse:
      type: object
      properties:
        mediaId:
          type: string
          description: Media ID
        chatId:
          type: string
          description: Chat ID
        downloadUrl:
          type: string
          description: Time-limited URL to download the media
        expiresAt:
          type: string
          description: Download URL expiration timestamp in ISO-8601 format
        mimeType:
          type: string
          description: MIME type of the media
        sizeBytes:
          type: integer
          description: Size of the media in bytes
    CreateAudioMessageRequest:
      type: object
      properties:
        threadId:
          type: string
          description: ID of the target thread (direct chat, group, or broadcast list)
        threadType:
          type: string
          description: 'Type of the target thread: direct, group, or broadcast'
        clientMessageId:
          type: string
          description: Client-generated idempotency key for offline queue and retry
        mimeType:
          type: string
          description: MIME type of the audio file (e.g., audio/ogg, audio/mpeg)
        durationMs:
          type: integer
          description: Audio duration in milliseconds
        sizeBytes:
          type: integer
          description: Size of the audio file in bytes
        signalCiphertext:
          type: string
          description: Signal Protocol encrypted payload metadata for the message
        keyId:
          type: string
          description: Identifier of the Signal Protocol session key
        nonce:
          type: string
          description: Nonce/IV used for encrypting the media
        file:
          type: string
          format: binary
          description: Binary audio file data
      required:
      - threadId
      - threadType
      - clientMessageId
      - mimeType
      - durationMs
      - sizeBytes
      - signalCiphertext
      - keyId
      - nonce
      - file
    AudioMessageResponse:
      type: object
      properties:
        audioMessageId:
          type: string
          description: Unique ID of the created audio message
        threadId:
          type: string
          description: ID of the target thread
        status:
          type: string
          description: Message delivery status (queued, sent, delivered)
        createdAt:
          type: string
          description: ISO 8601 timestamp when the audio message was created
    DownloadAudioMessageRequest:
      type: object
      properties: {}
    AudioMessageDownloadResponse:
      type: object
      properties:
        audioMessageId:
          type: string
          description: ID of the audio message
        downloadUrl:
          type: string
          description: Pre-signed URL for downloading the encrypted audio file
        expiresAt:
          type: string
          description: ISO 8601 timestamp when the download URL expires
    GalleryItemListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of gallery items
          items:
            type: object
            properties:
              mediaId:
                type: string
                description: Media item identifier
              type:
                type: string
                description: Media type (image, video, document)
              fileName:
                type: string
                description: Original file name
              sizeBytes:
                type: integer
                description: Size of the media in bytes
              createdAt:
                type: string
                description: Creation timestamp (ISO 8601)
              thumbnailUrl:
                type: string
                description: Thumbnail URL if available
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Page size
        totalItems:
          type: integer
          description: Total number of items
    CreateMediaUploadSessionRequest:
      type: object
      properties:
        mediaType:
          type: string
          description: 'Type of media: image, video, audio, document'
        fileName:
          type: string
          description: Original file name
        fileSize:
          type: integer
          description: Total file size in bytes
        mimeType:
          type: string
          description: MIME type of the media
        checksum:
          type: string
          description: SHA-256 checksum of the encrypted file
        hd:
          type: boolean
          description: Whether HD quality is requested
        encryptionMetadata:
          type: object
          description: Signal Protocol encryption metadata for the media key and IV
      required:
      - mediaType
      - fileName
      - fileSize
      - mimeType
      - checksum
      - hd
      - encryptionMetadata
    CreateMediaUploadSessionResponse:
      type: object
      properties:
        uploadId:
          type: string
          description: Upload session identifier
        partSize:
          type: integer
          description: Recommended chunk size in bytes
        expiresAt:
          type: string
          description: Upload session expiration timestamp
        maxFileSize:
          type: integer
          description: Maximum allowed file size for this media type
    UploadMediaPartRequest:
      type: object
      properties:
        file:
          type: string
          format: binary
          description: Encrypted media chunk
      required:
      - file
    UploadMediaPartResponse:
      type: object
      properties:
        uploadId:
          type: string
          description: Upload session identifier
        partNumber:
          type: integer
          description: Uploaded chunk number
        etag:
          type: string
          description: ETag for the uploaded chunk
    CompleteMediaUploadRequest:
      type: object
      properties:
        parts:
          type: array
          description: List of uploaded chunks with their ETags
          items:
            type: object
            properties:
              partNumber:
                type: integer
                description: Chunk number
              etag:
                type: string
                description: ETag of the chunk
      required:
      - parts
    CompleteMediaUploadResponse:
      type: object
      properties:
        mediaId:
          type: string
          description: Created media resource identifier
        downloadUrl:
          type: string
          description: URL for downloading the encrypted media
        contentLength:
          type: integer
          description: Total size in bytes
        mimeType:
          type: string
          description: MIME type of the media
        hd:
          type: boolean
          description: Whether the media is HD quality
    SendMediaMessageRequest:
      type: object
      properties:
        conversationId:
          type: string
          description: Conversation or group ID
        recipientIds:
          type: array
          description: Recipient user IDs for direct or broadcast
          items:
            type: string
        mediaId:
          type: string
          description: Media resource identifier
        caption:
          type: string
          description: Optional caption text
        encryptionPayload:
          type: object
          description: Signal Protocol encrypted message payload
        messageQueueId:
          type: string
          description: Client offline queue ID for deduplication
      required:
      - mediaId
      - encryptionPayload
    SendMediaMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Created message identifier
        status:
          type: string
          description: Delivery status
        createdAt:
          type: string
          description: Message creation timestamp
    GetMediaRequest:
      type: object
      properties: {}
    GetMediaResponse:
      type: object
      properties:
        mediaId:
          type: string
          description: Media resource identifier
        downloadUrl:
          type: string
          description: URL for downloading the encrypted media
        mimeType:
          type: string
          description: MIME type of the media
        contentLength:
          type: integer
          description: Total size in bytes
        hd:
          type: boolean
          description: Whether the media is HD quality
        expiresAt:
          type: string
          description: Download URL expiration timestamp
    RegisterEncryptionKeysRequest:
      type: object
      properties:
        deviceId:
          type: string
          description: Client device identifier
        identityKey:
          type: string
          description: Base64-encoded identity public key
        signedPreKey:
          type: string
          description: Base64-encoded signed prekey public key
        signedPreKeySignature:
          type: string
          description: Base64-encoded signature of the signed prekey
        oneTimePreKeys:
          type: array
          description: Array of base64-encoded one-time prekeys
          items:
            type: string
            description: One-time prekey
      required:
      - deviceId
      - identityKey
      - signedPreKey
      - signedPreKeySignature
      - oneTimePreKeys
    RegisterEncryptionKeysResponse:
      type: object
      properties:
        deviceId:
          type: string
          description: Client device identifier
        status:
          type: string
          description: Registration status
    GetRecipientPreKeysRequest:
      type: object
      properties: {}
    RecipientPreKeysResponse:
      type: object
      properties:
        recipientId:
          type: string
          description: Recipient user identifier
        deviceId:
          type: string
          description: Recipient device identifier
        identityKey:
          type: string
          description: Base64-encoded identity public key
        signedPreKey:
          type: string
          description: Base64-encoded signed prekey public key
        signedPreKeySignature:
          type: string
          description: Base64-encoded signature of the signed prekey
        oneTimePreKey:
          type: string
          description: Base64-encoded one-time prekey
    SendEncryptedMessageRequest:
      type: object
      properties:
        conversationId:
          type: string
          description: Conversation identifier
        recipientId:
          type: string
          description: Recipient user identifier (for 1:1 or broadcast)
        ciphertext:
          type: string
          description: Base64-encoded encrypted message payload
        messageType:
          type: string
          description: Type of message (text, media, status, signal)
        clientMessageId:
          type: string
          description: Client-generated idempotency key
      required:
      - ciphertext
      - messageType
      - clientMessageId
    SendEncryptedMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Server-assigned message identifier
        status:
          type: string
          description: Delivery state (queued, delivered)
    ListQueuedMessagesRequest:
      type: object
      properties: {}
    QueuedMessagesResponse:
      type: object
      properties:
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Items per page
        total:
          type: integer
          description: Total queued messages
        items:
          type: array
          description: Queued encrypted messages
          items:
            type: object
            description: Encrypted message
            properties:
              messageId:
                type: string
                description: Server-assigned message identifier
              conversationId:
                type: string
                description: Conversation identifier
              senderId:
                type: string
                description: Sender user identifier
              ciphertext:
                type: string
                description: Base64-encoded encrypted message payload
              messageType:
                type: string
                description: Type of message (text, media, status, signal)
              sentAt:
                type: string
                description: ISO-8601 timestamp
    AcknowledgeMessageRequest:
      type: object
      properties:
        deviceId:
          type: string
          description: Client device identifier
      required:
      - deviceId
    AcknowledgeMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Message identifier
        status:
          type: string
          description: Acknowledgement status
    CreateSecurityCodeVerificationRequest:
      type: object
      properties:
        contactId:
          type: string
          description: ID of the contact to verify with
        channel:
          type: string
          description: Verification channel
          enum:
          - numeric
          - qr
          - voice
        deviceId:
          type: string
          description: Optional device identifier for multi-device verification
      required:
      - contactId
      - channel
    SecurityCodeVerificationResponse:
      type: object
      properties:
        verificationId:
          type: string
          description: Verification session ID
        contactId:
          type: string
          description: ID of the contact being verified
        safetyCode:
          type: string
          description: Human-readable safety code for manual comparison
        qrPayload:
          type: string
          description: QR payload for scanning (present when channel=qr)
        status:
          type: string
          description: Current verification status
          enum:
          - pending
          - confirmed
          - rejected
          - expired
        expiresAt:
          type: string
          description: Expiration timestamp (ISO-8601)
    GetSecurityCodeVerificationRequest:
      type: object
      properties: {}
    ConfirmSecurityCodeVerificationRequest:
      type: object
      properties:
        matched:
          type: boolean
          description: Whether the safety codes matched
        confirmedAt:
          type: string
          description: Client confirmation timestamp (ISO-8601)
      required:
      - matched
    SecurityCodeVerificationConfirmResponse:
      type: object
      properties:
        verificationId:
          type: string
          description: Verification session ID
        status:
          type: string
          description: Updated verification status
          enum:
          - confirmed
          - rejected
          - expired
        updatedAt:
          type: string
          description: Server update timestamp (ISO-8601)
    ListSecurityCodeVerificationsRequest:
      type: object
      properties: {}
    SecurityCodeVerificationListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of verification sessions
          items:
            type: object
            properties:
              verificationId:
                type: string
                description: Verification session ID
              contactId:
                type: string
                description: ID of the contact being verified
              status:
                type: string
                description: Current verification status
                enum:
                - pending
                - confirmed
                - rejected
                - expired
              createdAt:
                type: string
                description: Creation timestamp (ISO-8601)
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of items
        totalPages:
          type: integer
          description: Total number of pages
    AppLockStatusResponse:
      type: object
      properties:
        enabled:
          type: boolean
          description: Indicates whether app lock is enabled
        lockMethod:
          type: string
          description: Authentication method used for app lock (e.g., pin, biometrics)
        failedAttempts:
          type: integer
          description: Number of consecutive failed unlock attempts
        lockoutUntil:
          type: string
          description: ISO-8601 timestamp until which unlock is blocked due to too
            many attempts
    UpdateAppLockRequest:
      type: object
      properties:
        enabled:
          type: boolean
          description: Enable or disable app lock
        lockMethod:
          type: string
          description: Authentication method for app lock (e.g., pin, biometrics)
        pin:
          type: string
          description: PIN code used when lockMethod is pin; must be encrypted client-side
        lockTimeoutSeconds:
          type: integer
          description: Auto-lock timeout in seconds
      required:
      - enabled
      - lockMethod
    UpdateAppLockResponse:
      type: object
      properties:
        enabled:
          type: boolean
          description: Indicates whether app lock is enabled after update
        lockMethod:
          type: string
          description: Configured authentication method
        lockTimeoutSeconds:
          type: integer
          description: Configured auto-lock timeout in seconds
    VerifyAppLockRequest:
      type: object
      properties:
        lockMethod:
          type: string
          description: Authentication method used for verification (e.g., pin, biometrics)
        pin:
          type: string
          description: PIN code used for verification; must be encrypted client-side
        deviceNonce:
          type: string
          description: Client-generated nonce to prevent replay attacks
      required:
      - lockMethod
      - deviceNonce
    VerifyAppLockResponse:
      type: object
      properties:
        verified:
          type: boolean
          description: Indicates whether verification succeeded
        sessionUnlockedUntil:
          type: string
          description: ISO-8601 timestamp until which the session remains unlocked
    BlockContactRequest:
      type: object
      properties:
        contactId:
          type: string
          description: ID of the contact to block
        reason:
          type: string
          description: Optional reason for blocking
      required:
      - contactId
    BlockContactResponse:
      type: object
      properties:
        blockId:
          type: string
          description: Block relationship ID
        userId:
          type: string
          description: User ID who blocked
        contactId:
          type: string
          description: Blocked contact ID
        createdAt:
          type: string
          description: ISO-8601 timestamp when the block was created
    ListBlockedContactsRequest:
      type: object
      properties: {}
    BlockedContactsListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of blocked contacts
          items:
            type: object
            properties:
              blockId:
                type: string
                description: Block relationship ID
              contactId:
                type: string
                description: Blocked contact ID
              createdAt:
                type: string
                description: ISO-8601 timestamp when the block was created
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of blocked contacts
    UnblockContactRequest:
      type: object
      properties: {}
    UnblockContactResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID who unblocked
        contactId:
          type: string
          description: Contact ID unblocked
        deleted:
          type: boolean
          description: Whether the block was removed
        deletedAt:
          type: string
          description: ISO-8601 timestamp when the block was removed
    CreateReportRequest:
      type: object
      properties:
        targetType:
          type: string
          description: 'Type of target being reported. Allowed values: message, contact'
        targetId:
          type: string
          description: ID of the message or contact being reported
        reasonCode:
          type: string
          description: Predefined reason code for the report (e.g., spam, harassment,
            fraud, impersonation)
        details:
          type: string
          description: Optional free-text details provided by the reporter
      required:
      - targetType
      - targetId
      - reasonCode
    ReportResponse:
      type: object
      properties:
        id:
          type: string
          description: Report ID
        status:
          type: string
          description: Current status of the report (e.g., submitted, under_review)
        createdAt:
          type: string
          description: ISO 8601 timestamp when the report was created
    EnablePinRequest:
      type: object
      properties:
        pin:
          type: string
          description: User-defined PIN (4-8 digits)
          format: password
        pinHint:
          type: string
          description: Optional hint to help the user remember the PIN
      required:
      - pin
    EnablePinResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        pinEnabled:
          type: boolean
          description: Indicates whether PIN security is enabled
        enabledAt:
          type: string
          description: Timestamp when PIN was enabled
          format: date-time
    UpdatePinRequest:
      type: object
      properties:
        currentPin:
          type: string
          description: Current PIN for verification
          format: password
        newPin:
          type: string
          description: New PIN (4-8 digits)
          format: password
        pinHint:
          type: string
          description: Optional hint to help the user remember the PIN
      required:
      - currentPin
      - newPin
    UpdatePinResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        pinEnabled:
          type: boolean
          description: Indicates whether PIN security is enabled
        updatedAt:
          type: string
          description: Timestamp when PIN was updated
          format: date-time
    DisablePinRequest:
      type: object
      properties:
        pin:
          type: string
          description: Current PIN for verification
          format: password
      required:
      - pin
    DisablePinResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        pinEnabled:
          type: boolean
          description: Indicates whether PIN security is enabled
        disabledAt:
          type: string
          description: Timestamp when PIN was disabled
          format: date-time
    GetPinStatusRequest:
      type: object
      properties: {}
    GetPinStatusResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        pinEnabled:
          type: boolean
          description: Indicates whether PIN security is enabled
        enabledAt:
          type: string
          description: Timestamp when PIN was enabled
          format: date-time
    VerifyPinRequest:
      type: object
      properties:
        tempAuthToken:
          type: string
          description: Temporary token issued after primary authentication
        pin:
          type: string
          description: User PIN for verification
          format: password
      required:
      - tempAuthToken
      - pin
    VerifyPinResponse:
      type: object
      properties:
        accessToken:
          type: string
          description: Access token issued after successful PIN verification
        refreshToken:
          type: string
          description: Refresh token issued after successful PIN verification
        expiresIn:
          type: integer
          description: Access token expiration time in seconds
    CreateSpamCheckRequest:
      type: object
      properties:
        messageId:
          type: string
          description: Unique message identifier
        senderId:
          type: string
          description: User ID of the sender
        conversationId:
          type: string
          description: Chat or group ID
        messageType:
          type: string
          description: Type of message (text, media, status)
        contentHash:
          type: string
          description: Hash of plaintext content or attachment for spam fingerprinting
        clientTimestamp:
          type: string
          description: ISO-8601 timestamp from client
        signalMetadata:
          type: object
          description: Minimal metadata allowed under E2E encryption (e.g., attachment
            size, link count)
      required:
      - messageId
      - senderId
      - conversationId
      - messageType
      - contentHash
      - clientTimestamp
    CreateSpamCheckResponse:
      type: object
      properties:
        spamCheckId:
          type: string
          description: Spam check job ID
        status:
          type: string
          description: Current status of the spam check (queued, processing, completed)
    GetSpamCheckRequest:
      type: object
      properties: {}
    GetSpamCheckResponse:
      type: object
      properties:
        spamCheckId:
          type: string
          description: Spam check job ID
        status:
          type: string
          description: Status of the spam check (queued, processing, completed)
        isSpam:
          type: boolean
          description: Spam classification result
        score:
          type: number
          description: Spam score between 0 and 1
        reasonCodes:
          type: array
          description: List of rule or model signals that contributed to the decision
          items:
            type: string
        evaluatedAt:
          type: string
          description: ISO-8601 timestamp when evaluation completed
    GetCallPrivacySettingsRequest:
      type: object
      properties: {}
    CallPrivacySettingsResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        ipMaskingEnabled:
          type: boolean
          description: Whether IP address masking is enabled for calls
        lastUpdatedAt:
          type: string
          description: ISO-8601 timestamp of last update
    UpdateCallPrivacySettingsRequest:
      type: object
      properties:
        ipMaskingEnabled:
          type: boolean
          description: Enable or disable IP address masking for calls
      required:
      - ipMaskingEnabled
    CreateCallSessionRequest:
      type: object
      properties:
        callerId:
          type: string
          description: Caller user ID
        calleeIds:
          type: array
          description: List of callee user IDs
          items:
            type: string
        mediaType:
          type: string
          description: 'Call type: voice or video'
        ipMaskingEnabled:
          type: boolean
          description: Whether to enforce IP address masking for this session
      required:
      - callerId
      - calleeIds
      - mediaType
      - ipMaskingEnabled
    CallSessionResponse:
      type: object
      properties:
        callSessionId:
          type: string
          description: Call session ID
        relayRequired:
          type: boolean
          description: Indicates if relay servers are required to mask IP addresses
        turnServers:
          type: array
          description: TURN server credentials for relayed connections
          items:
            type: object
            properties:
              urls:
                type: array
                description: TURN server URLs
                items:
                  type: string
              username:
                type: string
                description: TURN username
              credential:
                type: string
                description: TURN credential
        createdAt:
          type: string
          description: ISO-8601 timestamp when the session was created
    RegisterPushTokenRequest:
      type: object
      properties:
        platform:
          type: string
          description: 'Device platform: ios or android'
        deviceId:
          type: string
          description: Unique device identifier
        pushToken:
          type: string
          description: Platform push token
        appVersion:
          type: string
          description: Client app version
      required:
      - platform
      - deviceId
      - pushToken
    PushTokenResponse:
      type: object
      properties:
        id:
          type: string
          description: Push token registration ID
        platform:
          type: string
          description: Device platform
        deviceId:
          type: string
          description: Unique device identifier
        pushToken:
          type: string
          description: Platform push token
        createdAt:
          type: string
          description: ISO-8601 timestamp
    CreatePushNotificationRequest:
      type: object
      properties:
        recipientType:
          type: string
          description: 'Recipient type: user, group, or broadcast'
        recipientId:
          type: string
          description: User ID, Group ID (max 1024), or Broadcast List ID (max 256)
        encryptedPayload:
          type: string
          description: Signal Protocol encrypted payload
        ttlSeconds:
          type: integer
          description: Time-to-live in seconds
        priority:
          type: string
          description: 'Notification priority: normal or high'
      required:
      - recipientType
      - recipientId
      - encryptedPayload
    PushNotificationResponse:
      type: object
      properties:
        id:
          type: string
          description: Notification ID
        recipientType:
          type: string
          description: Recipient type
        recipientId:
          type: string
          description: Recipient ID
        status:
          type: string
          description: 'Notification status: queued, sent, delivered'
        createdAt:
          type: string
          description: ISO-8601 timestamp
    ListPushNotificationsRequest:
      type: object
      properties: {}
    PushNotificationListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of notifications
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Items per page
        total:
          type: integer
          description: Total items
    AckPushNotificationRequest:
      type: object
      properties:
        status:
          type: string
          description: 'Acknowledgement status: delivered or processed'
      required:
      - status
    AckPushNotificationResponse:
      type: object
      properties:
        id:
          type: string
          description: Notification ID
        status:
          type: string
          description: Updated status
        updatedAt:
          type: string
          description: ISO-8601 timestamp
    GetNotificationPreferencesRequest:
      type: object
      properties: {}
    NotificationPreferencesResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        previewEnabled:
          type: boolean
          description: Whether notification previews are enabled
        previewMode:
          type: string
          description: Preview mode (none|senderOnly|senderAndMessage)
        showMediaThumbnails:
          type: boolean
          description: Whether to show media thumbnails in notifications
        updatedAt:
          type: string
          description: Last update timestamp (ISO 8601)
    UpdateNotificationPreferencesRequest:
      type: object
      properties:
        previewEnabled:
          type: boolean
          description: Whether notification previews are enabled
        previewMode:
          type: string
          description: Preview mode (none|senderOnly|senderAndMessage)
        showMediaThumbnails:
          type: boolean
          description: Whether to show media thumbnails in notifications
      required:
      - previewEnabled
      - previewMode
      - showMediaThumbnails
    CreateNotificationPreviewRequest:
      type: object
      properties:
        recipientUserId:
          type: string
          description: Recipient user ID
        senderId:
          type: string
          description: Sender user ID
        messageId:
          type: string
          description: Message ID
        messageType:
          type: string
          description: Type of message (text|image|video|audio|document|call|status)
        encryptedPreviewMetadata:
          type: string
          description: Encrypted metadata used for preview generation
      required:
      - recipientUserId
      - senderId
      - messageId
      - messageType
      - encryptedPreviewMetadata
    NotificationPreviewResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Message ID
        previewTitle:
          type: string
          description: Preview title (e.g., sender name)
        previewBody:
          type: string
          description: Preview body based on user preferences
        hasThumbnail:
          type: boolean
          description: Whether a thumbnail is included
        thumbnailUrl:
          type: string
          description: URL to thumbnail if available
    CreateQuickReplyRequest:
      type: object
      properties:
        title:
          type: string
          description: Short label for the quick reply
        message:
          type: string
          description: Message text to be sent
        language:
          type: string
          description: BCP-47 language tag for the quick reply (e.g., de-DE)
        isActive:
          type: boolean
          description: Whether the quick reply is active
      required:
      - title
      - message
    QuickReplyResponse:
      type: object
      properties:
        id:
          type: string
          description: Quick reply ID
        businessId:
          type: string
          description: Business ID
        title:
          type: string
          description: Short label for the quick reply
        message:
          type: string
          description: Message text to be sent
        language:
          type: string
          description: BCP-47 language tag for the quick reply
        isActive:
          type: boolean
          description: Whether the quick reply is active
        createdAt:
          type: string
          description: ISO 8601 creation timestamp
        updatedAt:
          type: string
          description: ISO 8601 last update timestamp
    DoNotDisturbSettingsResponse:
      type: object
      properties:
        userId:
          type: string
          description: Unique identifier of the user
        enabled:
          type: boolean
          description: Indicates whether Do-Not-Disturb mode is enabled
        until:
          type: string
          format: date-time
          description: ISO-8601 timestamp when Do-Not-Disturb mode ends; null if indefinite
        schedule:
          type: object
          description: Optional recurring schedule for Do-Not-Disturb
          properties:
            startTime:
              type: string
              description: Local time in HH:mm format
            endTime:
              type: string
              description: Local time in HH:mm format
            daysOfWeek:
              type: array
              items:
                type: string
                description: Day of week (e.g., MONDAY)
              description: Days when the schedule applies
            timeZone:
              type: string
              description: IANA time zone identifier
        updatedAt:
          type: string
          format: date-time
          description: Timestamp of the last update
    UpdateDoNotDisturbSettingsRequest:
      type: object
      properties:
        enabled:
          type: boolean
          description: Enable or disable Do-Not-Disturb mode
        until:
          type: string
          format: date-time
          description: ISO-8601 timestamp when Do-Not-Disturb mode ends; omit or null
            for indefinite
        schedule:
          type: object
          description: Optional recurring schedule for Do-Not-Disturb
          properties:
            startTime:
              type: string
              description: Local time in HH:mm format
            endTime:
              type: string
              description: Local time in HH:mm format
            daysOfWeek:
              type: array
              items:
                type: string
                description: Day of week (e.g., MONDAY)
              description: Days when the schedule applies
            timeZone:
              type: string
              description: IANA time zone identifier
      required:
      - enabled
    ReactionNotificationListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of reaction notifications
          items:
            type: object
            description: Reaction notification
            properties:
              id:
                type: string
                description: Notification ID
              messageId:
                type: string
                description: ID of the message that received the reaction
              conversationId:
                type: string
                description: Conversation or group ID
              reactorUserId:
                type: string
                description: User ID of the person who reacted
              reaction:
                type: string
                description: Reaction emoji or code
              createdAt:
                type: string
                description: ISO-8601 timestamp of when the reaction occurred
              readAt:
                type: string
                description: ISO-8601 timestamp when the notification was read, null
                  if unread
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of notifications
        totalPages:
          type: integer
          description: Total number of pages
    MarkReactionNotificationReadRequest:
      type: object
      properties:
        readAt:
          type: string
          description: ISO-8601 timestamp when the notification was read
      required:
      - readAt
    ReactionNotificationReadResponse:
      type: object
      properties:
        id:
          type: string
          description: Notification ID
        readAt:
          type: string
          description: ISO-8601 timestamp when the notification was read
        status:
          type: string
          description: Read status
          enum:
          - read
    GetCallNotificationSettingsRequest:
      type: object
      properties: {}
    CallNotificationSettingsResponse:
      type: object
      properties:
        userId:
          type: string
          description: Unique user ID
        enabled:
          type: boolean
          description: Master toggle for call notifications
        incomingVoiceCalls:
          type: boolean
          description: Notify for incoming voice calls
        incomingVideoCalls:
          type: boolean
          description: Notify for incoming video calls
        vibrate:
          type: boolean
          description: Vibration enabled for call notifications
        sound:
          type: string
          description: Selected ringtone identifier
        quietHours:
          type: object
          description: Quiet hours configuration
          properties:
            enabled:
              type: boolean
              description: Quiet hours enabled
            startTime:
              type: string
              description: Start time in HH:mm
            endTime:
              type: string
              description: End time in HH:mm
            timezone:
              type: string
              description: IANA timezone
        updatedAt:
          type: string
          description: ISO-8601 timestamp of last update
    UpdateCallNotificationSettingsRequest:
      type: object
      properties:
        enabled:
          type: boolean
          description: Master toggle for call notifications
        incomingVoiceCalls:
          type: boolean
          description: Notify for incoming voice calls
        incomingVideoCalls:
          type: boolean
          description: Notify for incoming video calls
        vibrate:
          type: boolean
          description: Vibration enabled for call notifications
        sound:
          type: string
          description: Selected ringtone identifier
        quietHours:
          type: object
          description: Quiet hours configuration
          properties:
            enabled:
              type: boolean
              description: Quiet hours enabled
            startTime:
              type: string
              description: Start time in HH:mm
            endTime:
              type: string
              description: End time in HH:mm
            timezone:
              type: string
              description: IANA timezone
      required:
      - enabled
      - incomingVoiceCalls
      - incomingVideoCalls
    ContactSyncRequest:
      type: object
      properties:
        deviceId:
          type: string
          description: Unique identifier for the device submitting the sync
        contacts:
          type: array
          description: List of contacts to be matched
          items:
            type: object
            properties:
              contactId:
                type: string
                description: Client-generated contact identifier
              phoneNumberHash:
                type: string
                description: Hashed phone number for privacy-preserving matching
              displayName:
                type: string
                description: Contact display name on device
            required_fields:
            - contactId
            - phoneNumberHash
        clientTimestamp:
          type: string
          description: ISO-8601 timestamp when the sync was initiated
      required:
      - deviceId
      - contacts
      - clientTimestamp
    ContactSyncResponse:
      type: object
      properties:
        syncId:
          type: string
          description: Server-generated sync operation identifier
        matchedUsers:
          type: array
          description: Contacts matched to WhatsApp users
          items:
            type: object
            properties:
              contactId:
                type: string
                description: Client contact identifier
              userId:
                type: string
                description: Matched WhatsApp user ID
              profileName:
                type: string
                description: User profile name
              avatarUrl:
                type: string
                description: URL to user avatar image
        unmatchedContactIds:
          type: array
          description: Contact IDs that were not matched to any user
          items:
            type: string
    EmptyRequest:
      type: object
      properties: {}
    ContactSyncResultResponse:
      type: object
      properties:
        syncId:
          type: string
          description: Sync operation identifier
        status:
          type: string
          description: Processing status (e.g., pending, completed, failed)
        matchedUsers:
          type: array
          description: Contacts matched to WhatsApp users
          items:
            type: object
            properties:
              contactId:
                type: string
                description: Client contact identifier
              userId:
                type: string
                description: Matched WhatsApp user ID
              profileName:
                type: string
                description: User profile name
              avatarUrl:
                type: string
                description: URL to user avatar image
        unmatchedContactIds:
          type: array
          description: Contact IDs not matched to any user
          items:
            type: string
        processedAt:
          type: string
          description: ISO-8601 timestamp when processing completed
    AddContactRequest:
      type: object
      properties:
        identifierType:
          type: string
          description: 'Type of identifier: phoneNumber, userId, or username'
        identifierValue:
          type: string
          description: Value of the identifier
        displayName:
          type: string
          description: Optional local display name for the contact
      required:
      - identifierType
      - identifierValue
    ContactResponse:
      type: object
      properties:
        contactId:
          type: string
          description: Unique contact ID
        userId:
          type: string
          description: User ID of the contact
        displayName:
          type: string
          description: Display name for the contact
        createdAt:
          type: string
          description: Creation timestamp in ISO 8601
    InviteContactRequest:
      type: object
      properties:
        channel:
          type: string
          description: 'Invitation channel: sms or email'
        destination:
          type: string
          description: Phone number or email address to send the invite to
        message:
          type: string
          description: Optional custom invitation message
      required:
      - channel
      - destination
    InviteContactResponse:
      type: object
      properties:
        invitationId:
          type: string
          description: Invitation ID
        status:
          type: string
          description: 'Invitation status: sent, queued'
        expiresAt:
          type: string
          description: Expiration timestamp in ISO 8601
    AddContactByQrRequest:
      type: object
      properties:
        qrToken:
          type: string
          description: QR token representing the contact to add
      required:
      - qrToken
    ListFavoriteContactsRequest:
      type: object
      properties: {}
    FavoriteContactsListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of favorite contacts
          items:
            type: object
            properties:
              contactId:
                type: string
                description: Contact ID
              displayName:
                type: string
                description: Contact display name
              addedAt:
                type: string
                description: ISO-8601 timestamp when contact was favorited
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Items per page
        total:
          type: integer
          description: Total number of favorite contacts
    AddFavoriteContactRequest:
      type: object
      properties:
        contactId:
          type: string
          description: Contact ID to be favorited
      required:
      - contactId
    AddFavoriteContactResponse:
      type: object
      properties:
        favoriteId:
          type: string
          description: Favorite relationship ID
        userId:
          type: string
          description: User ID
        contactId:
          type: string
          description: Contact ID
        addedAt:
          type: string
          description: ISO-8601 timestamp when contact was favorited
    RemoveFavoriteContactRequest:
      type: object
      properties: {}
    RemoveFavoriteContactResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        contactId:
          type: string
          description: Contact ID
        removed:
          type: boolean
          description: Indicates whether the favorite was removed
    CreateContactLabelRequest:
      type: object
      properties:
        name:
          type: string
          description: Human-readable label name
        color:
          type: string
          description: 'Optional label color in hex format (e.g., #FF9900)'
      required:
      - name
    ContactLabelResponse:
      type: object
      properties:
        id:
          type: string
          description: Label ID
        name:
          type: string
          description: Label name
        color:
          type: string
          description: Label color
        createdAt:
          type: string
          description: ISO-8601 creation timestamp
        updatedAt:
          type: string
          description: ISO-8601 update timestamp
    ListContactLabelsRequest:
      type: object
      properties: {}
    ContactLabelListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of labels assigned to the contact
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Page size
        total:
          type: integer
          description: Total number of labels assigned to the contact
    GetContactLabelRequest:
      type: object
      properties: {}
    UpdateContactLabelRequest:
      type: object
      properties:
        name:
          type: string
          description: Updated label name
        color:
          type: string
          description: Updated label color
    DeleteContactLabelRequest:
      type: object
      properties: {}
    DeleteContactLabelResponse:
      type: object
      properties:
        deleted:
          type: boolean
          description: Indicates whether the label was deleted
        labelId:
          type: string
          description: Deleted label ID
    ListContactLabelsForContactRequest:
      type: object
      properties: {}
    AssignLabelToContactRequest:
      type: object
      properties: {}
    AssignLabelToContactResponse:
      type: object
      properties:
        contactId:
          type: string
          description: Contact ID
        labelId:
          type: string
          description: Label ID
        assignedAt:
          type: string
          description: ISO-8601 assignment timestamp
    UnassignLabelFromContactRequest:
      type: object
      properties: {}
    UnassignLabelFromContactResponse:
      type: object
      properties:
        contactId:
          type: string
          description: Contact ID
        labelId:
          type: string
          description: Label ID
        removed:
          type: boolean
          description: Indicates whether the label was unassigned
    ListContactsByLabelRequest:
      type: object
      properties: {}
    ContactListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of contacts with the label
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Page size
        total:
          type: integer
          description: Total number of contacts with the label
    ListUnknownSendersRequest:
      type: object
      properties: {}
    UnknownSendersListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of unknown senders
          items:
            type: object
            description: Unknown sender summary
            properties:
              senderId:
                type: string
                description: Sender ID
              displayName:
                type: string
                description: Sender display name if available
              pendingMessageCount:
                type: integer
                description: Number of pending messages from this sender
              lastMessageAt:
                type: string
                description: Timestamp of last pending message (ISO 8601)
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of unknown senders
        totalPages:
          type: integer
          description: Total number of pages
    GetUnknownSenderRequest:
      type: object
      properties: {}
    UnknownSenderResponse:
      type: object
      properties:
        senderId:
          type: string
          description: Sender ID
        displayName:
          type: string
          description: Sender display name if available
        pendingMessageCount:
          type: integer
          description: Number of pending messages from this sender
        lastMessageAt:
          type: string
          description: Timestamp of last pending message (ISO 8601)
        status:
          type: string
          description: Current handling status (e.g., pending, approved, blocked)
    ListUnknownSenderMessagesRequest:
      type: object
      properties: {}
    UnknownSenderMessagesResponse:
      type: object
      properties:
        items:
          type: array
          description: List of pending messages
          items:
            type: object
            description: Message summary
            properties:
              messageId:
                type: string
                description: Message ID
              sentAt:
                type: string
                description: Message timestamp (ISO 8601)
              type:
                type: string
                description: Message type (text, image, document, voice)
              preview:
                type: string
                description: Short preview of message content if applicable
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of pending messages
        totalPages:
          type: integer
          description: Total number of pages
    HandleUnknownSenderRequest:
      type: object
      properties:
        action:
          type: string
          description: Action to perform (approve or block)
      required:
      - action
    HandleUnknownSenderResponse:
      type: object
      properties:
        senderId:
          type: string
          description: Sender ID
        status:
          type: string
          description: Updated handling status (approved or blocked)
        processedAt:
          type: string
          description: Timestamp when the action was processed (ISO 8601)
    MessageSearchResponse:
      type: object
      properties:
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        total:
          type: integer
          description: Total number of matching messages
        results:
          type: array
          description: List of matching messages
          items:
            type: object
            properties:
              messageId:
                type: string
                description: Message ID
              chatId:
                type: string
                description: Chat or group ID
              senderId:
                type: string
                description: Sender user ID
              snippet:
                type: string
                description: Highlighted snippet of the matched text
              timestamp:
                type: string
                description: ISO 8601 timestamp of the message
              messageType:
                type: string
                description: Type of message (text, media, etc.)
    ListMediaByTypeRequest:
      type: object
      properties: {}
    MediaListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of media items matching the filters
          items:
            type: object
            properties:
              id:
                type: string
                description: Media ID
              mediaType:
                type: string
                description: Type of media (image, video, audio, document)
              mimeType:
                type: string
                description: MIME type of the media file
              sizeBytes:
                type: integer
                description: Size of the media file in bytes
              messageId:
                type: string
                description: Associated message ID
              conversationId:
                type: string
                description: Conversation or group ID
              senderId:
                type: string
                description: Sender user ID
              createdAt:
                type: string
                description: Creation timestamp in ISO 8601
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of matching items
        totalPages:
          type: integer
          description: Total number of pages
    SearchChatsRequest:
      type: object
      properties: {}
    SearchChatsResponse:
      type: object
      properties:
        total:
          type: integer
          description: Total number of matching chats
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        results:
          type: array
          description: List of matching chats
          items:
            type: object
            properties:
              chatId:
                type: string
                description: Chat ID
              chatType:
                type: string
                description: Chat type (direct|group|broadcast)
              title:
                type: string
                description: Chat title or contact name
              lastMessagePreview:
                type: string
                description: Encrypted or redacted last message preview
              updatedAt:
                type: string
                description: Last activity timestamp (ISO 8601)
    SearchContactsRequest:
      type: object
      properties: {}
    SearchContactsResponse:
      type: object
      properties:
        total:
          type: integer
          description: Total number of matching contacts
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        results:
          type: array
          description: List of matching contacts
          items:
            type: object
            properties:
              contactId:
                type: string
                description: Contact ID
              displayName:
                type: string
                description: Contact display name
              username:
                type: string
                description: Unique username
              phoneNumber:
                type: string
                description: Contact phone number
              avatarUrl:
                type: string
                description: URL to contact avatar
    GetMessagesByDateRequest:
      type: object
      properties: {}
    MessagesByDateResponse:
      type: object
      properties:
        conversationId:
          type: string
          description: Eindeutige ID der Konversation
        anchorDate:
          type: string
          description: Das verwendete Sprungdatum (ISO-8601)
        direction:
          type: string
          description: Tatsaechlich verwendete Richtung
        messages:
          type: array
          description: Liste der Nachrichten
          items:
            type: object
            properties:
              messageId:
                type: string
                description: Eindeutige ID der Nachricht
              senderId:
                type: string
                description: Absender-ID
              sentAt:
                type: string
                description: Sendezeitpunkt (ISO-8601)
              ciphertext:
                type: string
                description: Ende-zu-Ende verschluesselter Inhalt (Signal Protocol)
              contentType:
                type: string
                description: Typ des Inhalts, z. B. text, image, document
        page:
          type: integer
          description: Aktuelle Seite
        pageSize:
          type: integer
          description: Seitengroesse
        totalCount:
          type: integer
          description: Gesamtanzahl der Nachrichten im Zeitraum
    GetPresenceVisibilityRequest:
      type: object
      properties: {}
    PresenceVisibilityResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        visibility:
          type: string
          description: Visibility scope for online/last seen status
          enum:
          - everyone
          - contacts
          - nobody
          - custom
        customAllowListCount:
          type: integer
          description: Count of users explicitly allowed when visibility is custom
        customDenyListCount:
          type: integer
          description: Count of users explicitly denied when visibility is custom
        updatedAt:
          type: string
          description: ISO 8601 timestamp when the setting was last updated
    UpdatePresenceVisibilityRequest:
      type: object
      properties:
        visibility:
          type: string
          description: Visibility scope for online/last seen status
          enum:
          - everyone
          - contacts
          - nobody
          - custom
        customAllowList:
          type: array
          description: List of user IDs explicitly allowed to see status when visibility
            is custom
          items:
            type: string
        customDenyList:
          type: array
          description: List of user IDs explicitly denied when visibility is custom
          items:
            type: string
      required:
      - visibility
    ListPresenceAllowedUsersRequest:
      type: object
      properties: {}
    PresenceAllowedUsersResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        items:
          type: array
          description: Allowed users
          items:
            type: object
            properties:
              id:
                type: string
                description: Allowed user ID
              displayName:
                type: string
                description: Display name
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        total:
          type: integer
          description: Total number of items
    ListPresenceDeniedUsersRequest:
      type: object
      properties: {}
    PresenceDeniedUsersResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        items:
          type: array
          description: Denied users
          items:
            type: object
            properties:
              id:
                type: string
                description: Denied user ID
              displayName:
                type: string
                description: Display name
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        total:
          type: integer
          description: Total number of items
    GetReadReceiptSettingsRequest:
      type: object
      properties: {}
    ReadReceiptSettingsResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        globalEnabled:
          type: boolean
          description: Whether read receipts are enabled globally
        conversationOverrides:
          type: array
          description: Per-conversation overrides
          items:
            type: object
            properties:
              conversationId:
                type: string
                description: Conversation ID
              enabled:
                type: boolean
                description: Override setting for this conversation
        updatedAt:
          type: string
          description: ISO-8601 timestamp of last update
    UpdateReadReceiptSettingsRequest:
      type: object
      properties:
        globalEnabled:
          type: boolean
          description: Whether read receipts are enabled globally
        conversationOverrides:
          type: array
          description: Per-conversation overrides
          items:
            type: object
            properties:
              conversationId:
                type: string
                description: Conversation ID
              enabled:
                type: boolean
                description: Override setting for this conversation
      required:
      - globalEnabled
    ProfilePictureVisibilityResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        visibility:
          type: string
          description: Visibility setting for profile picture
          enum:
          - everyone
          - contacts
          - nobody
        updatedAt:
          type: string
          description: ISO-8601 timestamp of last update
    UpdateProfilePictureVisibilityRequest:
      type: object
      properties:
        visibility:
          type: string
          description: New visibility setting for profile picture
          enum:
          - everyone
          - contacts
          - nobody
      required:
      - visibility
    GetInfoVisibilitySettingsRequest:
      type: object
      properties: {}
    InfoVisibilitySettingsResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        infoTextVisibility:
          type: string
          description: Visibility of the user's info text
          enum:
          - everyone
          - contacts
          - nobody
        statusTextVisibility:
          type: string
          description: Visibility of the user's status text
          enum:
          - everyone
          - contacts
          - nobody
        updatedAt:
          type: string
          description: Last update timestamp (ISO 8601)
    UpdateInfoVisibilitySettingsRequest:
      type: object
      properties:
        infoTextVisibility:
          type: string
          description: Visibility of the user's info text
          enum:
          - everyone
          - contacts
          - nobody
        statusTextVisibility:
          type: string
          description: Visibility of the user's status text
          enum:
          - everyone
          - contacts
          - nobody
      required:
      - infoTextVisibility
      - statusTextVisibility
    GetGroupInvitePolicyRequest:
      type: object
      properties: {}
    GroupInvitePolicyResponse:
      type: object
      properties:
        groupId:
          type: string
          description: Unique group ID
        invitePolicy:
          type: string
          description: Policy defining who can add members
          enum:
          - ownersOnly
          - adminsOnly
          - allMembers
        updatedAt:
          type: string
          format: date-time
          description: Timestamp of last update
    UpdateGroupInvitePolicyRequest:
      type: object
      properties:
        invitePolicy:
          type: string
          description: Policy defining who can add members
          enum:
          - ownersOnly
          - adminsOnly
          - allMembers
      required:
      - invitePolicy
    StorageUsageResponse:
      type: object
      properties:
        totalBytes:
          type: integer
          description: Total bytes used
        quotaBytes:
          type: integer
          description: Maximum allowed bytes
        items:
          type: array
          description: Detailed usage by scope
          items:
            type: object
            properties:
              scopeId:
                type: string
                description: Scope identifier
              scopeType:
                type: string
                description: user|device|group
              bytesUsed:
                type: integer
                description: Bytes used in this scope
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Items per page
        totalItems:
          type: integer
          description: Total number of items
    StorageItemListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of storage items
          items:
            type: object
            properties:
              id:
                type: string
                description: Storage item ID
              type:
                type: string
                description: Media type
              sizeBytes:
                type: integer
                description: Item size in bytes
              createdAt:
                type: string
                description: ISO 8601 creation timestamp
              source:
                type: string
                description: Origin of item (message, status, profile, other)
              name:
                type: string
                description: Original file name
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Items per page
        totalItems:
          type: integer
          description: Total number of items
    DeleteStorageItemResponse:
      type: object
      properties:
        id:
          type: string
          description: Deleted storage item ID
        deleted:
          type: boolean
          description: Deletion status
    PurgeStorageItemsRequest:
      type: object
      properties:
        type:
          type: string
          description: Media type to purge (image, document, video, audio, other)
        olderThanDays:
          type: integer
          description: Purge items older than the specified number of days
        maxItems:
          type: integer
          description: Maximum number of items to delete
    PurgeStorageItemsResponse:
      type: object
      properties:
        deletedCount:
          type: integer
          description: Number of items deleted
        requestedAt:
          type: string
          description: ISO 8601 timestamp of purge request
    GetDataUsageSettingsRequest:
      type: object
      properties: {}
    DataUsageSettingsResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        limits:
          type: object
          description: Data usage limits per period
          properties:
            monthlyUploadBytes:
              type: integer
              description: Monthly upload limit in bytes
            monthlyDownloadBytes:
              type: integer
              description: Monthly download limit in bytes
        autoDownload:
          type: object
          description: Auto-download preferences by network type
          properties:
            wifi:
              type: boolean
              description: Allow auto-download on Wi-Fi
            cellular:
              type: boolean
              description: Allow auto-download on cellular
            roaming:
              type: boolean
              description: Allow auto-download while roaming
        warnings:
          type: object
          description: Usage warning thresholds
          properties:
            warnAtPercent:
              type: integer
              description: Warn when usage reaches this percentage of limits
            hardBlockAtPercent:
              type: integer
              description: Block transfers when usage reaches this percentage of limits
        updatedAt:
          type: string
          description: ISO 8601 timestamp of last update
    UpdateDataUsageSettingsRequest:
      type: object
      properties:
        limits:
          type: object
          description: Data usage limits per period
          properties:
            monthlyUploadBytes:
              type: integer
              description: Monthly upload limit in bytes
            monthlyDownloadBytes:
              type: integer
              description: Monthly download limit in bytes
        autoDownload:
          type: object
          description: Auto-download preferences by network type
          properties:
            wifi:
              type: boolean
              description: Allow auto-download on Wi-Fi
            cellular:
              type: boolean
              description: Allow auto-download on cellular
            roaming:
              type: boolean
              description: Allow auto-download while roaming
        warnings:
          type: object
          description: Usage warning thresholds
          properties:
            warnAtPercent:
              type: integer
              description: Warn when usage reaches this percentage of limits
            hardBlockAtPercent:
              type: integer
              description: Block transfers when usage reaches this percentage of limits
    UpdateDataUsageSettingsResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        limits:
          type: object
          description: Data usage limits per period
          properties:
            monthlyUploadBytes:
              type: integer
              description: Monthly upload limit in bytes
            monthlyDownloadBytes:
              type: integer
              description: Monthly download limit in bytes
        autoDownload:
          type: object
          description: Auto-download preferences by network type
          properties:
            wifi:
              type: boolean
              description: Allow auto-download on Wi-Fi
            cellular:
              type: boolean
              description: Allow auto-download on cellular
            roaming:
              type: boolean
              description: Allow auto-download while roaming
        warnings:
          type: object
          description: Usage warning thresholds
          properties:
            warnAtPercent:
              type: integer
              description: Warn when usage reaches this percentage of limits
            hardBlockAtPercent:
              type: integer
              description: Block transfers when usage reaches this percentage of limits
        updatedAt:
          type: string
          description: ISO 8601 timestamp of last update
    GetDataUsageSummaryRequest:
      type: object
      properties: {}
    DataUsageSummaryResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        period:
          type: string
          description: Usage period
        totals:
          type: object
          description: Total usage in bytes
          properties:
            uploadBytes:
              type: integer
              description: Total upload bytes used
            downloadBytes:
              type: integer
              description: Total download bytes used
        remaining:
          type: object
          description: Remaining quotas in bytes
          properties:
            uploadBytes:
              type: integer
              description: Remaining upload bytes
            downloadBytes:
              type: integer
              description: Remaining download bytes
        thresholds:
          type: object
          description: Warning and hard-block thresholds
          properties:
            warnAtPercent:
              type: integer
              description: Warn threshold percentage
            hardBlockAtPercent:
              type: integer
              description: Hard block threshold percentage
        updatedAt:
          type: string
          description: ISO 8601 timestamp of last usage update
    ListChatBackgroundsRequest:
      type: object
      properties: {}
    ChatBackgroundListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of chat backgrounds
          items:
            type: object
            properties:
              id:
                type: string
                description: Background ID
              name:
                type: string
                description: Background name
              type:
                type: string
                description: 'Background type: system or custom'
              previewUrl:
                type: string
                description: URL to preview image
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Items per page
        total:
          type: integer
          description: Total number of backgrounds
    CreateChatBackgroundRequest:
      type: object
      properties:
        file:
          type: string
          format: binary
          description: Image file to upload
        name:
          type: string
          description: Custom name for the background
      required:
      - file
    ChatBackgroundResponse:
      type: object
      properties:
        chatId:
          type: string
          description: Chat ID
        backgroundId:
          type: string
          description: Selected background ID
        previewUrl:
          type: string
          description: Preview image URL
    GetUserChatBackgroundRequest:
      type: object
      properties: {}
    UserChatBackgroundResponse:
      type: object
      properties:
        backgroundId:
          type: string
          description: Selected background ID
        previewUrl:
          type: string
          description: Preview image URL
    UpdateUserChatBackgroundRequest:
      type: object
      properties:
        backgroundId:
          type: string
          description: Background ID to set as default
      required:
      - backgroundId
    UpdateChatBackgroundRequest:
      type: object
      properties:
        backgroundId:
          type: string
          description: Background ID to set for this chat
      required:
      - backgroundId
    GetThemePreferenceRequest:
      type: object
      properties: {}
    ThemePreferenceResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        theme:
          type: string
          description: 'Theme preference: light, dark, or system'
        updatedAt:
          type: string
          description: ISO 8601 timestamp of last update
    UpdateThemePreferenceRequest:
      type: object
      properties:
        theme:
          type: string
          description: 'Theme preference: light, dark, or system'
      required:
      - theme
    LanguagesListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of supported languages
          items:
            type: object
            properties:
              code:
                type: string
                description: Language code in BCP-47 format (e.g., en, de, fr)
              name:
                type: string
                description: Display name of the language
              nativeName:
                type: string
                description: Language name in its native form
              isDefault:
                type: boolean
                description: Indicates if this is the system default language
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of supported languages
    UserLanguageResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        languageCode:
          type: string
          description: Preferred language code in BCP-47 format
        updatedAt:
          type: string
          description: Timestamp of the last update in ISO 8601 format
    UpdateUserLanguageRequest:
      type: object
      properties:
        languageCode:
          type: string
          description: Preferred language code in BCP-47 format (e.g., en, de, fr)
      required:
      - languageCode
    CreateBackupRequest:
      type: object
      properties:
        deviceId:
          type: string
          description: Client device identifier
        keyId:
          type: string
          description: Signal Protocol key identifier used to encrypt the backup
        algorithm:
          type: string
          description: Encryption algorithm identifier (e.g., Signal-DoubleRatchet)
        checksum:
          type: string
          description: Checksum of encrypted data for integrity verification
        sizeBytes:
          type: integer
          description: Size of the encrypted backup in bytes
        backupFile:
          type: string
          format: binary
          description: Encrypted backup file (ciphertext)
        manifest:
          type: string
          description: Optional encrypted manifest JSON (ciphertext)
      required:
      - deviceId
      - keyId
      - algorithm
      - checksum
      - sizeBytes
      - backupFile
    BackupResponse:
      type: object
      properties:
        id:
          type: string
          description: Backup ID
        deviceId:
          type: string
          description: Client device identifier
        keyId:
          type: string
          description: Signal Protocol key identifier used to encrypt the backup
        createdAt:
          type: string
          description: ISO-8601 creation timestamp
        sizeBytes:
          type: integer
          description: Size of the encrypted backup in bytes
        checksum:
          type: string
          description: Checksum of encrypted data
    ListBackupsRequest:
      type: object
      properties: {}
    BackupListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of backups
          items:
            type: object
            properties:
              id:
                type: string
                description: Backup ID
              deviceId:
                type: string
                description: Client device identifier
              keyId:
                type: string
                description: Signal Protocol key identifier used to encrypt the backup
              createdAt:
                type: string
                description: ISO-8601 creation timestamp
              sizeBytes:
                type: integer
                description: Size of the encrypted backup in bytes
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of backups
    GetBackupRequest:
      type: object
      properties: {}
    DownloadBackupRequest:
      type: object
      properties: {}
    DownloadBackupResponse:
      type: object
      properties:
        backupId:
          type: string
          description: Backup ID
        downloadUrl:
          type: string
          description: Time-limited URL to download the encrypted archive
        expiresAt:
          type: string
          format: date-time
          description: Expiration timestamp for the download URL
    RestoreBackupRequest:
      type: object
      properties:
        deviceId:
          type: string
          description: Target device ID requesting restore
      required:
      - deviceId
    RestoreBackupResponse:
      type: object
      properties:
        backupId:
          type: string
          description: Backup ID
        deviceId:
          type: string
          description: Target device ID
        restoreToken:
          type: string
          description: Server-generated token to authorize restore download
        status:
          type: string
          description: Restore status (e.g., INITIATED)
    DeleteBackupRequest:
      type: object
      properties: {}
    DeleteBackupResponse:
      type: object
      properties:
        backupId:
          type: string
          description: Deleted backup ID
        deleted:
          type: boolean
          description: Deletion result
    BackupDownloadResponse:
      type: object
      properties:
        backupId:
          type: string
          description: Backup ID
        downloadUrl:
          type: string
          description: Time-limited URL to download the encrypted backup
        expiresAt:
          type: string
          description: ISO-8601 expiration timestamp
    CreateChatExportRequest:
      type: object
      properties:
        format:
          type: string
          description: Export format
          enum:
          - json
          - txt
          - zip
        includeMedia:
          type: boolean
          description: Whether to include media attachments in the export
        messageLimit:
          type: integer
          description: Maximum number of messages to include; if omitted, exports
            full chat history
      required:
      - format
      - includeMedia
    ChatExportCreatedResponse:
      type: object
      properties:
        exportId:
          type: string
          description: Unique identifier of the export job
        chatId:
          type: string
          description: Chat ID for which the export was created
        status:
          type: string
          description: Current status of the export job
          enum:
          - pending
          - processing
        createdAt:
          type: string
          description: ISO 8601 timestamp when the export was created
    ChatExportStatusResponse:
      type: object
      properties:
        exportId:
          type: string
          description: Unique identifier of the export job
        chatId:
          type: string
          description: Chat ID for which the export was created
        status:
          type: string
          description: Current status of the export job
          enum:
          - pending
          - processing
          - ready
          - failed
          - expired
        downloadUrl:
          type: string
          description: Temporary URL to download the export file when status is ready
        expiresAt:
          type: string
          description: ISO 8601 timestamp when the download URL expires
        failureReason:
          type: string
          description: Reason for failure if status is failed
    CreateChatHistoryTransferSessionRequest:
      type: object
      properties:
        sourceDeviceId:
          type: string
          description: Unique identifier of the source device initiating the transfer
        targetDeviceId:
          type: string
          description: Optional identifier of the target device if already registered
        targetPublicKeyBundle:
          type: string
          description: Signal Protocol public key bundle for the target device, used
            to wrap the archive key
        transferMode:
          type: string
          description: 'Transfer mode: cloud or p2p'
        includeMedia:
          type: boolean
          description: Whether to include media in the transfer archive
      required:
      - sourceDeviceId
      - targetPublicKeyBundle
      - transferMode
    ChatHistoryTransferSessionResponse:
      type: object
      properties:
        sessionId:
          type: string
          description: Unique transfer session ID
        status:
          type: string
          description: Current status of the session
        expiresAt:
          type: string
          description: ISO-8601 timestamp when the session expires
        transferToken:
          type: string
          description: One-time token used by the target device to claim and import
            the archive
    StartChatHistoryExportRequest:
      type: object
      properties:
        cursorMessageId:
          type: string
          description: Optional message ID to resume export from
        maxArchiveSizeBytes:
          type: integer
          description: Maximum archive size in bytes to enforce device/storage constraints
        encryptedArchiveKey:
          type: string
          description: Archive key wrapped for the target device using Signal Protocol
      required:
      - encryptedArchiveKey
    StartChatHistoryExportResponse:
      type: object
      properties:
        sessionId:
          type: string
          description: Transfer session ID
        exportJobId:
          type: string
          description: Asynchronous export job ID
        status:
          type: string
          description: Export job status
    GetChatHistoryTransferSessionRequest:
      type: object
      properties: {}
    ChatHistoryTransferSessionStatusResponse:
      type: object
      properties:
        sessionId:
          type: string
          description: Transfer session ID
        status:
          type: string
          description: 'Session status: created, exporting, ready, importing, completed,
            failed, expired'
        progressPercent:
          type: integer
          description: Progress percentage for export/import operations
        archiveSizeBytes:
          type: integer
          description: Size of the encrypted archive in bytes if ready
        lastCheckpointMessageId:
          type: string
          description: Last message ID checkpoint for resuming export
    GetChatHistoryArchiveRequest:
      type: object
      properties: {}
    ChatHistoryArchiveResponse:
      type: object
      properties:
        downloadUrl:
          type: string
          description: Time-limited URL to download the encrypted archive
        expiresAt:
          type: string
          description: ISO-8601 timestamp when the download URL expires
        contentLength:
          type: integer
          description: Size of the encrypted archive in bytes
        checksum:
          type: string
          description: Checksum of the encrypted archive for integrity verification
    StartChatHistoryImportRequest:
      type: object
      properties:
        targetDeviceId:
          type: string
          description: Identifier of the target device performing the import
        transferToken:
          type: string
          description: One-time token to authorize import on the target device
        archiveChecksum:
          type: string
          description: Checksum of the downloaded archive for integrity verification
        lastAppliedMessageId:
          type: string
          description: Optional last applied message ID to resume import
      required:
      - targetDeviceId
      - transferToken
      - archiveChecksum
    StartChatHistoryImportResponse:
      type: object
      properties:
        sessionId:
          type: string
          description: Transfer session ID
        importJobId:
          type: string
          description: Asynchronous import job ID
        status:
          type: string
          description: Import job status
    ArchiveChatRequest:
      type: object
      properties:
        archivedAt:
          type: string
          description: ISO-8601 timestamp when the chat is archived
    ArchiveChatResponse:
      type: object
      properties:
        chatId:
          type: string
          description: Unique identifier of the chat
        isArchived:
          type: boolean
          description: Indicates whether the chat is archived
        archivedAt:
          type: string
          description: ISO-8601 timestamp when the chat was archived
    PinChatRequest:
      type: object
      properties:
        clientTimestamp:
          type: string
          description: Clientzeitpunkt (ISO 8601) fuer Offline-Queue und Konfliktaufloesung
    PinChatResponse:
      type: object
      properties:
        chatId:
          type: string
          description: Eindeutige Chat-ID
        isPinned:
          type: boolean
          description: Pin-Status des Chats
        pinnedAt:
          type: string
          description: Zeitpunkt des Anpinnens (ISO 8601)
    UnpinChatRequest:
      type: object
      properties:
        clientTimestamp:
          type: string
          description: Clientzeitpunkt (ISO 8601) fuer Offline-Queue und Konfliktaufloesung
    UnpinChatResponse:
      type: object
      properties:
        chatId:
          type: string
          description: Eindeutige Chat-ID
        isPinned:
          type: boolean
          description: Pin-Status des Chats
        unpinnedAt:
          type: string
          description: Zeitpunkt des Lospinnens (ISO 8601)
    ListPinnedChatsRequest:
      type: object
      properties: {}
    PinnedChatsListResponse:
      type: object
      properties:
        items:
          type: array
          description: Liste der angepinnten Chats
          items:
            type: object
            description: Chat-Zusammenfassung
            properties:
              chatId:
                type: string
                description: Eindeutige Chat-ID
              title:
                type: string
                description: Chat-Titel oder Anzeigename
              isPinned:
                type: boolean
                description: Pin-Status des Chats
              pinnedAt:
                type: string
                description: Zeitpunkt des Anpinnens (ISO 8601)
        page:
          type: integer
          description: Aktuelle Seite
        pageSize:
          type: integer
          description: Groesse der Seite
        totalItems:
          type: integer
          description: Gesamtanzahl der angepinnten Chats
    CreateBusinessProfileRequest:
      type: object
      properties:
        displayName:
          type: string
          description: Public display name of the business
        description:
          type: string
          description: Detailed business description
        category:
          type: string
          description: Business category identifier
        contactEmail:
          type: string
          description: Contact email address
        contactPhone:
          type: string
          description: Contact phone number
        website:
          type: string
          description: Business website URL
        address:
          type: object
          description: Business address
          properties:
            street:
              type: string
              description: Street address
            city:
              type: string
              description: City
            state:
              type: string
              description: State or region
            postalCode:
              type: string
              description: Postal code
            country:
              type: string
              description: Country code (ISO 3166-1 alpha-2)
        hours:
          type: array
          description: Business hours by weekday
          items:
            type: object
            properties:
              weekday:
                type: string
                description: Weekday name or number
              open:
                type: string
                description: Opening time in HH:mm
              close:
                type: string
                description: Closing time in HH:mm
        metadata:
          type: object
          description: Additional profile metadata
      required:
      - displayName
      - category
    BusinessProfileResponse:
      type: object
      properties:
        id:
          type: string
          description: Business profile ID
        displayName:
          type: string
          description: Public display name of the business
        description:
          type: string
          description: Detailed business description
        category:
          type: string
          description: Business category identifier
        contactEmail:
          type: string
          description: Contact email address
        contactPhone:
          type: string
          description: Contact phone number
        website:
          type: string
          description: Business website URL
        address:
          type: object
          description: Business address
          properties:
            street:
              type: string
              description: Street address
            city:
              type: string
              description: City
            state:
              type: string
              description: State or region
            postalCode:
              type: string
              description: Postal code
            country:
              type: string
              description: Country code (ISO 3166-1 alpha-2)
        hours:
          type: array
          description: Business hours by weekday
          items:
            type: object
            properties:
              weekday:
                type: string
                description: Weekday name or number
              open:
                type: string
                description: Opening time in HH:mm
              close:
                type: string
                description: Closing time in HH:mm
        metadata:
          type: object
          description: Additional profile metadata
        createdAt:
          type: string
          description: ISO 8601 creation timestamp
        updatedAt:
          type: string
          description: ISO 8601 update timestamp
    ListBusinessProfilesRequest:
      type: object
      properties: {}
    BusinessProfileListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of business profiles
          items:
            type: object
            properties:
              id:
                type: string
                description: Business profile ID
              displayName:
                type: string
                description: Public display name of the business
              category:
                type: string
                description: Business category identifier
              updatedAt:
                type: string
                description: ISO 8601 update timestamp
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        total:
          type: integer
          description: Total number of items
    GetBusinessProfileRequest:
      type: object
      properties: {}
    UpdateBusinessProfileRequest:
      type: object
      properties:
        displayName:
          type: string
          description: Public display name of the business
        description:
          type: string
          description: Detailed business description
        category:
          type: string
          description: Business category identifier
        contactEmail:
          type: string
          description: Contact email address
        contactPhone:
          type: string
          description: Contact phone number
        website:
          type: string
          description: Business website URL
        address:
          type: object
          description: Business address
          properties:
            street:
              type: string
              description: Street address
            city:
              type: string
              description: City
            state:
              type: string
              description: State or region
            postalCode:
              type: string
              description: Postal code
            country:
              type: string
              description: Country code (ISO 3166-1 alpha-2)
        hours:
          type: array
          description: Business hours by weekday
          items:
            type: object
            properties:
              weekday:
                type: string
                description: Weekday name or number
              open:
                type: string
                description: Opening time in HH:mm
              close:
                type: string
                description: Closing time in HH:mm
        metadata:
          type: object
          description: Additional profile metadata
      required:
      - displayName
      - category
    DeleteBusinessProfileRequest:
      type: object
      properties: {}
    DeleteBusinessProfileResponse:
      type: object
      properties:
        id:
          type: string
          description: Business profile ID
        deleted:
          type: boolean
          description: Deletion status
    UploadBusinessProfileMediaRequest:
      type: object
      properties:
        mediaType:
          type: string
          description: 'Media type: logo, cover, document'
        file:
          type: string
          format: binary
          description: Media file to upload
      required:
      - mediaType
      - file
    BusinessProfileMediaResponse:
      type: object
      properties:
        mediaId:
          type: string
          description: Uploaded media ID
        mediaType:
          type: string
          description: Media type
        url:
          type: string
          description: Media URL
        sizeBytes:
          type: integer
          description: Uploaded file size in bytes
    CreateBusinessVerificationRequest:
      type: object
      properties:
        legalName:
          type: string
          description: Registered legal name of the business
        registrationNumber:
          type: string
          description: Official registration number
        countryCode:
          type: string
          description: ISO 3166-1 alpha-2 country code
        documentIds:
          type: array
          description: Array of previously uploaded document IDs
          items:
            type: string
            description: Document ID
        contactEmail:
          type: string
          description: Business contact email
      required:
      - legalName
      - registrationNumber
      - countryCode
    BusinessVerificationRequestResponse:
      type: object
      properties:
        requestId:
          type: string
          description: Verification request ID
        businessId:
          type: string
          description: Business ID
        status:
          type: string
          description: Current status of the verification request
        createdAt:
          type: string
          description: ISO 8601 creation timestamp
    GetBusinessVerificationStatusRequest:
      type: object
      properties: {}
    BusinessVerificationStatusResponse:
      type: object
      properties:
        businessId:
          type: string
          description: Business ID
        status:
          type: string
          description: Verification status (e.g., pending, verified, rejected)
        verifiedAt:
          type: string
          description: ISO 8601 timestamp of verification, if verified
        rejectionReason:
          type: string
          description: Reason for rejection, if rejected
    UpdateBusinessVerificationRequestStatusRequest:
      type: object
      properties:
        status:
          type: string
          description: New status (verified or rejected)
        rejectionReason:
          type: string
          description: Reason for rejection if status is rejected
      required:
      - status
    UpdateBusinessVerificationRequestStatusResponse:
      type: object
      properties:
        requestId:
          type: string
          description: Verification request ID
        businessId:
          type: string
          description: Business ID
        status:
          type: string
          description: Updated status
        updatedAt:
          type: string
          description: ISO 8601 update timestamp
    QuickReplyListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of quick replies
          items:
            type: object
            properties:
              id:
                type: string
                description: Quick reply ID
              businessId:
                type: string
                description: Business ID
              title:
                type: string
                description: Short label for the quick reply
              message:
                type: string
                description: Message text to be sent
              language:
                type: string
                description: BCP-47 language tag for the quick reply
              isActive:
                type: boolean
                description: Whether the quick reply is active
              createdAt:
                type: string
                description: ISO 8601 creation timestamp
              updatedAt:
                type: string
                description: ISO 8601 last update timestamp
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of items
        totalPages:
          type: integer
          description: Total number of pages
    UpdateQuickReplyRequest:
      type: object
      properties:
        title:
          type: string
          description: Short label for the quick reply
        message:
          type: string
          description: Message text to be sent
        language:
          type: string
          description: BCP-47 language tag for the quick reply
        isActive:
          type: boolean
          description: Whether the quick reply is active
    DeleteQuickReplyResponse:
      type: object
      properties:
        id:
          type: string
          description: Quick reply ID
        deleted:
          type: boolean
          description: Deletion status
    GetAwayMessageRequest:
      type: object
      properties: {}
    AwayMessageResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        enabled:
          type: boolean
          description: Whether the automatic away message is enabled
        message:
          type: string
          description: Away message text (end-to-end encrypted payload)
        startsAt:
          type: string
          description: ISO 8601 start time for the away message schedule
        endsAt:
          type: string
          description: ISO 8601 end time for the away message schedule
        updatedAt:
          type: string
          description: ISO 8601 timestamp when the configuration was last updated
    UpsertAwayMessageRequest:
      type: object
      properties:
        enabled:
          type: boolean
          description: Whether the automatic away message is enabled
        message:
          type: string
          description: Away message text (end-to-end encrypted payload)
        startsAt:
          type: string
          description: ISO 8601 start time for the away message schedule
        endsAt:
          type: string
          description: ISO 8601 end time for the away message schedule
      required:
      - enabled
      - message
    DeleteAwayMessageRequest:
      type: object
      properties: {}
    DeleteAwayMessageResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        deleted:
          type: boolean
          description: Whether the away message configuration was deleted
        deletedAt:
          type: string
          description: ISO 8601 timestamp when the configuration was deleted
    GetGreetingSettingsRequest:
      type: object
      properties: {}
    GreetingSettingsResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        enabled:
          type: boolean
          description: Whether automatic greetings are enabled
        message:
          type: string
          description: Greeting message content
        language:
          type: string
          description: ISO language code for the greeting message
        updatedAt:
          type: string
          description: ISO-8601 timestamp of last update
    UpdateGreetingSettingsRequest:
      type: object
      properties:
        enabled:
          type: boolean
          description: Enable or disable automatic greetings
        message:
          type: string
          description: Greeting message content
        language:
          type: string
          description: ISO language code for the greeting message
      required:
      - enabled
      - message
    CreateGreetingMessageRequest:
      type: object
      properties:
        senderId:
          type: string
          description: User ID of the greeting sender
        recipientId:
          type: string
          description: User ID of the greeting recipient
        message:
          type: string
          description: Greeting message content
        clientMessageId:
          type: string
          description: Client-generated idempotency key for offline queue support
      required:
      - senderId
      - recipientId
      - message
      - clientMessageId
    GreetingMessageResponse:
      type: object
      properties:
        id:
          type: string
          description: Greeting message ID
        conversationId:
          type: string
          description: Conversation ID
        senderId:
          type: string
          description: User ID of the greeting sender
        recipientId:
          type: string
          description: User ID of the greeting recipient
        message:
          type: string
          description: Greeting message content
        createdAt:
          type: string
          description: ISO-8601 timestamp when the greeting was created
        status:
          type: string
          description: Message delivery status (queued|sent|delivered)
    ListGreetingMessagesRequest:
      type: object
      properties: {}
    GreetingMessageListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of greeting messages
          items:
            type: object
            description: Greeting message item
            properties:
              id:
                type: string
                description: Greeting message ID
              senderId:
                type: string
                description: User ID of the greeting sender
              recipientId:
                type: string
                description: User ID of the greeting recipient
              message:
                type: string
                description: Greeting message content
              createdAt:
                type: string
                description: ISO-8601 timestamp when the greeting was created
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of greeting messages
    CreateBusinessProductRequest:
      type: object
      properties:
        name:
          type: string
          description: Product name
        description:
          type: string
          description: Product description
        price:
          type: number
          description: Product price
        currency:
          type: string
          description: ISO 4217 currency code
        sku:
          type: string
          description: Stock keeping unit
        isActive:
          type: boolean
          description: Whether the product is active in the catalog
        tags:
          type: array
          description: Product tags
          items:
            type: string
      required:
      - name
      - price
      - currency
    BusinessProductResponse:
      type: object
      properties:
        id:
          type: string
          description: Product ID
        businessId:
          type: string
          description: Business ID
        name:
          type: string
          description: Product name
        description:
          type: string
          description: Product description
        price:
          type: number
          description: Product price
        currency:
          type: string
          description: ISO 4217 currency code
        sku:
          type: string
          description: Stock keeping unit
        isActive:
          type: boolean
          description: Whether the product is active in the catalog
        tags:
          type: array
          description: Product tags
          items:
            type: string
        createdAt:
          type: string
          description: Creation timestamp (ISO 8601)
        updatedAt:
          type: string
          description: Last update timestamp (ISO 8601)
    BusinessProductListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of products
          items:
            type: object
            properties:
              id:
                type: string
                description: Product ID
              name:
                type: string
                description: Product name
              price:
                type: number
                description: Product price
              currency:
                type: string
                description: ISO 4217 currency code
              sku:
                type: string
                description: Stock keeping unit
              isActive:
                type: boolean
                description: Whether the product is active in the catalog
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of items
        totalPages:
          type: integer
          description: Total number of pages
    UpdateBusinessProductRequest:
      type: object
      properties:
        name:
          type: string
          description: Product name
        description:
          type: string
          description: Product description
        price:
          type: number
          description: Product price
        currency:
          type: string
          description: ISO 4217 currency code
        sku:
          type: string
          description: Stock keeping unit
        isActive:
          type: boolean
          description: Whether the product is active in the catalog
        tags:
          type: array
          description: Product tags
          items:
            type: string
    DeleteBusinessProductResponse:
      type: object
      properties:
        id:
          type: string
          description: Deleted product ID
        deleted:
          type: boolean
          description: Deletion status
    UploadBusinessProductMediaRequest:
      type: object
      properties:
        mediaType:
          type: string
          description: Media type (image, document)
        file:
          type: string
          format: binary
          description: Media file to upload
      required:
      - mediaType
      - file
    BusinessProductMediaResponse:
      type: object
      properties:
        id:
          type: string
          description: Media ID
        productId:
          type: string
          description: Product ID
        type:
          type: string
          description: Media type
        url:
          type: string
          description: Media URL
        createdAt:
          type: string
          description: Upload timestamp (ISO 8601)
    DeleteBusinessProductMediaResponse:
      type: object
      properties:
        id:
          type: string
          description: Deleted media ID
        deleted:
          type: boolean
          description: Deletion status
    GetCartRequest:
      type: object
      properties: {}
    CartResponse:
      type: object
      properties:
        id:
          type: string
          description: Cart ID
        userId:
          type: string
          description: Owner user ID
        currency:
          type: string
          description: Currency code
        itemCount:
          type: integer
          description: Total number of items
        totalAmount:
          type: number
          description: Total cart amount
        updatedAt:
          type: string
          description: Last update timestamp
    ListCartItemsRequest:
      type: object
      properties: {}
    CartItemListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of cart items
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Page size
        totalItems:
          type: integer
          description: Total number of items
    AddCartItemRequest:
      type: object
      properties:
        productId:
          type: string
          description: Product ID to add
        quantity:
          type: integer
          description: Quantity of the product
      required:
      - productId
      - quantity
    AddCartItemResponse:
      type: object
      properties:
        id:
          type: string
          description: Cart item ID
        productId:
          type: string
          description: Product ID
        quantity:
          type: integer
          description: Quantity of the product
        lineTotal:
          type: number
          description: Line total amount
    UpdateCartItemRequest:
      type: object
      properties:
        quantity:
          type: integer
          description: Updated quantity
      required:
      - quantity
    UpdateCartItemResponse:
      type: object
      properties:
        id:
          type: string
          description: Cart item ID
        productId:
          type: string
          description: Product ID
        quantity:
          type: integer
          description: Updated quantity
        lineTotal:
          type: number
          description: Updated line total amount
    RemoveCartItemRequest:
      type: object
      properties: {}
    RemoveCartItemResponse:
      type: object
      properties:
        removed:
          type: boolean
          description: Indicates if the item was removed
    ClearCartRequest:
      type: object
      properties: {}
    ClearCartResponse:
      type: object
      properties:
        cleared:
          type: boolean
          description: Indicates if the cart was cleared
    PaymentMarketsResponse:
      type: object
      properties:
        markets:
          type: array
          description: List of supported market codes
          items:
            type: string
            description: ISO 3166-1 alpha-2 market code
    CreatePaymentRequest:
      type: object
      properties:
        receiverUserId:
          type: string
          description: User ID of the payment receiver
        amount:
          type: number
          description: Payment amount in minor units
        currency:
          type: string
          description: ISO 4217 currency code
        note:
          type: string
          description: Optional payment note
        market:
          type: string
          description: Market code where payment is initiated
        idempotencyKey:
          type: string
          description: Unique key to prevent duplicate payments
      required:
      - receiverUserId
      - amount
      - currency
      - market
      - idempotencyKey
    PaymentResponse:
      type: object
      properties:
        paymentId:
          type: string
          description: Unique payment identifier
        status:
          type: string
          description: Payment status (pending, completed, failed)
        amount:
          type: number
          description: Payment amount in minor units
        currency:
          type: string
          description: ISO 4217 currency code
        market:
          type: string
          description: Market code where payment is processed
        createdAt:
          type: string
          description: ISO 8601 timestamp when payment was created
    PaymentDetailsResponse:
      type: object
      properties:
        paymentId:
          type: string
          description: Unique payment identifier
        senderUserId:
          type: string
          description: User ID of the payment sender
        receiverUserId:
          type: string
          description: User ID of the payment receiver
        amount:
          type: number
          description: Payment amount in minor units
        currency:
          type: string
          description: ISO 4217 currency code
        market:
          type: string
          description: Market code where payment is processed
        status:
          type: string
          description: Payment status (pending, completed, failed)
        note:
          type: string
          description: Optional payment note
        createdAt:
          type: string
          description: ISO 8601 timestamp when payment was created
    PaymentListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of payments
          items:
            type: object
            description: Payment summary
            properties:
              paymentId:
                type: string
                description: Unique payment identifier
              amount:
                type: number
                description: Payment amount in minor units
              currency:
                type: string
                description: ISO 4217 currency code
              status:
                type: string
                description: Payment status
              createdAt:
                type: string
                description: ISO 8601 timestamp when payment was created
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of payments
    BusinessMessageStatisticsResponse:
      type: object
      properties:
        businessId:
          type: string
          description: Business ID
        from:
          type: string
          description: Start of time range in ISO 8601 format
        to:
          type: string
          description: End of time range in ISO 8601 format
        totals:
          type: object
          description: Aggregated totals for the period
          properties:
            sent:
              type: integer
              description: Total messages sent
            delivered:
              type: integer
              description: Total messages delivered
            read:
              type: integer
              description: Total messages read
            failed:
              type: integer
              description: Total messages failed
            media:
              type: integer
              description: Total media messages sent
        breakdown:
          type: array
          description: Optional time-bucketed breakdown if groupBy is provided
          items:
            type: object
            properties:
              bucketStart:
                type: string
                description: Bucket start time in ISO 8601 format
              bucketEnd:
                type: string
                description: Bucket end time in ISO 8601 format
              sent:
                type: integer
                description: Messages sent in bucket
              delivered:
                type: integer
                description: Messages delivered in bucket
              read:
                type: integer
                description: Messages read in bucket
              failed:
                type: integer
                description: Messages failed in bucket
              media:
                type: integer
                description: Media messages in bucket
    HealthCheckRequest:
      type: object
      properties: {}
    HealthCheckResponse:
      type: object
      properties:
        status:
          type: string
          description: Service status
        timestamp:
          type: string
          description: ISO-8601 timestamp
    CreateIntegrationAppRequest:
      type: object
      properties:
        name:
          type: string
          description: App name
        contactEmail:
          type: string
          description: Technical contact email
        callbackUrl:
          type: string
          description: Default webhook callback URL
      required:
      - name
      - contactEmail
    IntegrationAppResponse:
      type: object
      properties:
        appId:
          type: string
          description: Integration app ID
        name:
          type: string
          description: App name
        status:
          type: string
          description: App status
        callbackUrl:
          type: string
          description: Default webhook callback URL
        createdAt:
          type: string
          description: ISO-8601 creation time
    ListIntegrationAppsRequest:
      type: object
      properties: {}
    IntegrationAppListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of integration apps
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Page size
        total:
          type: integer
          description: Total items
    GetIntegrationAppRequest:
      type: object
      properties: {}
    IssueTokenRequest:
      type: object
      properties:
        clientId:
          type: string
          description: Client ID
        clientSecret:
          type: string
          description: Client secret
      required:
      - clientId
      - clientSecret
    TokenResponse:
      type: object
      properties:
        accessToken:
          type: string
          description: Bearer token
        expiresIn:
          type: integer
          description: Token lifetime in seconds
        tokenType:
          type: string
          description: Token type
    RegisterKeysRequest:
      type: object
      properties:
        identityKey:
          type: string
          description: Signal identity public key
        signedPreKey:
          type: string
          description: Signal signed pre-key
        oneTimePreKeys:
          type: array
          description: List of one-time pre-keys
      required:
      - identityKey
      - signedPreKey
    RegisterKeysResponse:
      type: object
      properties:
        status:
          type: string
          description: Registration status
        registeredAt:
          type: string
          description: ISO-8601 registration time
    SendMessageRequest:
      type: object
      properties:
        recipientType:
          type: string
          description: 'Recipient type: user, group, broadcast'
        recipientId:
          type: string
          description: Recipient ID
        ciphertext:
          type: string
          description: Signal Protocol encrypted payload
        messageId:
          type: string
          description: Client-generated message ID for offline queueing
        timestamp:
          type: string
          description: Client timestamp
      required:
      - recipientType
      - recipientId
      - ciphertext
      - messageId
    SendMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Message ID
        status:
          type: string
          description: Delivery status
        queued:
          type: boolean
          description: Indicates if message was queued for offline delivery
    RegisterWebhookRequest:
      type: object
      properties:
        url:
          type: string
          description: Webhook URL
        events:
          type: array
          description: Subscribed events
        secret:
          type: string
          description: Signing secret
      required:
      - url
      - events
    WebhookResponse:
      type: object
      properties:
        webhookId:
          type: string
          description: Webhook ID
        status:
          type: string
          description: Webhook status
        createdAt:
          type: string
          description: ISO-8601 creation time
    ListWebhooksRequest:
      type: object
      properties: {}
    WebhookListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of webhooks
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Page size
        total:
          type: integer
          description: Total items
    GetAccessibilitySettingsRequest:
      type: object
      properties: {}
    AccessibilitySettingsResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        screenreaderEnabled:
          type: boolean
          description: Whether screenreader optimizations are enabled
        preferredLabelFormat:
          type: string
          description: Preferred aria-label format or verbosity level
        announceMessageMetadata:
          type: boolean
          description: Whether to announce message metadata (timestamps, sender)
        largeTapTargets:
          type: boolean
          description: Enable larger tap targets for accessibility
        highContrast:
          type: boolean
          description: Enable high contrast mode
        updatedAt:
          type: string
          description: ISO-8601 timestamp of last update
    UpdateAccessibilitySettingsRequest:
      type: object
      properties:
        screenreaderEnabled:
          type: boolean
          description: Whether screenreader optimizations are enabled
        preferredLabelFormat:
          type: string
          description: Preferred aria-label format or verbosity level
        announceMessageMetadata:
          type: boolean
          description: Whether to announce message metadata (timestamps, sender)
        largeTapTargets:
          type: boolean
          description: Enable larger tap targets for accessibility
        highContrast:
          type: boolean
          description: Enable high contrast mode
      required:
      - screenreaderEnabled
    TypographyPreferencesResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        fontScale:
          type: number
          description: Font scaling factor (e.g., 0.8 to 1.6)
        preset:
          type: string
          description: Named preset (e.g., small, default, large, extraLarge)
        updatedAt:
          type: string
          description: ISO-8601 timestamp of last update
    UpdateTypographyPreferencesRequest:
      type: object
      properties:
        fontScale:
          type: number
          description: Font scaling factor (e.g., 0.8 to 1.6)
        preset:
          type: string
          description: Named preset (e.g., small, default, large, extraLarge)
      required:
      - fontScale
    GetUserAccessibilitySettingsRequest:
      type: object
      properties: {}
    UserAccessibilitySettingsResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        contrastMode:
          type: string
          description: Selected contrast mode (e.g., standard, high)
        minContrastRatio:
          type: number
          description: Minimum contrast ratio enforced by the client
        updatedAt:
          type: string
          description: ISO-8601 timestamp of last update
    UpdateUserAccessibilitySettingsRequest:
      type: object
      properties:
        contrastMode:
          type: string
          description: Selected contrast mode (e.g., standard, high)
        minContrastRatio:
          type: number
          description: Minimum contrast ratio to enforce
      required:
      - contrastMode
      - minContrastRatio
    GetContrastRequirementsRequest:
      type: object
      properties: {}
    ContrastRequirementsResponse:
      type: object
      properties:
        minContrastRatio:
          type: number
          description: Minimum contrast ratio required
        recommendedContrastRatio:
          type: number
          description: Recommended contrast ratio for optimal readability
        supportedModes:
          type: array
          description: Supported contrast modes
          items:
            type: string
    CreateTranscriptionRequest:
      type: object
      properties:
        language:
          type: string
          description: BCP-47 language tag for transcription (e.g., de-DE, en-US)
        enablePunctuation:
          type: boolean
          description: Whether to include punctuation in the transcription
        enableSpeakerDiarization:
          type: boolean
          description: Whether to attempt speaker separation
    TranscriptionResponse:
      type: object
      properties:
        id:
          type: string
          description: Transcription ID
        voiceMessageId:
          type: string
          description: Voice message ID
        status:
          type: string
          description: Transcription status (processing, completed, failed)
        text:
          type: string
          description: Transcribed text when completed
        language:
          type: string
          description: Detected or specified language
        createdAt:
          type: string
          description: ISO-8601 creation timestamp
        updatedAt:
          type: string
          description: ISO-8601 last update timestamp
    GetTranscriptionRequest:
      type: object
      properties: {}
    ListTranscriptionsRequest:
      type: object
      properties: {}
    TranscriptionListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of transcription resources
          items:
            type: object
            properties:
              id:
                type: string
                description: Transcription ID
              voiceMessageId:
                type: string
                description: Voice message ID
              status:
                type: string
                description: Transcription status (processing, completed, failed)
              text:
                type: string
                description: Transcribed text when completed
              language:
                type: string
                description: Detected or specified language
              createdAt:
                type: string
                description: ISO-8601 creation timestamp
              updatedAt:
                type: string
                description: ISO-8601 last update timestamp
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of transcriptions
        totalPages:
          type: integer
          description: Total number of pages
    CreateOfflineQueueRequest:
      type: object
      properties:
        deviceId:
          type: string
          description: Unique device identifier
        clientPublicKey:
          type: string
          description: Public key used for Signal Protocol session setup
      required:
      - deviceId
      - clientPublicKey
    OfflineQueueResponse:
      type: object
      properties:
        queueId:
          type: string
          description: Offline queue ID
        deviceId:
          type: string
          description: Unique device identifier
        createdAt:
          type: string
          description: ISO-8601 timestamp of queue creation
    EnqueueOfflineMessageRequest:
      type: object
      properties:
        messageId:
          type: string
          description: Client-generated message ID
        ciphertext:
          type: string
          description: Signal Protocol encrypted payload
        metadata:
          type: object
          description: Message metadata such as type, timestamp, and recipient scope
      required:
      - messageId
      - ciphertext
      - metadata
    EnqueueOfflineMessageResponse:
      type: object
      properties:
        messageId:
          type: string
          description: Client-generated message ID
        queuePosition:
          type: integer
          description: Position in the offline queue
        queuedAt:
          type: string
          description: ISO-8601 timestamp when the message was queued
    ListQueuedMessagesResponse:
      type: object
      properties:
        items:
          type: array
          description: List of queued encrypted messages
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of queued messages
    AckQueuedMessagesRequest:
      type: object
      properties:
        messageIds:
          type: array
          description: List of message IDs to acknowledge
      required:
      - messageIds
    AckQueuedMessagesResponse:
      type: object
      properties:
        acknowledgedCount:
          type: integer
          description: Number of messages acknowledged
        remainingCount:
          type: integer
          description: Number of messages remaining in the queue
    DeleteOfflineQueueRequest:
      type: object
      properties: {}
    DeleteOfflineQueueResponse:
      type: object
      properties:
        deleted:
          type: boolean
          description: Indicates whether the queue was deleted
    GetStartupResourcesRequest:
      type: object
      properties: {}
    StartupResourcesResponse:
      type: object
      properties:
        syncToken:
          type: string
          description: Token to be used for the next delta sync
        serverTime:
          type: string
          description: Current server time in ISO 8601 format
        limits:
          type: object
          description: Application limits used to validate client behavior
          properties:
            maxGroupMembers:
              type: integer
              description: Maximum number of group members
            maxBroadcastRecipients:
              type: integer
              description: Maximum number of broadcast list recipients
            maxDocumentSizeBytes:
              type: integer
              description: Maximum document size in bytes
            maxImageSizeBytes:
              type: integer
              description: Maximum image size in bytes
            maxStatusDurationHours:
              type: integer
              description: Maximum status duration in hours
        realtime:
          type: object
          description: Realtime communication endpoints and parameters
          properties:
            webSocketUrl:
              type: string
              description: WebSocket URL for realtime messaging
            webRtcStunServers:
              type: array
              description: List of STUN servers for WebRTC
              items:
                type: string
                description: STUN server URL
            webRtcTurnServers:
              type: array
              description: List of TURN servers for WebRTC
              items:
                type: string
                description: TURN server URL
        security:
          type: object
          description: Security-related startup information
          properties:
            signalProtocolVersion:
              type: string
              description: Signal protocol version supported by the server
            e2eRequired:
              type: boolean
              description: Indicates if end-to-end encryption is required
        offline:
          type: object
          description: Offline queue configuration
          properties:
            queueEnabled:
              type: boolean
              description: Indicates if offline queueing is enabled
            maxQueuedMessages:
              type: integer
              description: Maximum number of messages allowed in the offline queue
    MessagesSyncRequest:
      type: object
      properties: {}
    MessagesSyncResponse:
      type: object
      properties:
        nextCursor:
          type: string
          description: Cursor for the next page of results
        hasMore:
          type: boolean
          description: Indicates if more results are available
        messages:
          type: array
          description: List of encrypted message envelopes
          items:
            type: object
            properties:
              messageId:
                type: string
                description: Unique message identifier
              conversationId:
                type: string
                description: Conversation identifier
              senderId:
                type: string
                description: Sender user identifier
              ciphertext:
                type: string
                description: End-to-end encrypted payload (Signal Protocol)
              serverTimestamp:
                type: string
                description: Server timestamp in ISO-8601
              status:
                type: string
                description: Message status (e.g., sent, delivered, read, deleted)
    MessagesSyncAckRequest:
      type: object
      properties:
        messageIds:
          type: array
          description: List of message IDs that were successfully processed
          items:
            type: string
            description: Message identifier
        lastSyncTimestamp:
          type: string
          description: Client's last processed timestamp in ISO-8601
      required:
      - messageIds
    MessagesSyncAckResponse:
      type: object
      properties:
        acknowledgedCount:
          type: integer
          description: Number of messages acknowledged
        serverTimestamp:
          type: string
          description: Server timestamp confirming acknowledgment
    ConversationsSyncRequest:
      type: object
      properties: {}
    ConversationsSyncResponse:
      type: object
      properties:
        nextCursor:
          type: string
          description: Cursor for the next page of results
        hasMore:
          type: boolean
          description: Indicates if more results are available
        conversations:
          type: array
          description: List of conversation metadata updates
          items:
            type: object
            properties:
              conversationId:
                type: string
                description: Conversation identifier
              type:
                type: string
                description: Conversation type (direct, group, broadcast)
              title:
                type: string
                description: Conversation title
              lastMessageId:
                type: string
                description: Most recent message ID
              updatedAt:
                type: string
                description: ISO-8601 timestamp of last update
    PowerPolicyResponse:
      type: object
      properties:
        policyVersion:
          type: string
          description: Version of the power policy
        syncIntervalSeconds:
          type: integer
          description: Recommended minimum sync interval in seconds
        websocketKeepaliveSeconds:
          type: integer
          description: Recommended websocket keepalive interval in seconds
        backgroundFetchWindowSeconds:
          type: integer
          description: Recommended background fetch window in seconds
        maxConcurrentTransfers:
          type: integer
          description: Recommended maximum concurrent media transfers
    UserPowerSettingsResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        lowPowerModeEnabled:
          type: boolean
          description: Whether low power mode is enabled
        reduceBackgroundSync:
          type: boolean
          description: Whether background sync is reduced
        wifiOnlyMediaUpload:
          type: boolean
          description: Whether media uploads are limited to Wi-Fi
        deferLargeDownloads:
          type: boolean
          description: Whether large downloads are deferred to charging or Wi-Fi
    UpdateUserPowerSettingsRequest:
      type: object
      properties:
        lowPowerModeEnabled:
          type: boolean
          description: Whether low power mode is enabled
        reduceBackgroundSync:
          type: boolean
          description: Whether background sync is reduced
        wifiOnlyMediaUpload:
          type: boolean
          description: Whether media uploads are limited to Wi-Fi
        deferLargeDownloads:
          type: boolean
          description: Whether large downloads are deferred to charging or Wi-Fi
    ClientPowerStateRequest:
      type: object
      properties:
        deviceId:
          type: string
          description: Device ID
        batteryLevelPercent:
          type: integer
          description: Battery level percentage
        isCharging:
          type: boolean
          description: Whether the device is charging
        lowPowerMode:
          type: boolean
          description: Whether OS low power mode is enabled
        networkType:
          type: string
          description: Network type (wifi, cellular, offline)
      required:
      - deviceId
      - batteryLevelPercent
      - isCharging
      - networkType
    ClientPowerStateResponse:
      type: object
      properties:
        accepted:
          type: boolean
          description: Indicates whether the power state was accepted
        effectivePolicyVersion:
          type: string
          description: Policy version applied for this device
    StorageCleanupRequest:
      type: object
      properties:
        scopeType:
          type: string
          description: user|device|group
        scopeId:
          type: string
          description: Target scope identifier
        maxAgeDays:
          type: integer
          description: Delete items older than this many days
        includeMedia:
          type: boolean
          description: Whether to include media files
        includeCaches:
          type: boolean
          description: Whether to include cached data
      required:
      - scopeType
      - scopeId
    StorageCleanupResponse:
      type: object
      properties:
        cleanupId:
          type: string
          description: Cleanup job identifier
        status:
          type: string
          description: queued|running|completed
        estimatedReclaimedBytes:
          type: integer
          description: Estimated bytes to be reclaimed
    RetentionPolicyRequest:
      type: object
      properties:
        statusMaxHours:
          type: integer
          description: Maximum status duration in hours (max 24)
        messageMaxDays:
          type: integer
          description: Maximum message retention in days
        mediaMaxDays:
          type: integer
          description: Maximum media retention in days
        purgeOnDeliveryAck:
          type: boolean
          description: Remove server copies after delivery acknowledgment
      required:
      - statusMaxHours
    RetentionPolicyResponse:
      type: object
      properties:
        statusMaxHours:
          type: integer
          description: Configured maximum status duration
        messageMaxDays:
          type: integer
          description: Configured message retention
        mediaMaxDays:
          type: integer
          description: Configured media retention
        purgeOnDeliveryAck:
          type: boolean
          description: Configured purge behavior
    CreateShareExtensionRequest:
      type: object
      properties:
        senderDeviceId:
          type: string
          description: Unique device identifier used for E2E session binding
        targetType:
          type: string
          description: 'Target type: chat, group, or broadcast'
        targetId:
          type: string
          description: Target identifier (chatId, groupId, or broadcastListId)
        messageText:
          type: string
          description: Optional text content to share
        e2eCiphertext:
          type: string
          description: Encrypted payload (Signal Protocol)
        e2eKeyId:
          type: string
          description: Key identifier used for encryption
        statusExpirySeconds:
          type: integer
          description: Optional status expiry in seconds (max 86400)
      required:
      - senderDeviceId
      - targetType
      - targetId
      - e2eCiphertext
      - e2eKeyId
    ShareExtensionResponse:
      type: object
      properties:
        shareId:
          type: string
          description: Share payload identifier
        queueState:
          type: string
          description: 'Queue state: queued, dispatched, or failed'
        createdAt:
          type: string
          description: ISO timestamp of creation
    ShareExtensionAttachmentUploadRequest:
      type: object
      properties:
        file:
          type: string
          format: binary
          description: Encrypted media file
        mediaType:
          type: string
          description: 'Media type: image, video, audio, document'
        originalFileName:
          type: string
          description: Original file name
        e2eKeyId:
          type: string
          description: Key identifier used for encryption
      required:
      - file
      - mediaType
      - e2eKeyId
    ShareExtensionAttachmentResponse:
      type: object
      properties:
        attachmentId:
          type: string
          description: Attachment identifier
        shareId:
          type: string
          description: Associated share payload identifier
        sizeBytes:
          type: integer
          description: Uploaded file size
        createdAt:
          type: string
          description: ISO timestamp of upload
    DispatchShareExtensionRequest:
      type: object
      properties:
        clientMessageId:
          type: string
          description: Client-side message identifier for idempotency
      required:
      - clientMessageId
    DispatchShareExtensionResponse:
      type: object
      properties:
        shareId:
          type: string
          description: Share payload identifier
        dispatchState:
          type: string
          description: 'Dispatch state: dispatched, queued, or failed'
        dispatchedAt:
          type: string
          description: ISO timestamp when dispatched or queued
    ListShareTargetsRequest:
      type: object
      properties: {}
    ListShareTargetsResponse:
      type: object
      properties:
        items:
          type: array
          description: List of share targets
          items:
            type: object
            properties:
              targetId:
                type: string
                description: Target identifier
              targetType:
                type: string
                description: Target type
              displayName:
                type: string
                description: Display name
              memberCount:
                type: integer
                description: Number of members (for groups/broadcasts)
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Items per page
        totalItems:
          type: integer
          description: Total number of available targets
    ListVoiceAssistantsRequest:
      type: object
      properties: {}
    VoiceAssistantsListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of supported voice assistants
          items:
            type: object
            properties:
              provider:
                type: string
                description: Voice assistant provider identifier
              displayName:
                type: string
                description: Human-readable name of the provider
              accountLinkingSupported:
                type: boolean
                description: Indicates if account linking is supported
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Page size
        totalItems:
          type: integer
          description: Total number of providers
    ListVoiceAssistantLinksRequest:
      type: object
      properties: {}
    VoiceAssistantLinksListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of linked voice assistant accounts
          items:
            type: object
            properties:
              linkId:
                type: string
                description: Unique link identifier
              provider:
                type: string
                description: Voice assistant provider identifier
              status:
                type: string
                description: Link status (e.g., active, revoked)
              linkedAt:
                type: string
                description: ISO-8601 timestamp of linking
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Page size
        totalItems:
          type: integer
          description: Total number of linked accounts
    CreateVoiceAssistantLinkRequest:
      type: object
      properties:
        provider:
          type: string
          description: Voice assistant provider identifier (e.g., siri, google)
        authorizationCode:
          type: string
          description: OAuth authorization code from the provider
        redirectUri:
          type: string
          description: Redirect URI used in the OAuth flow
      required:
      - provider
      - authorizationCode
      - redirectUri
    VoiceAssistantLinkResponse:
      type: object
      properties:
        linkId:
          type: string
          description: Unique link identifier
        provider:
          type: string
          description: Voice assistant provider identifier
        status:
          type: string
          description: Link status
        linkedAt:
          type: string
          description: ISO-8601 timestamp of linking
    DeleteVoiceAssistantLinkRequest:
      type: object
      properties: {}
    DeleteVoiceAssistantLinkResponse:
      type: object
      properties:
        linkId:
          type: string
          description: Unique link identifier
        status:
          type: string
          description: Deletion status
        deletedAt:
          type: string
          description: ISO-8601 timestamp of deletion
    CreateVoiceAssistantCommandRequest:
      type: object
      properties:
        provider:
          type: string
          description: Voice assistant provider identifier
        intent:
          type: string
          description: Intent name (e.g., sendMessage, startCall)
        parameters:
          type: object
          description: Intent-specific parameters (e.g., recipientId, messageText)
        clientRequestId:
          type: string
          description: Client-generated id for idempotency
      required:
      - provider
      - intent
      - parameters
    VoiceAssistantCommandResponse:
      type: object
      properties:
        commandId:
          type: string
          description: Unique command identifier
        status:
          type: string
          description: Processing status (e.g., accepted, completed, failed)
        result:
          type: object
          description: Command execution result
    VoiceAssistantWebhookRequest:
      type: object
      properties:
        eventId:
          type: string
          description: Unique event identifier
        signature:
          type: string
          description: Provider signature for webhook verification
        payload:
          type: object
          description: Provider-specific webhook payload
      required:
      - eventId
      - signature
      - payload
    VoiceAssistantWebhookResponse:
      type: object
      properties:
        received:
          type: boolean
          description: Indicates if the webhook was received successfully
        processedAt:
          type: string
          description: ISO-8601 timestamp of processing
    WidgetListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of widgets
          items:
            type: object
            properties:
              id:
                type: string
                description: Widget ID
              type:
                type: string
                description: Widget type identifier
              title:
                type: string
                description: Widget title
              position:
                type: integer
                description: Order on home screen
              isEnabled:
                type: boolean
                description: Whether widget is enabled
              config:
                type: object
                description: Widget configuration settings
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of widgets
    CreateWidgetRequest:
      type: object
      properties:
        type:
          type: string
          description: Widget type identifier
        title:
          type: string
          description: Widget title
        position:
          type: integer
          description: Order on home screen
        isEnabled:
          type: boolean
          description: Whether widget is enabled
        config:
          type: object
          description: Widget configuration settings
      required:
      - type
      - position
    WidgetResponse:
      type: object
      properties:
        id:
          type: string
          description: Widget ID
        type:
          type: string
          description: Widget type identifier
        title:
          type: string
          description: Widget title
        position:
          type: integer
          description: Order on home screen
        isEnabled:
          type: boolean
          description: Whether widget is enabled
        config:
          type: object
          description: Widget configuration settings
        updatedAt:
          type: string
          description: Last update timestamp (ISO 8601)
    UpdateWidgetRequest:
      type: object
      properties:
        title:
          type: string
          description: Widget title
        position:
          type: integer
          description: Order on home screen
        isEnabled:
          type: boolean
          description: Whether widget is enabled
        config:
          type: object
          description: Widget configuration settings
    DeleteWidgetResponse:
      type: object
      properties:
        id:
          type: string
          description: Widget ID
        deleted:
          type: boolean
          description: Deletion status
    CreateWatchDeviceRequest:
      type: object
      properties:
        deviceName:
          type: string
          description: User-friendly name of the smartwatch
        platform:
          type: string
          description: Smartwatch platform (e.g., watchOS, WearOS)
        devicePublicKey:
          type: string
          description: Public key used for end-to-end encryption setup (Signal Protocol)
      required:
      - deviceName
      - platform
      - devicePublicKey
    WatchDeviceResponse:
      type: object
      properties:
        id:
          type: string
          description: Smartwatch device ID
        deviceName:
          type: string
          description: User-friendly name of the smartwatch
        platform:
          type: string
          description: Smartwatch platform
        status:
          type: string
          description: Registration status
    ListWatchDevicesRequest:
      type: object
      properties: {}
    WatchDeviceListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of smartwatches
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Items per page
        total:
          type: integer
          description: Total items
    PairWatchDeviceRequest:
      type: object
      properties:
        pairingCode:
          type: string
          description: One-time pairing code
        devicePreKeyBundle:
          type: string
          description: Signal Protocol pre-key bundle for secure session
      required:
      - pairingCode
      - devicePreKeyBundle
    PairWatchDeviceResponse:
      type: object
      properties:
        id:
          type: string
          description: Smartwatch device ID
        paired:
          type: boolean
          description: Pairing status
        pairedAt:
          type: string
          description: Pairing timestamp
    SyncWatchDeviceRequest:
      type: object
      properties:
        lastSyncAt:
          type: string
          description: Timestamp of last successful sync
        queuedMessageIds:
          type: array
          description: IDs of messages queued on the watch while offline
      required:
      - lastSyncAt
    SyncWatchDeviceResponse:
      type: object
      properties:
        serverMessages:
          type: array
          description: Messages to deliver to the smartwatch
        acknowledgedMessageIds:
          type: array
          description: Messages acknowledged by the server
        syncAt:
          type: string
          description: Sync completion timestamp
    SendWatchNotificationRequest:
      type: object
      properties:
        ciphertext:
          type: string
          description: Encrypted notification payload
        messageType:
          type: string
          description: Type of notification (message, call, status, system)
      required:
      - ciphertext
      - messageType
    SendWatchNotificationResponse:
      type: object
      properties:
        notificationId:
          type: string
          description: Notification ID
        delivered:
          type: boolean
          description: Delivery status
    UpdateWatchDeviceSettingsRequest:
      type: object
      properties:
        notificationsEnabled:
          type: boolean
          description: Enable or disable notifications on the watch
        callNotificationsEnabled:
          type: boolean
          description: Enable or disable call notifications on the watch
        syncIntervalSeconds:
          type: integer
          description: Preferred background sync interval
      required:
      - notificationsEnabled
      - callNotificationsEnabled
    UpdateWatchDeviceSettingsResponse:
      type: object
      properties:
        id:
          type: string
          description: Smartwatch device ID
        notificationsEnabled:
          type: boolean
          description: Notification setting
        callNotificationsEnabled:
          type: boolean
          description: Call notification setting
        syncIntervalSeconds:
          type: integer
          description: Background sync interval
    ListDesktopAppReleasesRequest:
      type: object
      properties: {}
    DesktopAppReleaseListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of desktop app releases
          items:
            type: object
            properties:
              id:
                type: string
                description: Release ID
              platform:
                type: string
                description: Target platform
              version:
                type: string
                description: Semantic version
              releaseNotes:
                type: string
                description: Release notes
              downloadUrl:
                type: string
                description: URL to download installer
              sha256:
                type: string
                description: SHA-256 checksum
              publishedAt:
                type: string
                description: Release publication timestamp (ISO 8601)
        page:
          type: integer
          description: Current page
        pageSize:
          type: integer
          description: Items per page
        totalItems:
          type: integer
          description: Total number of items
    GetDesktopAppReleaseRequest:
      type: object
      properties: {}
    DesktopAppReleaseResponse:
      type: object
      properties:
        id:
          type: string
          description: Release ID
        platform:
          type: string
          description: Target platform
        version:
          type: string
          description: Semantic version
        releaseNotes:
          type: string
          description: Release notes
        downloadUrl:
          type: string
          description: URL to download installer
        sha256:
          type: string
          description: SHA-256 checksum
        publishedAt:
          type: string
          description: Release publication timestamp (ISO 8601)
    CheckDesktopAppUpdateRequest:
      type: object
      properties:
        platform:
          type: string
          description: Client platform (windows, macos, linux)
        currentVersion:
          type: string
          description: Current installed version
      required:
      - platform
      - currentVersion
    CheckDesktopAppUpdateResponse:
      type: object
      properties:
        updateAvailable:
          type: boolean
          description: Indicates if an update is available
        latestVersion:
          type: string
          description: Latest available version
        downloadUrl:
          type: string
          description: Download URL for the latest version
        sha256:
          type: string
          description: SHA-256 checksum for the latest installer
    WebClientConfigResponse:
      type: object
      properties:
        maxGroupMembers:
          type: integer
          description: Maximum number of group members
        maxBroadcastRecipients:
          type: integer
          description: Maximum number of recipients in a broadcast list
        maxDocumentSizeBytes:
          type: integer
          description: Maximum document size in bytes
        maxImageSizeBytes:
          type: integer
          description: Maximum image size in bytes
        maxStatusDurationHours:
          type: integer
          description: Maximum status duration in hours
        supportsWebRTC:
          type: boolean
          description: Indicates if WebRTC is enabled
        supportsWebSocket:
          type: boolean
          description: Indicates if WebSocket is enabled
        supportsOfflineQueue:
          type: boolean
          description: Indicates if offline queue is enabled
        encryptionProtocol:
          type: string
          description: End-to-end encryption protocol
    CreateWebSessionRequest:
      type: object
      properties:
        deviceName:
          type: string
          description: Name of the web client device or browser
        userAgent:
          type: string
          description: Browser user agent string
        publicKey:
          type: string
          description: Signal Protocol public key for session setup
      required:
      - deviceName
      - userAgent
      - publicKey
    WebSessionResponse:
      type: object
      properties:
        sessionId:
          type: string
          description: Web session ID
        createdAt:
          type: string
          description: Session creation timestamp
        expiresAt:
          type: string
          description: Session expiration timestamp
    CreateWebSocketTokenRequest:
      type: object
      properties:
        clientNonce:
          type: string
          description: Client-generated nonce to bind the token
      required:
      - clientNonce
    WebSocketTokenResponse:
      type: object
      properties:
        token:
          type: string
          description: WebSocket access token
        expiresAt:
          type: string
          description: Token expiration timestamp
    CreateWebRtcTokenRequest:
      type: object
      properties:
        callType:
          type: string
          description: Type of call requested (voice or video)
      required:
      - callType
    WebRtcTokenResponse:
      type: object
      properties:
        username:
          type: string
          description: TURN username
        credential:
          type: string
          description: TURN credential
        ttlSeconds:
          type: integer
          description: Credential time-to-live in seconds
        uris:
          type: array
          description: List of TURN/STUN server URIs
          items:
            type: string
    OfflineQueueListResponse:
      type: object
      properties:
        items:
          type: array
          description: Queued messages
          items:
            type: object
            description: Queued message payload
            properties:
              queueId:
                type: string
                description: Queue item ID
              messageId:
                type: string
                description: Message ID
              ciphertext:
                type: string
                description: Encrypted message payload
              createdAt:
                type: string
                description: Queue item creation timestamp
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Number of items per page
        totalItems:
          type: integer
          description: Total number of queued items
    AckOfflineQueueRequest:
      type: object
      properties:
        queueIds:
          type: array
          description: List of queue item IDs to acknowledge
          items:
            type: string
      required:
      - queueIds
    AckOfflineQueueResponse:
      type: object
      properties:
        acknowledged:
          type: integer
          description: Number of acknowledged items
    CreateAiChatRequest:
      type: object
      properties:
        title:
          type: string
          description: Optional chat title
        assistantId:
          type: string
          description: Identifier of the AI assistant profile
        signalSessionSetup:
          type: object
          description: Signal Protocol session setup data for end-to-end encryption
      required:
      - assistantId
      - signalSessionSetup
    AiChatResponse:
      type: object
      properties:
        id:
          type: string
          description: AI chat session ID
        title:
          type: string
          description: Chat title
        assistantId:
          type: string
          description: AI assistant profile ID
        createdAt:
          type: string
          description: ISO-8601 timestamp of creation
    CreateAiChatMessageRequest:
      type: object
      properties:
        ciphertext:
          type: string
          description: Encrypted message payload (Signal Protocol)
        clientMessageId:
          type: string
          description: Client-generated message ID for idempotency
        attachments:
          type: array
          description: Optional attachment references
          items:
            type: object
        queuedAt:
          type: string
          description: ISO-8601 timestamp when message was queued offline
      required:
      - ciphertext
      - clientMessageId
    AiChatMessageResponse:
      type: object
      properties:
        id:
          type: string
          description: Server message ID
        chatId:
          type: string
          description: AI chat session ID
        status:
          type: string
          description: Delivery status (queued, sent, delivered)
        createdAt:
          type: string
          description: ISO-8601 timestamp of creation
    ListAiChatMessagesRequest:
      type: object
      properties: {}
    AiChatMessageListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of encrypted messages
          items:
            type: object
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Items per page
        totalItems:
          type: integer
          description: Total number of messages
    MediaResponse:
      type: object
      properties:
        id:
          type: string
          description: Media ID
        url:
          type: string
          description: Download URL for the media
        sizeBytes:
          type: integer
          description: Size of the uploaded file in bytes
    CreateSmartRepliesRequest:
      type: object
      properties:
        contextCiphertext:
          type: string
          description: Verschluesselter Kontext der letzten Nachrichten (Signal Protocol
            Payload)
        contextNonce:
          type: string
          description: Nonce fuer den verschluesselten Kontext
        contextKeyId:
          type: string
          description: Schluessel-ID zur Entschluesselung des Kontextes auf dem Server
            oder in einer sicheren Enklave
        maxSuggestions:
          type: integer
          description: Maximale Anzahl der Antwortvorschlaege
          minimum: 1
          maximum: 5
        locale:
          type: string
          description: Locale fuer sprachspezifische Vorschlaege, z.B. de-DE
        deviceId:
          type: string
          description: Eindeutige Geraete-ID fuer Offline-Queue und Personalisierung
      required:
      - contextCiphertext
      - contextNonce
      - contextKeyId
      - maxSuggestions
      - locale
    SmartRepliesResponse:
      type: object
      properties:
        conversationId:
          type: string
          description: Eindeutige ID der Unterhaltung
        suggestionsCiphertext:
          type: string
          description: Verschluesselte Antwortvorschlaege (Signal Protocol Payload)
        suggestionsNonce:
          type: string
          description: Nonce fuer die verschluesselten Vorschlaege
        suggestionsCount:
          type: integer
          description: Anzahl der gelieferten Vorschlaege
        generatedAt:
          type: string
          description: Zeitstempel der Generierung im ISO-8601-Format
    StickerSuggestionsRequest:
      type: object
      properties:
        conversationId:
          type: string
          description: Unique identifier of the conversation
        messageContextCiphertext:
          type: string
          description: End-to-end encrypted message context used for generating suggestions
        contextType:
          type: string
          description: Type of context (e.g., message, status, reply)
        language:
          type: string
          description: BCP-47 language tag for localization
        limit:
          type: integer
          description: Maximum number of sticker suggestions to return
        clientTimestamp:
          type: string
          description: Client-side ISO-8601 timestamp for context alignment
      required:
      - conversationId
      - messageContextCiphertext
      - contextType
    StickerSuggestionsResponse:
      type: object
      properties:
        suggestions:
          type: array
          description: List of suggested stickers
          items:
            type: object
            properties:
              stickerId:
                type: string
                description: Unique sticker identifier
              title:
                type: string
                description: Localized sticker title
              packId:
                type: string
                description: Sticker pack identifier
              previewUrl:
                type: string
                description: URL to a low-resolution preview image
              relevanceScore:
                type: number
                description: Relevance score for ranking
    GetUserLocalizationPreferencesRequest:
      type: object
      properties: {}
    UserLocalizationPreferencesResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        language:
          type: string
          description: IETF BCP 47 language tag, e.g., ar, he, fa-IR
        textDirection:
          type: string
          description: 'Text direction preference: ltr or rtl'
        numeralSystem:
          type: string
          description: Optional numeral system, e.g., latn, arab
        timezone:
          type: string
          description: IANA timezone, e.g., Asia/Riyadh
    UpdateUserLocalizationPreferencesRequest:
      type: object
      properties:
        language:
          type: string
          description: IETF BCP 47 language tag, e.g., ar, he, fa-IR
        textDirection:
          type: string
          description: 'Text direction preference: ltr or rtl'
        numeralSystem:
          type: string
          description: Optional numeral system, e.g., latn, arab
        timezone:
          type: string
          description: IANA timezone, e.g., Asia/Riyadh
      required:
      - language
      - textDirection
    UpdateUserLocalizationPreferencesResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        language:
          type: string
          description: IETF BCP 47 language tag, e.g., ar, he, fa-IR
        textDirection:
          type: string
          description: 'Text direction preference: ltr or rtl'
        numeralSystem:
          type: string
          description: Optional numeral system, e.g., latn, arab
        timezone:
          type: string
          description: IANA timezone, e.g., Asia/Riyadh
        updatedAt:
          type: string
          description: ISO 8601 timestamp of update
    ListSupportedLocalesRequest:
      type: object
      properties: {}
    ListSupportedLocalesResponse:
      type: object
      properties:
        items:
          type: array
          description: List of supported locales
          items:
            type: object
            properties:
              language:
                type: string
                description: IETF BCP 47 language tag
              displayName:
                type: string
                description: Human-readable name
              textDirection:
                type: string
                description: ltr or rtl
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Items per page
        totalItems:
          type: integer
          description: Total number of supported locales
    ListRegionalFormatsRequest:
      type: object
      properties: {}
    RegionalFormatsListResponse:
      type: object
      properties:
        items:
          type: array
          description: List of supported regional formats
          items:
            type: object
            properties:
              locale:
                type: string
                description: IETF BCP 47 locale identifier (e.g., de-DE)
              dateFormat:
                type: string
                description: Preferred date format pattern
              timeFormat:
                type: string
                description: Preferred time format pattern
              numberFormat:
                type: string
                description: Preferred number format pattern
              timeZone:
                type: string
                description: Default timezone identifier (e.g., Europe/Berlin)
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Current page size
        totalItems:
          type: integer
          description: Total number of supported regional formats
    GetUserRegionalFormatsRequest:
      type: object
      properties: {}
    UserRegionalFormatsResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        locale:
          type: string
          description: IETF BCP 47 locale identifier (e.g., de-DE)
        dateFormat:
          type: string
          description: Preferred date format pattern
        timeFormat:
          type: string
          description: Preferred time format pattern
        numberFormat:
          type: string
          description: Preferred number format pattern
        timeZone:
          type: string
          description: Default timezone identifier
        updatedAt:
          type: string
          description: ISO 8601 timestamp of last update
    UpdateUserRegionalFormatsRequest:
      type: object
      properties:
        locale:
          type: string
          description: IETF BCP 47 locale identifier (e.g., de-DE)
        dateFormat:
          type: string
          description: Preferred date format pattern
        timeFormat:
          type: string
          description: Preferred time format pattern
        numberFormat:
          type: string
          description: Preferred number format pattern
        timeZone:
          type: string
          description: Default timezone identifier
      required:
      - locale
      - dateFormat
      - timeFormat
      - numberFormat
      - timeZone
    UpdateUserRegionalFormatsResponse:
      type: object
      properties:
        userId:
          type: string
          description: User ID
        locale:
          type: string
          description: IETF BCP 47 locale identifier (e.g., de-DE)
        dateFormat:
          type: string
          description: Preferred date format pattern
        timeFormat:
          type: string
          description: Preferred time format pattern
        numberFormat:
          type: string
          description: Preferred number format pattern
        timeZone:
          type: string
          description: Default timezone identifier
        updatedAt:
          type: string
          description: ISO 8601 timestamp of last update
    StickerPackResponse:
      type: object
      properties:
        id:
          type: string
          description: Sticker pack ID
        name:
          type: string
          description: Sticker pack name
        regionCode:
          type: string
          description: Region or locale code for which the pack is available
        description:
          type: string
          description: Sticker pack description
        thumbnailUrl:
          type: string
          description: URL of the pack thumbnail
        stickers:
          type: array
          description: List of stickers in the pack
          items:
            type: object
            properties:
              id:
                type: string
                description: Sticker ID
              imageUrl:
                type: string
                description: URL of the sticker image
              emoji:
                type: string
                description: Associated emoji for the sticker
    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: Machine-readable error code
        message:
          type: string
          description: Human-readable error message
        details:
          type: array
          description: Validation error details
          items:
            type: object
            properties:
              field:
                type: string
              message:
                type: string
      required:
      - error
      - message
    PaginationMeta:
      type: object
      properties:
        page:
          type: integer
          description: Current page number
        pageSize:
          type: integer
          description: Items per page
        totalItems:
          type: integer
          description: Total number of items
        totalPages:
          type: integer
          description: Total number of pages
      required:
      - page
      - pageSize
      - totalItems
      - totalPages
    PaginatedListBiometricCredentialsResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ListBiometricCredentialsResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedDeviceListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/DeviceListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedUserPasskeysResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/UserPasskeysResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedMessagesByDateResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/MessagesByDateResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedQueuedMessagesResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/QueuedMessagesResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedReactionListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ReactionListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedMediaListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/MediaListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedBroadcastListCollectionResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/BroadcastListCollectionResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedGroupListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/GroupListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedGroupMemberListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/GroupMemberListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedCommunityListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/CommunityListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedCommunityGroupListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/CommunityGroupListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedBroadcastChannelListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/BroadcastChannelListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedBroadcastMessageListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/BroadcastMessageListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedPollListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/PollListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedGroupEventListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/GroupEventListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedCallListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/CallListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedSignalingMessageListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/SignalingMessageListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedListGroupCallParticipantsResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ListGroupCallParticipantsResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedScreenShareListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ScreenShareListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedCallLinksListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/CallLinksListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedCallLogListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/CallLogListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedContactStatusListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ContactStatusListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedStatusReplyListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/StatusReplyListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedStatusMuteListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/StatusMuteListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedStickerPackListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/StickerPackListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedStickerListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/StickerListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedGifSearchResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/GifSearchResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedGalleryItemListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/GalleryItemListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedSecurityCodeVerificationListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/SecurityCodeVerificationListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedBlockedContactsListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/BlockedContactsListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedPushNotificationListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/PushNotificationListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedReactionNotificationListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ReactionNotificationListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedFavoriteContactsListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/FavoriteContactsListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedContactLabelListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ContactLabelListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedContactListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ContactListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedUnknownSendersListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/UnknownSendersListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedUnknownSenderMessagesResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/UnknownSenderMessagesResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedMessageSearchResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/MessageSearchResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedSearchChatsResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/SearchChatsResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedSearchContactsResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/SearchContactsResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedPresenceAllowedUsersResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/PresenceAllowedUsersResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedPresenceDeniedUsersResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/PresenceDeniedUsersResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedStorageUsageResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/StorageUsageResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedStorageItemListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/StorageItemListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedChatBackgroundListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ChatBackgroundListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedLanguagesListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/LanguagesListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedBackupListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/BackupListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedPinnedChatsListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/PinnedChatsListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedBusinessProfileListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/BusinessProfileListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedQuickReplyListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/QuickReplyListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedGreetingMessageListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/GreetingMessageListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedBusinessProductListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/BusinessProductListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedCartItemListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/CartItemListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedPaymentListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/PaymentListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedIntegrationAppListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/IntegrationAppListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedMessageListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/MessageListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedWebhookListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/WebhookListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedTranscriptionListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/TranscriptionListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedListQueuedMessagesResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ListQueuedMessagesResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedMessagesSyncResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/MessagesSyncResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedConversationsSyncResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ConversationsSyncResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedListShareTargetsResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ListShareTargetsResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedVoiceAssistantsListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/VoiceAssistantsListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedVoiceAssistantLinksListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/VoiceAssistantLinksListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedWidgetListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/WidgetListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedWatchDeviceListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/WatchDeviceListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedDesktopAppReleaseListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/DesktopAppReleaseListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedOfflineQueueListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/OfflineQueueListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedAiChatMessageListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/AiChatMessageListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedListSupportedLocalesResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ListSupportedLocalesResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
    PaginatedRegionalFormatsListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/RegionalFormatsListResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMeta'
      required:
      - data
      - pagination
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
security:
- bearerAuth: []
